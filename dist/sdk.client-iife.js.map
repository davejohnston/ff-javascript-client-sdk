{
  "version": 3,
  "sources": ["../node_modules/event-source-polyfill/src/eventsource.js", "../src/index.ts", "../node_modules/jwt-decode/lib/atob.js", "../node_modules/jwt-decode/lib/base64_url_decode.js", "../node_modules/jwt-decode/lib/index.js", "../node_modules/mitt/src/index.ts", "../src/types.ts", "../src/utils.ts"],
  "sourcesContent": ["/** @license\r\n * eventsource.js\r\n * Available under MIT License (MIT)\r\n * https://github.com/Yaffle/EventSource/\r\n */\r\n\r\n/*jslint indent: 2, vars: true, plusplus: true */\r\n/*global setTimeout, clearTimeout */\r\n\r\n(function (global) {\r\n  \"use strict\";\r\n\r\n  var setTimeout = global.setTimeout;\r\n  var clearTimeout = global.clearTimeout;\r\n  var XMLHttpRequest = global.XMLHttpRequest;\r\n  var XDomainRequest = global.XDomainRequest;\r\n  var ActiveXObject = global.ActiveXObject;\r\n  var NativeEventSource = global.EventSource;\r\n\r\n  var document = global.document;\r\n  var Promise = global.Promise;\r\n  var fetch = global.fetch;\r\n  var Response = global.Response;\r\n  var TextDecoder = global.TextDecoder;\r\n  var TextEncoder = global.TextEncoder;\r\n  var AbortController = global.AbortController;\r\n\r\n  if (typeof window !== \"undefined\" && !(\"readyState\" in document) && document.body == null) { // Firefox 2\r\n    document.readyState = \"loading\";\r\n    window.addEventListener(\"load\", function (event) {\r\n      document.readyState = \"complete\";\r\n    }, false);\r\n  }\r\n\r\n  if (XMLHttpRequest == null && ActiveXObject != null) { // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest_in_IE6\r\n    XMLHttpRequest = function () {\r\n      return new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n    };\r\n  }\r\n\r\n  if (Object.create == undefined) {\r\n    Object.create = function (C) {\r\n      function F(){}\r\n      F.prototype = C;\r\n      return new F();\r\n    };\r\n  }\r\n\r\n  if (!Date.now) {\r\n    Date.now = function now() {\r\n      return new Date().getTime();\r\n    };\r\n  }\r\n\r\n  // see #118 (Promise#finally with polyfilled Promise)\r\n  // see #123 (data URLs crash Edge)\r\n  // see #125 (CSP violations)\r\n  // see pull/#138\r\n  // => No way to polyfill Promise#finally\r\n\r\n  if (AbortController == undefined) {\r\n    var originalFetch2 = fetch;\r\n    fetch = function (url, options) {\r\n      var signal = options.signal;\r\n      return originalFetch2(url, {headers: options.headers, credentials: options.credentials, cache: options.cache}).then(function (response) {\r\n        var reader = response.body.getReader();\r\n        signal._reader = reader;\r\n        if (signal._aborted) {\r\n          signal._reader.cancel();\r\n        }\r\n        return {\r\n          status: response.status,\r\n          statusText: response.statusText,\r\n          headers: response.headers,\r\n          body: {\r\n            getReader: function () {\r\n              return reader;\r\n            }\r\n          }\r\n        };\r\n      });\r\n    };\r\n    AbortController = function () {\r\n      this.signal = {\r\n        _reader: null,\r\n        _aborted: false\r\n      };\r\n      this.abort = function () {\r\n        if (this.signal._reader != null) {\r\n          this.signal._reader.cancel();\r\n        }\r\n        this.signal._aborted = true;\r\n      };\r\n    };\r\n  }\r\n\r\n  function TextDecoderPolyfill() {\r\n    this.bitsNeeded = 0;\r\n    this.codePoint = 0;\r\n  }\r\n\r\n  TextDecoderPolyfill.prototype.decode = function (octets) {\r\n    function valid(codePoint, shift, octetsCount) {\r\n      if (octetsCount === 1) {\r\n        return codePoint >= 0x0080 >> shift && codePoint << shift <= 0x07FF;\r\n      }\r\n      if (octetsCount === 2) {\r\n        return codePoint >= 0x0800 >> shift && codePoint << shift <= 0xD7FF || codePoint >= 0xE000 >> shift && codePoint << shift <= 0xFFFF;\r\n      }\r\n      if (octetsCount === 3) {\r\n        return codePoint >= 0x010000 >> shift && codePoint << shift <= 0x10FFFF;\r\n      }\r\n      throw new Error();\r\n    }\r\n    function octetsCount(bitsNeeded, codePoint) {\r\n      if (bitsNeeded === 6 * 1) {\r\n        return codePoint >> 6 > 15 ? 3 : codePoint > 31 ? 2 : 1;\r\n      }\r\n      if (bitsNeeded === 6 * 2) {\r\n        return codePoint > 15 ? 3 : 2;\r\n      }\r\n      if (bitsNeeded === 6 * 3) {\r\n        return 3;\r\n      }\r\n      throw new Error();\r\n    }\r\n    var REPLACER = 0xFFFD;\r\n    var string = \"\";\r\n    var bitsNeeded = this.bitsNeeded;\r\n    var codePoint = this.codePoint;\r\n    for (var i = 0; i < octets.length; i += 1) {\r\n      var octet = octets[i];\r\n      if (bitsNeeded !== 0) {\r\n        if (octet < 128 || octet > 191 || !valid(codePoint << 6 | octet & 63, bitsNeeded - 6, octetsCount(bitsNeeded, codePoint))) {\r\n          bitsNeeded = 0;\r\n          codePoint = REPLACER;\r\n          string += String.fromCharCode(codePoint);\r\n        }\r\n      }\r\n      if (bitsNeeded === 0) {\r\n        if (octet >= 0 && octet <= 127) {\r\n          bitsNeeded = 0;\r\n          codePoint = octet;\r\n        } else if (octet >= 192 && octet <= 223) {\r\n          bitsNeeded = 6 * 1;\r\n          codePoint = octet & 31;\r\n        } else if (octet >= 224 && octet <= 239) {\r\n          bitsNeeded = 6 * 2;\r\n          codePoint = octet & 15;\r\n        } else if (octet >= 240 && octet <= 247) {\r\n          bitsNeeded = 6 * 3;\r\n          codePoint = octet & 7;\r\n        } else {\r\n          bitsNeeded = 0;\r\n          codePoint = REPLACER;\r\n        }\r\n        if (bitsNeeded !== 0 && !valid(codePoint, bitsNeeded, octetsCount(bitsNeeded, codePoint))) {\r\n          bitsNeeded = 0;\r\n          codePoint = REPLACER;\r\n        }\r\n      } else {\r\n        bitsNeeded -= 6;\r\n        codePoint = codePoint << 6 | octet & 63;\r\n      }\r\n      if (bitsNeeded === 0) {\r\n        if (codePoint <= 0xFFFF) {\r\n          string += String.fromCharCode(codePoint);\r\n        } else {\r\n          string += String.fromCharCode(0xD800 + (codePoint - 0xFFFF - 1 >> 10));\r\n          string += String.fromCharCode(0xDC00 + (codePoint - 0xFFFF - 1 & 0x3FF));\r\n        }\r\n      }\r\n    }\r\n    this.bitsNeeded = bitsNeeded;\r\n    this.codePoint = codePoint;\r\n    return string;\r\n  };\r\n\r\n  // Firefox < 38 throws an error with stream option\r\n  var supportsStreamOption = function () {\r\n    try {\r\n      return new TextDecoder().decode(new TextEncoder().encode(\"test\"), {stream: true}) === \"test\";\r\n    } catch (error) {\r\n      console.debug(\"TextDecoder does not support streaming option. Using polyfill instead: \" + error);\r\n    }\r\n    return false;\r\n  };\r\n\r\n  // IE, Edge\r\n  if (TextDecoder == undefined || TextEncoder == undefined || !supportsStreamOption()) {\r\n    TextDecoder = TextDecoderPolyfill;\r\n  }\r\n\r\n  var k = function () {\r\n  };\r\n\r\n  function XHRWrapper(xhr) {\r\n    this.withCredentials = false;\r\n    this.readyState = 0;\r\n    this.status = 0;\r\n    this.statusText = \"\";\r\n    this.responseText = \"\";\r\n    this.onprogress = k;\r\n    this.onload = k;\r\n    this.onerror = k;\r\n    this.onreadystatechange = k;\r\n    this._contentType = \"\";\r\n    this._xhr = xhr;\r\n    this._sendTimeout = 0;\r\n    this._abort = k;\r\n  }\r\n\r\n  XHRWrapper.prototype.open = function (method, url) {\r\n    this._abort(true);\r\n\r\n    var that = this;\r\n    var xhr = this._xhr;\r\n    var state = 1;\r\n    var timeout = 0;\r\n\r\n    this._abort = function (silent) {\r\n      if (that._sendTimeout !== 0) {\r\n        clearTimeout(that._sendTimeout);\r\n        that._sendTimeout = 0;\r\n      }\r\n      if (state === 1 || state === 2 || state === 3) {\r\n        state = 4;\r\n        xhr.onload = k;\r\n        xhr.onerror = k;\r\n        xhr.onabort = k;\r\n        xhr.onprogress = k;\r\n        xhr.onreadystatechange = k;\r\n        // IE 8 - 9: XDomainRequest#abort() does not fire any event\r\n        // Opera < 10: XMLHttpRequest#abort() does not fire any event\r\n        xhr.abort();\r\n        if (timeout !== 0) {\r\n          clearTimeout(timeout);\r\n          timeout = 0;\r\n        }\r\n        if (!silent) {\r\n          that.readyState = 4;\r\n          that.onabort(null);\r\n          that.onreadystatechange();\r\n        }\r\n      }\r\n      state = 0;\r\n    };\r\n\r\n    var onStart = function () {\r\n      if (state === 1) {\r\n        //state = 2;\r\n        var status = 0;\r\n        var statusText = \"\";\r\n        var contentType = undefined;\r\n        if (!(\"contentType\" in xhr)) {\r\n          try {\r\n            status = xhr.status;\r\n            statusText = xhr.statusText;\r\n            contentType = xhr.getResponseHeader(\"Content-Type\");\r\n          } catch (error) {\r\n            // IE < 10 throws exception for `xhr.status` when xhr.readyState === 2 || xhr.readyState === 3\r\n            // Opera < 11 throws exception for `xhr.status` when xhr.readyState === 2\r\n            // https://bugs.webkit.org/show_bug.cgi?id=29121\r\n            status = 0;\r\n            statusText = \"\";\r\n            contentType = undefined;\r\n            // Firefox < 14, Chrome ?, Safari ?\r\n            // https://bugs.webkit.org/show_bug.cgi?id=29658\r\n            // https://bugs.webkit.org/show_bug.cgi?id=77854\r\n          }\r\n        } else {\r\n          status = 200;\r\n          statusText = \"OK\";\r\n          contentType = xhr.contentType;\r\n        }\r\n        if (status !== 0) {\r\n          state = 2;\r\n          that.readyState = 2;\r\n          that.status = status;\r\n          that.statusText = statusText;\r\n          that._contentType = contentType;\r\n          that.onreadystatechange();\r\n        }\r\n      }\r\n    };\r\n    var onProgress = function () {\r\n      onStart();\r\n      if (state === 2 || state === 3) {\r\n        state = 3;\r\n        var responseText = \"\";\r\n        try {\r\n          responseText = xhr.responseText;\r\n        } catch (error) {\r\n          // IE 8 - 9 with XMLHttpRequest\r\n        }\r\n        that.readyState = 3;\r\n        that.responseText = responseText;\r\n        that.onprogress();\r\n      }\r\n    };\r\n    var onFinish = function (type, event) {\r\n      if (event == null || event.preventDefault == null) {\r\n        event = {\r\n          preventDefault: k\r\n        };\r\n      }\r\n      // Firefox 52 fires \"readystatechange\" (xhr.readyState === 4) without final \"readystatechange\" (xhr.readyState === 3)\r\n      // IE 8 fires \"onload\" without \"onprogress\"\r\n      onProgress();\r\n      if (state === 1 || state === 2 || state === 3) {\r\n        state = 4;\r\n        if (timeout !== 0) {\r\n          clearTimeout(timeout);\r\n          timeout = 0;\r\n        }\r\n        that.readyState = 4;\r\n        if (type === \"load\") {\r\n          that.onload(event);\r\n        } else if (type === \"error\") {\r\n          that.onerror(event);\r\n        } else if (type === \"abort\") {\r\n          that.onabort(event);\r\n        } else {\r\n          throw new TypeError();\r\n        }\r\n        that.onreadystatechange();\r\n      }\r\n    };\r\n    var onReadyStateChange = function (event) {\r\n      if (xhr != undefined) { // Opera 12\r\n        if (xhr.readyState === 4) {\r\n          if (!(\"onload\" in xhr) || !(\"onerror\" in xhr) || !(\"onabort\" in xhr)) {\r\n            onFinish(xhr.responseText === \"\" ? \"error\" : \"load\", event);\r\n          }\r\n        } else if (xhr.readyState === 3) {\r\n          if (!(\"onprogress\" in xhr)) { // testing XMLHttpRequest#responseText too many times is too slow in IE 11\r\n            // and in Firefox 3.6\r\n            onProgress();\r\n          }\r\n        } else if (xhr.readyState === 2) {\r\n          onStart();\r\n        }\r\n      }\r\n    };\r\n    var onTimeout = function () {\r\n      timeout = setTimeout(function () {\r\n        onTimeout();\r\n      }, 500);\r\n      if (xhr.readyState === 3) {\r\n        onProgress();\r\n      }\r\n    };\r\n\r\n    // XDomainRequest#abort removes onprogress, onerror, onload\r\n    if (\"onload\" in xhr) {\r\n      xhr.onload = function (event) {\r\n        onFinish(\"load\", event);\r\n      };\r\n    }\r\n    if (\"onerror\" in xhr) {\r\n      xhr.onerror = function (event) {\r\n        onFinish(\"error\", event);\r\n      };\r\n    }\r\n    // improper fix to match Firefox behaviour, but it is better than just ignore abort\r\n    // see https://bugzilla.mozilla.org/show_bug.cgi?id=768596\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=880200\r\n    // https://code.google.com/p/chromium/issues/detail?id=153570\r\n    // IE 8 fires \"onload\" without \"onprogress\r\n    if (\"onabort\" in xhr) {\r\n      xhr.onabort = function (event) {\r\n        onFinish(\"abort\", event);\r\n      };\r\n    }\r\n\r\n    if (\"onprogress\" in xhr) {\r\n      xhr.onprogress = onProgress;\r\n    }\r\n\r\n    // IE 8 - 9 (XMLHTTPRequest)\r\n    // Opera < 12\r\n    // Firefox < 3.5\r\n    // Firefox 3.5 - 3.6 - ? < 9.0\r\n    // onprogress is not fired sometimes or delayed\r\n    // see also #64 (significant lag in IE 11)\r\n    if (\"onreadystatechange\" in xhr) {\r\n      xhr.onreadystatechange = function (event) {\r\n        onReadyStateChange(event);\r\n      };\r\n    }\r\n\r\n    if (\"contentType\" in xhr || !(\"ontimeout\" in XMLHttpRequest.prototype)) {\r\n      url += (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + \"padding=true\";\r\n    }\r\n    xhr.open(method, url, true);\r\n\r\n    if (\"readyState\" in xhr) {\r\n      // workaround for Opera 12 issue with \"progress\" events\r\n      // #91 (XMLHttpRequest onprogress not fired for streaming response in Edge 14-15-?)\r\n      timeout = setTimeout(function () {\r\n        onTimeout();\r\n      }, 0);\r\n    }\r\n  };\r\n  XHRWrapper.prototype.abort = function () {\r\n    this._abort(false);\r\n  };\r\n  XHRWrapper.prototype.getResponseHeader = function (name) {\r\n    return this._contentType;\r\n  };\r\n  XHRWrapper.prototype.setRequestHeader = function (name, value) {\r\n    var xhr = this._xhr;\r\n    if (\"setRequestHeader\" in xhr) {\r\n      xhr.setRequestHeader(name, value);\r\n    }\r\n  };\r\n  XHRWrapper.prototype.getAllResponseHeaders = function () {\r\n    // XMLHttpRequest#getAllResponseHeaders returns null for CORS requests in Firefox 3.6.28\r\n    return this._xhr.getAllResponseHeaders != undefined ? this._xhr.getAllResponseHeaders() || \"\" : \"\";\r\n  };\r\n  XHRWrapper.prototype.send = function () {\r\n    // loading indicator in Safari < ? (6), Chrome < 14, Firefox\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=736723\r\n    if ((!(\"ontimeout\" in XMLHttpRequest.prototype) || (!(\"sendAsBinary\" in XMLHttpRequest.prototype) && !(\"mozAnon\" in XMLHttpRequest.prototype))) &&\r\n        document != undefined &&\r\n        document.readyState != undefined &&\r\n        document.readyState !== \"complete\") {\r\n      var that = this;\r\n      that._sendTimeout = setTimeout(function () {\r\n        that._sendTimeout = 0;\r\n        that.send();\r\n      }, 4);\r\n      return;\r\n    }\r\n\r\n    var xhr = this._xhr;\r\n    // withCredentials should be set after \"open\" for Safari and Chrome (< 19 ?)\r\n    if (\"withCredentials\" in xhr) {\r\n      xhr.withCredentials = this.withCredentials;\r\n    }\r\n    try {\r\n      // xhr.send(); throws \"Not enough arguments\" in Firefox 3.0\r\n      xhr.send(undefined);\r\n    } catch (error1) {\r\n      // Safari 5.1.7, Opera 12\r\n      throw error1;\r\n    }\r\n  };\r\n\r\n  function toLowerCase(name) {\r\n    return name.replace(/[A-Z]/g, function (c) {\r\n      return String.fromCharCode(c.charCodeAt(0) + 0x20);\r\n    });\r\n  }\r\n\r\n  function HeadersPolyfill(all) {\r\n    // Get headers: implemented according to mozilla's example code: https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\r\n    var map = Object.create(null);\r\n    var array = all.split(\"\\r\\n\");\r\n    for (var i = 0; i < array.length; i += 1) {\r\n      var line = array[i];\r\n      var parts = line.split(\": \");\r\n      var name = parts.shift();\r\n      var value = parts.join(\": \");\r\n      map[toLowerCase(name)] = value;\r\n    }\r\n    this._map = map;\r\n  }\r\n  HeadersPolyfill.prototype.get = function (name) {\r\n    return this._map[toLowerCase(name)];\r\n  };\r\n\r\n  if (XMLHttpRequest != null && XMLHttpRequest.HEADERS_RECEIVED == null) { // IE < 9, Firefox 3.6\r\n    XMLHttpRequest.HEADERS_RECEIVED = 2;\r\n  }\r\n\r\n  function XHRTransport() {\r\n  }\r\n\r\n  XHRTransport.prototype.open = function (xhr, onStartCallback, onProgressCallback, onFinishCallback, url, withCredentials, headers) {\r\n    xhr.open(\"GET\", url);\r\n    var offset = 0;\r\n    xhr.onprogress = function () {\r\n      var responseText = xhr.responseText;\r\n      var chunk = responseText.slice(offset);\r\n      offset += chunk.length;\r\n      onProgressCallback(chunk);\r\n    };\r\n    xhr.onerror = function (event) {\r\n      event.preventDefault();\r\n      onFinishCallback(new Error(\"NetworkError\"));\r\n    };\r\n    xhr.onload = function () {\r\n      onFinishCallback(null);\r\n    };\r\n    xhr.onabort = function () {\r\n      onFinishCallback(null);\r\n    };\r\n    xhr.onreadystatechange = function () {\r\n      if (xhr.readyState === XMLHttpRequest.HEADERS_RECEIVED) {\r\n        var status = xhr.status;\r\n        var statusText = xhr.statusText;\r\n        var contentType = xhr.getResponseHeader(\"Content-Type\");\r\n        var headers = xhr.getAllResponseHeaders();\r\n        onStartCallback(status, statusText, contentType, new HeadersPolyfill(headers));\r\n      }\r\n    };\r\n    xhr.withCredentials = withCredentials;\r\n    for (var name in headers) {\r\n      if (Object.prototype.hasOwnProperty.call(headers, name)) {\r\n        xhr.setRequestHeader(name, headers[name]);\r\n      }\r\n    }\r\n    xhr.send();\r\n    return xhr;\r\n  };\r\n\r\n  function HeadersWrapper(headers) {\r\n    this._headers = headers;\r\n  }\r\n  HeadersWrapper.prototype.get = function (name) {\r\n    return this._headers.get(name);\r\n  };\r\n\r\n  function FetchTransport() {\r\n  }\r\n\r\n  FetchTransport.prototype.open = function (xhr, onStartCallback, onProgressCallback, onFinishCallback, url, withCredentials, headers) {\r\n    var reader = null;\r\n    var controller = new AbortController();\r\n    var signal = controller.signal;\r\n    var textDecoder = new TextDecoder();\r\n    fetch(url, {\r\n      headers: headers,\r\n      credentials: withCredentials ? \"include\" : \"same-origin\",\r\n      signal: signal,\r\n      cache: \"no-store\"\r\n    }).then(function (response) {\r\n      reader = response.body.getReader();\r\n      onStartCallback(response.status, response.statusText, response.headers.get(\"Content-Type\"), new HeadersWrapper(response.headers));\r\n      // see https://github.com/promises-aplus/promises-spec/issues/179\r\n      return new Promise(function (resolve, reject) {\r\n        var readNextChunk = function () {\r\n          reader.read().then(function (result) {\r\n            if (result.done) {\r\n              //Note: bytes in textDecoder are ignored\r\n              resolve(undefined);\r\n            } else {\r\n              var chunk = textDecoder.decode(result.value, {stream: true});\r\n              onProgressCallback(chunk);\r\n              readNextChunk();\r\n            }\r\n          })[\"catch\"](function (error) {\r\n            reject(error);\r\n          });\r\n        };\r\n        readNextChunk();\r\n      });\r\n    })[\"catch\"](function (error) {\r\n      if (error.name === \"AbortError\") {\r\n        return undefined;\r\n      } else {\r\n        return error;\r\n      }\r\n    }).then(function (error) {\r\n      onFinishCallback(error);\r\n    });\r\n    return {\r\n      abort: function () {\r\n        if (reader != null) {\r\n          reader.cancel(); // https://bugzilla.mozilla.org/show_bug.cgi?id=1583815\r\n        }\r\n        controller.abort();\r\n      }\r\n    };\r\n  };\r\n\r\n  function EventTarget() {\r\n    this._listeners = Object.create(null);\r\n  }\r\n\r\n  function throwError(e) {\r\n    setTimeout(function () {\r\n      throw e;\r\n    }, 0);\r\n  }\r\n\r\n  EventTarget.prototype.dispatchEvent = function (event) {\r\n    event.target = this;\r\n    var typeListeners = this._listeners[event.type];\r\n    if (typeListeners != undefined) {\r\n      var length = typeListeners.length;\r\n      for (var i = 0; i < length; i += 1) {\r\n        var listener = typeListeners[i];\r\n        try {\r\n          if (typeof listener.handleEvent === \"function\") {\r\n            listener.handleEvent(event);\r\n          } else {\r\n            listener.call(this, event);\r\n          }\r\n        } catch (e) {\r\n          throwError(e);\r\n        }\r\n      }\r\n    }\r\n  };\r\n  EventTarget.prototype.addEventListener = function (type, listener) {\r\n    type = String(type);\r\n    var listeners = this._listeners;\r\n    var typeListeners = listeners[type];\r\n    if (typeListeners == undefined) {\r\n      typeListeners = [];\r\n      listeners[type] = typeListeners;\r\n    }\r\n    var found = false;\r\n    for (var i = 0; i < typeListeners.length; i += 1) {\r\n      if (typeListeners[i] === listener) {\r\n        found = true;\r\n      }\r\n    }\r\n    if (!found) {\r\n      typeListeners.push(listener);\r\n    }\r\n  };\r\n  EventTarget.prototype.removeEventListener = function (type, listener) {\r\n    type = String(type);\r\n    var listeners = this._listeners;\r\n    var typeListeners = listeners[type];\r\n    if (typeListeners != undefined) {\r\n      var filtered = [];\r\n      for (var i = 0; i < typeListeners.length; i += 1) {\r\n        if (typeListeners[i] !== listener) {\r\n          filtered.push(typeListeners[i]);\r\n        }\r\n      }\r\n      if (filtered.length === 0) {\r\n        delete listeners[type];\r\n      } else {\r\n        listeners[type] = filtered;\r\n      }\r\n    }\r\n  };\r\n\r\n  function Event(type) {\r\n    this.type = type;\r\n    this.target = undefined;\r\n  }\r\n\r\n  function MessageEvent(type, options) {\r\n    Event.call(this, type);\r\n    this.data = options.data;\r\n    this.lastEventId = options.lastEventId;\r\n  }\r\n\r\n  MessageEvent.prototype = Object.create(Event.prototype);\r\n\r\n  function ConnectionEvent(type, options) {\r\n    Event.call(this, type);\r\n    this.status = options.status;\r\n    this.statusText = options.statusText;\r\n    this.headers = options.headers;\r\n  }\r\n\r\n  ConnectionEvent.prototype = Object.create(Event.prototype);\r\n\r\n  function ErrorEvent(type, options) {\r\n    Event.call(this, type);\r\n    this.error = options.error;\r\n  }\r\n\r\n  ErrorEvent.prototype = Object.create(Event.prototype);\r\n\r\n  var WAITING = -1;\r\n  var CONNECTING = 0;\r\n  var OPEN = 1;\r\n  var CLOSED = 2;\r\n\r\n  var AFTER_CR = -1;\r\n  var FIELD_START = 0;\r\n  var FIELD = 1;\r\n  var VALUE_START = 2;\r\n  var VALUE = 3;\r\n\r\n  var contentTypeRegExp = /^text\\/event\\-stream(;.*)?$/i;\r\n\r\n  var MINIMUM_DURATION = 1000;\r\n  var MAXIMUM_DURATION = 18000000;\r\n\r\n  var parseDuration = function (value, def) {\r\n    var n = value == null ? def : parseInt(value, 10);\r\n    if (n !== n) {\r\n      n = def;\r\n    }\r\n    return clampDuration(n);\r\n  };\r\n  var clampDuration = function (n) {\r\n    return Math.min(Math.max(n, MINIMUM_DURATION), MAXIMUM_DURATION);\r\n  };\r\n\r\n  var fire = function (that, f, event) {\r\n    try {\r\n      if (typeof f === \"function\") {\r\n        f.call(that, event);\r\n      }\r\n    } catch (e) {\r\n      throwError(e);\r\n    }\r\n  };\r\n\r\n  function EventSourcePolyfill(url, options) {\r\n    EventTarget.call(this);\r\n    options = options || {};\r\n\r\n    this.onopen = undefined;\r\n    this.onmessage = undefined;\r\n    this.onerror = undefined;\r\n\r\n    this.url = undefined;\r\n    this.readyState = undefined;\r\n    this.withCredentials = undefined;\r\n    this.headers = undefined;\r\n\r\n    this._close = undefined;\r\n\r\n    start(this, url, options);\r\n  }\r\n\r\n  function getBestXHRTransport() {\r\n    return (XMLHttpRequest != undefined && (\"withCredentials\" in XMLHttpRequest.prototype)) || XDomainRequest == undefined\r\n        ? new XMLHttpRequest()\r\n        : new XDomainRequest();\r\n  }\r\n\r\n  var isFetchSupported = fetch != undefined && Response != undefined && \"body\" in Response.prototype;\r\n\r\n  function start(es, url, options) {\r\n    url = String(url);\r\n    var withCredentials = Boolean(options.withCredentials);\r\n    var lastEventIdQueryParameterName = options.lastEventIdQueryParameterName || \"lastEventId\";\r\n\r\n    var initialRetry = clampDuration(1000);\r\n    var heartbeatTimeout = parseDuration(options.heartbeatTimeout, 45000);\r\n\r\n    var lastEventId = \"\";\r\n    var retry = initialRetry;\r\n    var wasActivity = false;\r\n    var textLength = 0;\r\n    var headers = options.headers || {};\r\n    var TransportOption = options.Transport;\r\n    var xhr = isFetchSupported && TransportOption == undefined ? undefined : new XHRWrapper(TransportOption != undefined ? new TransportOption() : getBestXHRTransport());\r\n    var transport = TransportOption != null && typeof TransportOption !== \"string\" ? new TransportOption() : (xhr == undefined ? new FetchTransport() : new XHRTransport());\r\n    var abortController = undefined;\r\n    var timeout = 0;\r\n    var currentState = WAITING;\r\n    var dataBuffer = \"\";\r\n    var lastEventIdBuffer = \"\";\r\n    var eventTypeBuffer = \"\";\r\n\r\n    var textBuffer = \"\";\r\n    var state = FIELD_START;\r\n    var fieldStart = 0;\r\n    var valueStart = 0;\r\n\r\n    var onStart = function (status, statusText, contentType, headers) {\r\n      if (currentState === CONNECTING) {\r\n        if (status === 200 && contentType != undefined && contentTypeRegExp.test(contentType)) {\r\n          currentState = OPEN;\r\n          wasActivity = Date.now();\r\n          retry = initialRetry;\r\n          es.readyState = OPEN;\r\n          var event = new ConnectionEvent(\"open\", {\r\n            status: status,\r\n            statusText: statusText,\r\n            headers: headers\r\n          });\r\n          es.dispatchEvent(event);\r\n          fire(es, es.onopen, event);\r\n        } else {\r\n          var message = \"\";\r\n          if (status !== 200) {\r\n            if (statusText) {\r\n              statusText = statusText.replace(/\\s+/g, \" \");\r\n            }\r\n            message = \"EventSource's response has a status \" + status + \" \" + statusText + \" that is not 200. Aborting the connection.\";\r\n          } else {\r\n            message = \"EventSource's response has a Content-Type specifying an unsupported type: \" + (contentType == undefined ? \"-\" : contentType.replace(/\\s+/g, \" \")) + \". Aborting the connection.\";\r\n          }\r\n          close();\r\n          var event = new ConnectionEvent(\"error\", {\r\n            status: status,\r\n            statusText: statusText,\r\n            headers: headers\r\n          });\r\n          es.dispatchEvent(event);\r\n          fire(es, es.onerror, event);\r\n          console.error(message);\r\n        }\r\n      }\r\n    };\r\n\r\n    var onProgress = function (textChunk) {\r\n      if (currentState === OPEN) {\r\n        var n = -1;\r\n        for (var i = 0; i < textChunk.length; i += 1) {\r\n          var c = textChunk.charCodeAt(i);\r\n          if (c === \"\\n\".charCodeAt(0) || c === \"\\r\".charCodeAt(0)) {\r\n            n = i;\r\n          }\r\n        }\r\n        var chunk = (n !== -1 ? textBuffer : \"\") + textChunk.slice(0, n + 1);\r\n        textBuffer = (n === -1 ? textBuffer : \"\") + textChunk.slice(n + 1);\r\n        if (textChunk !== \"\") {\r\n          wasActivity = Date.now();\r\n          textLength += textChunk.length;\r\n        }\r\n        for (var position = 0; position < chunk.length; position += 1) {\r\n          var c = chunk.charCodeAt(position);\r\n          if (state === AFTER_CR && c === \"\\n\".charCodeAt(0)) {\r\n            state = FIELD_START;\r\n          } else {\r\n            if (state === AFTER_CR) {\r\n              state = FIELD_START;\r\n            }\r\n            if (c === \"\\r\".charCodeAt(0) || c === \"\\n\".charCodeAt(0)) {\r\n              if (state !== FIELD_START) {\r\n                if (state === FIELD) {\r\n                  valueStart = position + 1;\r\n                }\r\n                var field = chunk.slice(fieldStart, valueStart - 1);\r\n                var value = chunk.slice(valueStart + (valueStart < position && chunk.charCodeAt(valueStart) === \" \".charCodeAt(0) ? 1 : 0), position);\r\n                if (field === \"data\") {\r\n                  dataBuffer += \"\\n\";\r\n                  dataBuffer += value;\r\n                } else if (field === \"id\") {\r\n                  lastEventIdBuffer = value;\r\n                } else if (field === \"event\") {\r\n                  eventTypeBuffer = value;\r\n                } else if (field === \"retry\") {\r\n                  initialRetry = parseDuration(value, initialRetry);\r\n                  retry = initialRetry;\r\n                } else if (field === \"heartbeatTimeout\") {\r\n                  heartbeatTimeout = parseDuration(value, heartbeatTimeout);\r\n                  if (timeout !== 0) {\r\n                    clearTimeout(timeout);\r\n                    timeout = setTimeout(function () {\r\n                      onTimeout();\r\n                    }, heartbeatTimeout);\r\n                  }\r\n                }\r\n              }\r\n              if (state === FIELD_START) {\r\n                if (dataBuffer !== \"\") {\r\n                  lastEventId = lastEventIdBuffer;\r\n                  if (eventTypeBuffer === \"\") {\r\n                    eventTypeBuffer = \"message\";\r\n                  }\r\n                  var event = new MessageEvent(eventTypeBuffer, {\r\n                    data: dataBuffer.slice(1),\r\n                    lastEventId: lastEventIdBuffer\r\n                  });\r\n                  es.dispatchEvent(event);\r\n                  if (eventTypeBuffer === \"open\") {\r\n                    fire(es, es.onopen, event);\r\n                  } else if (eventTypeBuffer === \"message\") {\r\n                    fire(es, es.onmessage, event);\r\n                  } else if (eventTypeBuffer === \"error\") {\r\n                    fire(es, es.onerror, event);\r\n                  }\r\n                  if (currentState === CLOSED) {\r\n                    return;\r\n                  }\r\n                }\r\n                dataBuffer = \"\";\r\n                eventTypeBuffer = \"\";\r\n              }\r\n              state = c === \"\\r\".charCodeAt(0) ? AFTER_CR : FIELD_START;\r\n            } else {\r\n              if (state === FIELD_START) {\r\n                fieldStart = position;\r\n                state = FIELD;\r\n              }\r\n              if (state === FIELD) {\r\n                if (c === \":\".charCodeAt(0)) {\r\n                  valueStart = position + 1;\r\n                  state = VALUE_START;\r\n                }\r\n              } else if (state === VALUE_START) {\r\n                state = VALUE;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    var onFinish = function (error) {\r\n      if (currentState === OPEN || currentState === CONNECTING) {\r\n        currentState = WAITING;\r\n        if (timeout !== 0) {\r\n          clearTimeout(timeout);\r\n          timeout = 0;\r\n        }\r\n        timeout = setTimeout(function () {\r\n          onTimeout();\r\n        }, retry);\r\n        retry = clampDuration(Math.min(initialRetry * 16, retry * 2));\r\n\r\n        es.readyState = CONNECTING;\r\n        var event = new ErrorEvent(\"error\", {error: error});\r\n        es.dispatchEvent(event);\r\n        fire(es, es.onerror, event);\r\n        if (error != undefined) {\r\n          console.error(error);\r\n        }\r\n      }\r\n    };\r\n\r\n    var close = function () {\r\n      currentState = CLOSED;\r\n      if (abortController != undefined) {\r\n        abortController.abort();\r\n        abortController = undefined;\r\n      }\r\n      if (timeout !== 0) {\r\n        clearTimeout(timeout);\r\n        timeout = 0;\r\n      }\r\n      es.readyState = CLOSED;\r\n    };\r\n\r\n    var onTimeout = function () {\r\n      timeout = 0;\r\n\r\n      if (currentState !== WAITING) {\r\n        if (!wasActivity && abortController != undefined) {\r\n          onFinish(new Error(\"No activity within \" + heartbeatTimeout + \" milliseconds.\" + \" \" + (currentState === CONNECTING ? \"No response received.\" : textLength + \" chars received.\") + \" \" + \"Reconnecting.\"));\r\n          if (abortController != undefined) {\r\n            abortController.abort();\r\n            abortController = undefined;\r\n          }\r\n        } else {\r\n          var nextHeartbeat = Math.max((wasActivity || Date.now()) + heartbeatTimeout - Date.now(), 1);\r\n          wasActivity = false;\r\n          timeout = setTimeout(function () {\r\n            onTimeout();\r\n          }, nextHeartbeat);\r\n        }\r\n        return;\r\n      }\r\n\r\n      wasActivity = false;\r\n      textLength = 0;\r\n      timeout = setTimeout(function () {\r\n        onTimeout();\r\n      }, heartbeatTimeout);\r\n\r\n      currentState = CONNECTING;\r\n      dataBuffer = \"\";\r\n      eventTypeBuffer = \"\";\r\n      lastEventIdBuffer = lastEventId;\r\n      textBuffer = \"\";\r\n      fieldStart = 0;\r\n      valueStart = 0;\r\n      state = FIELD_START;\r\n\r\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=428916\r\n      // Request header field Last-Event-ID is not allowed by Access-Control-Allow-Headers.\r\n      var requestURL = url;\r\n      if (url.slice(0, 5) !== \"data:\" && url.slice(0, 5) !== \"blob:\") {\r\n        if (lastEventId !== \"\") {\r\n          requestURL += (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + lastEventIdQueryParameterName +\"=\" + encodeURIComponent(lastEventId);\r\n        }\r\n      }\r\n      var withCredentials = es.withCredentials;\r\n      var requestHeaders = {};\r\n      requestHeaders[\"Accept\"] = \"text/event-stream\";\r\n      var headers = es.headers;\r\n      if (headers != undefined) {\r\n        for (var name in headers) {\r\n          if (Object.prototype.hasOwnProperty.call(headers, name)) {\r\n            requestHeaders[name] = headers[name];\r\n          }\r\n        }\r\n      }\r\n      try {\r\n        abortController = transport.open(xhr, onStart, onProgress, onFinish, requestURL, withCredentials, requestHeaders);\r\n      } catch (error) {\r\n        close();\r\n        throw error;\r\n      }\r\n    };\r\n\r\n    es.url = url;\r\n    es.readyState = CONNECTING;\r\n    es.withCredentials = withCredentials;\r\n    es.headers = headers;\r\n    es._close = close;\r\n\r\n    onTimeout();\r\n  }\r\n\r\n  EventSourcePolyfill.prototype = Object.create(EventTarget.prototype);\r\n  EventSourcePolyfill.prototype.CONNECTING = CONNECTING;\r\n  EventSourcePolyfill.prototype.OPEN = OPEN;\r\n  EventSourcePolyfill.prototype.CLOSED = CLOSED;\r\n  EventSourcePolyfill.prototype.close = function () {\r\n    this._close();\r\n  };\r\n\r\n  EventSourcePolyfill.CONNECTING = CONNECTING;\r\n  EventSourcePolyfill.OPEN = OPEN;\r\n  EventSourcePolyfill.CLOSED = CLOSED;\r\n  EventSourcePolyfill.prototype.withCredentials = undefined;\r\n\r\n  var R = NativeEventSource\r\n  if (XMLHttpRequest != undefined && (NativeEventSource == undefined || !(\"withCredentials\" in NativeEventSource.prototype))) {\r\n    // Why replace a native EventSource ?\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=444328\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=831392\r\n    // https://code.google.com/p/chromium/issues/detail?id=260144\r\n    // https://code.google.com/p/chromium/issues/detail?id=225654\r\n    // ...\r\n    R = EventSourcePolyfill;\r\n  }\r\n\r\n  (function (factory) {\r\n    if (typeof module === \"object\" && typeof module.exports === \"object\") {\r\n      var v = factory(exports);\r\n      if (v !== undefined) module.exports = v;\r\n    }\r\n    else if (typeof define === \"function\" && define.amd) {\r\n      define([\"exports\"], factory);\r\n    }\r\n    else {\r\n      factory(global);\r\n    }\r\n  })(function (exports) {\r\n    exports.EventSourcePolyfill = EventSourcePolyfill;\r\n    exports.NativeEventSource = NativeEventSource;\r\n    exports.EventSource = R;\r\n  });\r\n}(typeof globalThis === 'undefined' ? (typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : this) : globalThis));\r\n", "import jwt_decode from 'jwt-decode'\nimport mitt from 'mitt'\nimport { EventSourcePolyfill } from 'event-source-polyfill'\nimport type {\n  Options,\n  Target,\n  StreamEvent,\n  EventCallback,\n  Result,\n  Evaluation,\n  VariationValue,\n  MetricsInfo\n} from './types'\nimport { Event } from './types'\nimport { logError, defaultOptions, METRICS_FLUSH_INTERVAL } from './utils'\n\nconst SDK_VERSION = '1.3.0'\nconst METRICS_VALID_COUNT_INTERVAL = 500\nconst fetch = globalThis.fetch\nconst EventSource = EventSourcePolyfill\n\n// Flag to detect is Proxy is supported (not under IE 11)\nconst hasProxy = !!globalThis.Proxy\n\nconst convertValue = (evaluation: Evaluation) => {\n  let { value } = evaluation\n\n  try {\n    switch (evaluation.kind.toLowerCase()) {\n      case 'int':\n      case 'number':\n        value = Number(value)\n        break\n      case 'boolean':\n        value = value.toString().toLowerCase() === 'true'\n        break\n      case 'json':\n        value = JSON.parse(value as string)\n        break\n    }\n  } catch (error) {\n    logError(error)\n  }\n\n  return value\n}\n\nconst initialize = (apiKey: string, target: Target, options: Options): Result => {\n  let environment: string\n  let eventSource: any\n  let jwtToken: string\n  let metricsSchedulerId: number\n  let metricsCollectorEnabled = true\n  const stopMetricsCollector = () => {\n    metricsCollectorEnabled = false\n  }\n  const startMetricsCollector = () => {\n    metricsCollectorEnabled = true\n  }\n  let metrics: Array<MetricsInfo> = []\n  const eventBus = mitt()\n  const configurations = { ...defaultOptions, ...options }\n  const logDebug = (message: string, ...args: any[]) => {\n    if (configurations.debug) {\n      // tslint:disable-next-line:no-console\n      console.debug(`[FF-SDK] ${message}`, ...args)\n    }\n  }\n  const updateMetrics = (metricsInfo: MetricsInfo) => {\n    if (metricsCollectorEnabled) {\n      const now = Date.now()\n\n      if (now - metricsInfo.lastAccessed > METRICS_VALID_COUNT_INTERVAL) {\n        metricsInfo.count++\n        metricsInfo.lastAccessed = now\n      }\n    }\n  }\n\n  globalThis.onbeforeunload = () => {\n    if (metrics.length && globalThis.localStorage) {\n      stopMetricsCollector()\n      globalThis.localStorage.HARNESS_FF_METRICS = JSON.stringify(metrics)\n      startMetricsCollector()\n    }\n  }\n\n  const authenticate = async (clientID: string, configuration: Options): Promise<string> => {\n    const response = await fetch(`${configuration.baseUrl}/client/auth`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ apiKey: clientID, target })\n    })\n\n    const data: { authToken: string } = await response.json()\n\n    return data.authToken\n  }\n\n  const scheduleSendingMetrics = () => {\n    if (metrics.length) {\n      logDebug('Sending metrics...', { metrics, evaluations })\n      const payload = {\n        metricsData: metrics.map(entry => ({\n          timestamp: Date.now(),\n          count: entry.count,\n          metricsType: 'FFMETRICS',\n          attributes: [\n            {\n              key: 'featureIdentifier',\n              value: entry.featureIdentifier\n            },\n            {\n              key: 'featureName',\n              value: entry.featureIdentifier\n            },\n            {\n              key: 'variationIdentifier',\n              value: entry.variationIdentifier\n            },\n            {\n              key: 'target',\n              value: target.identifier\n            },\n            {\n              key: 'SDK_NAME',\n              value: 'JavaScript'\n            },\n            {\n              key: 'SDK_TYPE',\n              value: 'client'\n            },\n            {\n              key: 'SDK_VERSION',\n              value: SDK_VERSION\n            }\n          ]\n        }))\n      }\n\n      fetch(`${options.eventUrl}/metrics/${environment}`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${jwtToken}` },\n        body: JSON.stringify(payload)\n      })\n        .then(() => {\n          metrics = []\n        })\n        .catch(error => {\n          logError(error)\n        })\n        .finally(() => {\n          metricsSchedulerId = window.setTimeout(scheduleSendingMetrics, METRICS_FLUSH_INTERVAL)\n        })\n    } else {\n      metricsSchedulerId = window.setTimeout(scheduleSendingMetrics, METRICS_FLUSH_INTERVAL)\n    }\n  }\n\n  let evaluations: Record<string, Evaluation> = {}\n\n  const creatStorage = function () {\n    return hasProxy\n      ? new Proxy(\n          {},\n          {\n            get(_storage, property) {\n              const _value = _storage[property]\n\n              if (_storage.hasOwnProperty(property)) {\n                const featureValue = _storage[property]\n                // TODO/BUG: This logic to collect metrics will fail when two variations have the same value\n                // Need to find a better way\n                const entry = metrics.find(\n                  _entry => _entry.featureIdentifier === property && featureValue === _entry.featureValue\n                )\n\n                if (entry) {\n                  entry.variationIdentifier = evaluations[property as string]?.identifier || ''\n                  updateMetrics(entry)\n                } else {\n                  metrics.push({\n                    featureIdentifier: property as string,\n                    featureValue,\n                    variationIdentifier: evaluations[property as string]?.identifier || '',\n                    count: metricsCollectorEnabled ? 1 : 0,\n                    lastAccessed: Date.now()\n                  })\n                }\n                logDebug(\n                  'Metrics event: Flag:',\n                  property,\n                  'has been read with value:',\n                  featureValue,\n                  'variationIdentifier:',\n                  evaluations[property as string]?.identifier\n                )\n              }\n\n              return _value\n            }\n          }\n        )\n      : {}\n  }\n\n  let storage: Record<string, any> = creatStorage()\n\n  authenticate(apiKey, configurations)\n    .then((token: string) => {\n      jwtToken = token\n      const decoded: { environment: string } = jwt_decode(token)\n\n      logDebug('Authenticated', decoded)\n\n      if (globalThis.localStorage && globalThis.localStorage.HARNESS_FF_METRICS) {\n        try {\n          // metrics = JSON.parse(globalThis.localStorage.HARNESS_FF_METRICS)\n          delete globalThis.localStorage.HARNESS_FF_METRICS\n          logDebug('Picking up metrics from previous session')\n        } catch (error) {}\n      }\n\n      metricsSchedulerId = window.setTimeout(scheduleSendingMetrics, METRICS_FLUSH_INTERVAL)\n\n      environment = decoded.environment\n\n      // When authentication is done, fetch all flags\n      fetchFlags()\n        .then(() => {\n          logDebug('Fetch all flags ok', storage)\n        })\n        .then(() => {\n          startStream() // start stream only after we get all evaluations\n        })\n        .then(() => {\n          logDebug('Event stream ready', { storage })\n          eventBus.emit(Event.READY, storage)\n\n          if (!hasProxy) {\n            Object.keys(storage).forEach(key => {\n              metrics.push({\n                featureIdentifier: key,\n                featureValue: storage[key],\n                variationIdentifier: evaluations[key]?.identifier || '',\n                count: metricsCollectorEnabled ? 1 : 0,\n                lastAccessed: Date.now()\n              })\n            })\n          }\n        })\n        .catch(err => {\n          eventBus.emit(Event.ERROR, err)\n        })\n    })\n    .catch(error => {\n      logError('Authentication error: ', error)\n      eventBus.emit(Event.ERROR, error)\n    })\n\n  const fetchFlags = async () => {\n    try {\n      const res = await fetch(\n        `${configurations.baseUrl}/client/env/${environment}/target/${target.identifier}/evaluations`,\n        {\n          headers: {\n            Authorization: `Bearer ${jwtToken}`\n          }\n        }\n      )\n      const data = await res.json()\n\n      data.forEach((_evaluation: Evaluation) => {\n        const _value = convertValue(_evaluation)\n        storage[_evaluation.flag] = _value\n        evaluations[_evaluation.flag] = { ..._evaluation, value: _value }\n      })\n    } catch (error) {\n      logError('Features fetch operation error: ', error)\n      eventBus.emit(Event.ERROR, error)\n      return error\n    }\n  }\n\n  const fetchFlag = async (identifier: string) => {\n    try {\n      const result = await fetch(\n        `${configurations.baseUrl}/client/env/${environment}/target/${target.identifier}/evaluations/${identifier}`,\n        {\n          headers: {\n            Authorization: `Bearer ${jwtToken}`\n          }\n        }\n      )\n\n      if (result.ok) {\n        const flagInfo: Evaluation = await result.json()\n        const _value = convertValue(flagInfo)\n\n        stopMetricsCollector()\n        storage[identifier] = _value\n        evaluations[identifier] = { ...flagInfo, value: _value }\n        startMetricsCollector()\n\n        eventBus.emit(\n          Event.CHANGED,\n          hasProxy\n            ? new Proxy(flagInfo, {\n                get(_flagInfo, property) {\n                  if (_flagInfo.hasOwnProperty(property) && property === 'value') {\n                    // only track metric when value is read\n                    const featureIdentifier = _flagInfo.flag\n                    const featureValue = flagInfo.value\n                    const entry = metrics.find(\n                      _entry => _entry.featureIdentifier === featureIdentifier && _entry.featureValue === featureValue\n                    )\n\n                    if (entry) {\n                      updateMetrics(entry)\n                      entry.variationIdentifier = evaluations[featureIdentifier]?.identifier || ''\n                    } else {\n                      metrics.push({\n                        featureIdentifier,\n                        featureValue: String(featureValue),\n                        variationIdentifier: evaluations[featureIdentifier].identifier || '',\n                        count: metricsCollectorEnabled ? 1 : 0,\n                        lastAccessed: Date.now()\n                      })\n                    }\n                    logDebug(\n                      'Metrics event: Flag',\n                      property,\n                      'has been read with value via stream update',\n                      featureValue\n                    )\n                  }\n\n                  return property === 'value' ? convertValue(flagInfo) : flagInfo[property]\n                }\n              })\n            : {\n                deleted: flagInfo.deleted,\n                flag: flagInfo.flag,\n                value: convertValue(flagInfo)\n              }\n        )\n\n        if (!hasProxy) {\n          const featureIdentifier = flagInfo.flag\n          const entry = metrics.find(\n            _entry => _entry.featureIdentifier === featureIdentifier && _entry.featureValue === flagInfo.value\n          )\n\n          if (entry) {\n            updateMetrics(entry)\n            entry.variationIdentifier = evaluations[featureIdentifier as string]?.identifier || ''\n          } else {\n            metrics.push({\n              featureIdentifier: featureIdentifier as string,\n              featureValue: String(flagInfo.value),\n              variationIdentifier: evaluations[featureIdentifier].identifier || '',\n              count: metricsCollectorEnabled ? 1 : 0,\n              lastAccessed: Date.now()\n            })\n          }\n        }\n      } else {\n        eventBus.emit(Event.ERROR, result)\n      }\n    } catch (error) {\n      logError('Feature fetch operation error: ', error)\n      eventBus.emit(Event.ERROR, error)\n    }\n  }\n\n  const startStream = () => {\n    // TODO: Implement polling when stream is disabled\n    if (!configurations.streamEnabled) {\n      logDebug('Stream is disabled by configuration. Note: Polling is not yet supported')\n      return\n    }\n    eventSource = new EventSource(`${configurations.baseUrl}/stream`, {\n      headers: {\n        Authorization: `Bearer ${jwtToken}`,\n        'API-Key': apiKey\n      }\n    })\n\n    eventSource.onopen = (event: any) => {\n      logDebug('Stream connected', event)\n      eventBus.emit(Event.CONNECTED)\n    }\n\n    eventSource.onclose = (event: any) => {\n      logDebug('Stream disconnected')\n      eventBus.emit(Event.DISCONNECTED)\n    }\n\n    eventSource.onerror = (event: any) => {\n      logError('Stream has issue', event)\n      eventBus.emit('error', event)\n    }\n\n    eventSource.addEventListener('*', (msg: any) => {\n      const event: StreamEvent = JSON.parse(msg.data)\n\n      logDebug('Received event from stream: ', event)\n\n      switch (event.event) {\n        case 'create':\n          setTimeout(() => fetchFlag(event.identifier), 1000) // Wait a bit before fetching evaluation due to https://harness.atlassian.net/browse/FFM-583\n          break\n        case 'patch':\n          fetchFlag(event.identifier)\n          break\n        case 'delete':\n          delete storage[event.identifier]\n          eventBus.emit(Event.CHANGED, { flag: event.identifier, value: undefined, deleted: true })\n          logDebug('Evaluation deleted', { message: event, storage })\n          // TODO: Delete flag from storage\n          break\n      }\n    })\n  }\n\n  const on = (event: Event, callback: EventCallback): void => eventBus.on(event, callback)\n\n  const off = (event?: Event, callback?: EventCallback): void => {\n    if (event) {\n      eventBus.off(event, callback)\n    } else {\n      close()\n    }\n  }\n\n  const variation = (flag: string, defaultValue: any) => {\n    const value = storage[flag]\n\n    if (!hasProxy && value !== undefined) {\n      const featureValue = value\n      const featureIdentifier = flag\n\n      const entry = metrics.find(\n        _entry => _entry.featureIdentifier === featureIdentifier && _entry.featureValue === featureValue\n      )\n\n      if (entry) {\n        updateMetrics(entry)\n        entry.variationIdentifier = evaluations[featureIdentifier as string]?.identifier || ''\n      } else {\n        metrics.push({\n          featureIdentifier: featureIdentifier as string,\n          featureValue,\n          count: metricsCollectorEnabled ? 1 : 0,\n          variationIdentifier: evaluations[featureIdentifier].identifier || '',\n          lastAccessed: Date.now()\n        })\n      }\n    }\n\n    return value !== undefined ? value : defaultValue\n  }\n\n  const close = () => {\n    logDebug('Closing event stream')\n    storage = creatStorage()\n    evaluations = {}\n    clearTimeout(metricsSchedulerId)\n    eventBus.all.clear()\n    eventSource.close()\n  }\n\n  return { on, off, variation, close }\n}\n\nexport { initialize, Options, Target, StreamEvent, Event, EventCallback, Result, Evaluation, VariationValue }\n", "/**\n * The code was extracted from:\n * https://github.com/davidchambers/Base64.js\n */\n\nvar chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\nfunction InvalidCharacterError(message) {\n    this.message = message;\n}\n\nInvalidCharacterError.prototype = new Error();\nInvalidCharacterError.prototype.name = \"InvalidCharacterError\";\n\nfunction polyfill(input) {\n    var str = String(input).replace(/=+$/, \"\");\n    if (str.length % 4 == 1) {\n        throw new InvalidCharacterError(\n            \"'atob' failed: The string to be decoded is not correctly encoded.\"\n        );\n    }\n    for (\n        // initialize result and counters\n        var bc = 0, bs, buffer, idx = 0, output = \"\";\n        // get next character\n        (buffer = str.charAt(idx++));\n        // character found in table? initialize bit storage and add its ascii value;\n        ~buffer &&\n        ((bs = bc % 4 ? bs * 64 + buffer : buffer),\n            // and if not first of each 4 characters,\n            // convert the first 8 bits to one ascii character\n            bc++ % 4) ?\n        (output += String.fromCharCode(255 & (bs >> ((-2 * bc) & 6)))) :\n        0\n    ) {\n        // try to find character in table (0-63, not found => -1)\n        buffer = chars.indexOf(buffer);\n    }\n    return output;\n}\n\nexport default (typeof window !== \"undefined\" &&\n    window.atob &&\n    window.atob.bind(window)) ||\npolyfill;", "import atob from \"./atob\";\n\nfunction b64DecodeUnicode(str) {\n    return decodeURIComponent(\n        atob(str).replace(/(.)/g, function(m, p) {\n            var code = p.charCodeAt(0).toString(16).toUpperCase();\n            if (code.length < 2) {\n                code = \"0\" + code;\n            }\n            return \"%\" + code;\n        })\n    );\n}\n\nexport default function(str) {\n    var output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n        case 0:\n            break;\n        case 2:\n            output += \"==\";\n            break;\n        case 3:\n            output += \"=\";\n            break;\n        default:\n            throw \"Illegal base64url string!\";\n    }\n\n    try {\n        return b64DecodeUnicode(output);\n    } catch (err) {\n        return atob(output);\n    }\n}", "\"use strict\";\n\nimport base64_url_decode from \"./base64_url_decode\";\n\nexport function InvalidTokenError(message) {\n    this.message = message;\n}\n\nInvalidTokenError.prototype = new Error();\nInvalidTokenError.prototype.name = \"InvalidTokenError\";\n\nexport default function(token, options) {\n    if (typeof token !== \"string\") {\n        throw new InvalidTokenError(\"Invalid token specified\");\n    }\n\n    options = options || {};\n    var pos = options.header === true ? 0 : 1;\n    try {\n        return JSON.parse(base64_url_decode(token.split(\".\")[pos]));\n    } catch (e) {\n        throw new InvalidTokenError(\"Invalid token specified: \" + e.message);\n    }\n}", "export type EventType = string | symbol;\n\n// An event handler can take an optional event argument\n// and should not return a value\nexport type Handler<T = any> = (event?: T) => void;\nexport type WildcardHandler = (type: EventType, event?: any) => void;\n\n// An array of all currently registered event handlers for a type\nexport type EventHandlerList = Array<Handler>;\nexport type WildCardEventHandlerList = Array<WildcardHandler>;\n\n// A map of event types and their corresponding event handlers.\nexport type EventHandlerMap = Map<EventType, EventHandlerList | WildCardEventHandlerList>;\n\nexport interface Emitter {\n\tall: EventHandlerMap;\n\n\ton<T = any>(type: EventType, handler: Handler<T>): void;\n\ton(type: '*', handler: WildcardHandler): void;\n\n\toff<T = any>(type: EventType, handler: Handler<T>): void;\n\toff(type: '*', handler: WildcardHandler): void;\n\n\temit<T = any>(type: EventType, event?: T): void;\n\temit(type: '*', event?: any): void;\n}\n\n/**\n * Mitt: Tiny (~200b) functional event emitter / pubsub.\n * @name mitt\n * @returns {Mitt}\n */\nexport default function mitt(all?: EventHandlerMap): Emitter {\n\tall = all || new Map();\n\n\treturn {\n\n\t\t/**\n\t\t * A Map of event names to registered handler functions.\n\t\t */\n\t\tall,\n\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t * @param {string|symbol} type Type of event to listen for, or `\"*\"` for all events\n\t\t * @param {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton<T = any>(type: EventType, handler: Handler<T>) {\n\t\t\tconst handlers = all.get(type);\n\t\t\tconst added = handlers && handlers.push(handler);\n\t\t\tif (!added) {\n\t\t\t\tall.set(type, [handler]);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t * @param {string|symbol} type Type of event to unregister `handler` from, or `\"*\"`\n\t\t * @param {Function} handler Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff<T = any>(type: EventType, handler: Handler<T>) {\n\t\t\tconst handlers = all.get(type);\n\t\t\tif (handlers) {\n\t\t\t\thandlers.splice(handlers.indexOf(handler) >>> 0, 1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `\"*\"` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * Note: Manually firing \"*\" handlers is not supported.\n\t\t *\n\t\t * @param {string|symbol} type The event type to invoke\n\t\t * @param {Any} [evt] Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberOf mitt\n\t\t */\n\t\temit<T = any>(type: EventType, evt: T) {\n\t\t\t((all.get(type) || []) as EventHandlerList).slice().map((handler) => { handler(evt); });\n\t\t\t((all.get('*') || []) as WildCardEventHandlerList).slice().map((handler) => { handler(type, evt); });\n\t\t}\n\t};\n}\n", "export interface Target {\n  identifier: string\n  name?: string\n  anonymous?: boolean\n  attributes?: object\n}\n\nexport interface StreamEvent {\n  event: string\n  domain: string\n  identifier: string\n  version: number\n}\n\nexport enum Event {\n  READY = 'ready',\n  CONNECTED = 'connected',\n  DISCONNECTED = 'disconnected',\n  RECONNECTED = 'reconnected',\n  CHANGED = 'changed',\n  ERROR = 'error'\n}\n\nexport type VariationValue = boolean | string | number | object | undefined\n\nexport interface Evaluation {\n  flag: string          // Feature flag identifier\n  identifier: string    // variation identifier\n  value: VariationValue // variation value\n  kind: string          // boolean | json | string | int\n  deleted?: boolean     // mark that feature flag is deleted\n}\n\nexport type EventCallback = (event?: Evaluation[] | Error) => void\n\nexport interface Result {\n  on: (event: Event, callback: EventCallback) => void\n  off: (event: Event, callback: EventCallback) => void\n  variation: (identifier: string, defaultValue: any) => VariationValue\n  close: () => void\n}\n\nexport interface Options {\n  baseUrl?: string\n  eventUrl?: string\n  streamEnabled?: boolean\n  allAttributesPrivate?: boolean\n  privateAttributeNames?: string[]\n  debug?: boolean\n}\n\nexport interface MetricsInfo {\n  featureIdentifier: string;\n  featureValue: any\n  variationIdentifier: string;\n  count: number\n  lastAccessed: number\n}\n", "import { Options } from './types'\n\nexport const defaultOptions: Options = {\n  debug: false,\n  baseUrl: 'https://config.feature-flags.uat.harness.io/api/1.0',\n  eventUrl: 'https://event.feature-flags.uat.harness.io/api/1.0',\n  streamEnabled: true,\n  allAttributesPrivate: false,\n  privateAttributeNames: []\n}\n\n// tslint:disable-next-line:no-console\nexport const logError = (message: string, ...args: any[]) => console.error(`[FF-SDK] ${message}`, ...args)\n\nexport const METRICS_FLUSH_INTERVAL = 30 * 1000 // Flush metrics every 30 seconds"],
  "mappings": "uqBAAA,oBASA,AAAC,UAAU,EAAQ,CACjB,aAEA,GAAI,GAAa,EAAO,WACpB,EAAe,EAAO,aACtB,EAAiB,EAAO,eACxB,EAAiB,EAAO,eACxB,EAAgB,EAAO,cACvB,EAAoB,EAAO,YAE3B,EAAW,EAAO,SAClB,GAAU,EAAO,QACjB,EAAQ,EAAO,MACf,EAAW,EAAO,SAClB,EAAc,EAAO,YACrB,EAAc,EAAO,YACrB,EAAkB,EAAO,gBAmC7B,GAjCI,MAAO,SAAW,aAAe,CAAE,eAAgB,KAAa,EAAS,MAAQ,MACnF,GAAS,WAAa,UACtB,OAAO,iBAAiB,OAAQ,SAAU,EAAO,CAC/C,EAAS,WAAa,YACrB,KAGD,GAAkB,MAAQ,GAAiB,MAC7C,GAAiB,UAAY,CAC3B,MAAO,IAAI,GAAc,uBAIzB,OAAO,QAAU,MACnB,QAAO,OAAS,SAAU,EAAG,CAC3B,YAAY,EACZ,SAAE,UAAY,EACP,GAAI,KAIV,KAAK,KACR,MAAK,IAAM,UAAe,CACxB,MAAO,IAAI,QAAO,YAUlB,GAAmB,KAAW,CAChC,GAAI,IAAiB,EACrB,EAAQ,SAAU,EAAK,EAAS,CAC9B,GAAI,GAAS,EAAQ,OACrB,MAAO,IAAe,EAAK,CAAC,QAAS,EAAQ,QAAS,YAAa,EAAQ,YAAa,MAAO,EAAQ,QAAQ,KAAK,SAAU,EAAU,CACtI,GAAI,GAAS,EAAS,KAAK,YAC3B,SAAO,QAAU,EACb,EAAO,UACT,EAAO,QAAQ,SAEV,CACL,OAAQ,EAAS,OACjB,WAAY,EAAS,WACrB,QAAS,EAAS,QAClB,KAAM,CACJ,UAAW,UAAY,CACrB,MAAO,SAMjB,EAAkB,UAAY,CAC5B,KAAK,OAAS,CACZ,QAAS,KACT,SAAU,IAEZ,KAAK,MAAQ,UAAY,CACvB,AAAI,KAAK,OAAO,SAAW,MACzB,KAAK,OAAO,QAAQ,SAEtB,KAAK,OAAO,SAAW,KAK7B,aAA+B,CAC7B,KAAK,WAAa,EAClB,KAAK,UAAY,EAGnB,GAAoB,UAAU,OAAS,SAAU,EAAQ,CACvD,WAAe,EAAW,EAAO,EAAa,CAC5C,GAAI,IAAgB,EAClB,MAAO,IAAa,KAAU,GAAS,GAAa,GAAS,KAE/D,GAAI,IAAgB,EAClB,MAAO,IAAa,MAAU,GAAS,GAAa,GAAS,OAAU,GAAa,OAAU,GAAS,GAAa,GAAS,MAE/H,GAAI,IAAgB,EAClB,MAAO,IAAa,OAAY,GAAS,GAAa,GAAS,QAEjE,KAAM,IAAI,OAEZ,WAAqB,EAAY,EAAW,CAC1C,GAAI,IAAe,EAAI,EACrB,MAAO,IAAa,EAAI,GAAK,EAAI,EAAY,GAAK,EAAI,EAExD,GAAI,IAAe,EAAI,EACrB,MAAO,GAAY,GAAK,EAAI,EAE9B,GAAI,IAAe,EAAI,EACrB,MAAO,GAET,KAAM,IAAI,OAMZ,OAJI,GAAW,MACX,EAAS,GACT,EAAa,KAAK,WAClB,EAAY,KAAK,UACZ,EAAI,EAAG,EAAI,EAAO,OAAQ,GAAK,EAAG,CACzC,GAAI,GAAQ,EAAO,GACnB,AAAI,IAAe,GACb,GAAQ,KAAO,EAAQ,KAAO,CAAC,EAAM,GAAa,EAAI,EAAQ,GAAI,EAAa,EAAG,EAAY,EAAY,MAC5G,GAAa,EACb,EAAY,EACZ,GAAU,OAAO,aAAa,IAGlC,AAAI,IAAe,EACjB,CAAI,GAAS,GAAK,GAAS,IACzB,GAAa,EACb,EAAY,GACP,AAAI,GAAS,KAAO,GAAS,IAClC,GAAa,EAAI,EACjB,EAAY,EAAQ,IACf,AAAI,GAAS,KAAO,GAAS,IAClC,GAAa,EAAI,EACjB,EAAY,EAAQ,IACf,AAAI,GAAS,KAAO,GAAS,IAClC,GAAa,EAAI,EACjB,EAAY,EAAQ,GAEpB,GAAa,EACb,EAAY,GAEV,IAAe,GAAK,CAAC,EAAM,EAAW,EAAY,EAAY,EAAY,KAC5E,GAAa,EACb,EAAY,IAGd,IAAc,EACd,EAAY,GAAa,EAAI,EAAQ,IAEnC,IAAe,GACjB,CAAI,GAAa,MACf,GAAU,OAAO,aAAa,GAE9B,IAAU,OAAO,aAAa,MAAU,GAAY,MAAS,GAAK,KAClE,GAAU,OAAO,aAAa,MAAU,GAAY,MAAS,EAAI,SAIvE,YAAK,WAAa,EAClB,KAAK,UAAY,EACV,GAIT,GAAI,IAAuB,UAAY,CACrC,GAAI,CACF,MAAO,IAAI,KAAc,OAAO,GAAI,KAAc,OAAO,QAAS,CAAC,OAAQ,OAAW,aAC/E,EAAP,CACA,QAAQ,MAAM,0EAA4E,GAE5F,MAAO,IAIT,AAAI,IAAe,MAAa,GAAe,MAAa,CAAC,OAC3D,GAAc,IAGhB,GAAI,GAAI,UAAY,GAGpB,WAAoB,EAAK,CACvB,KAAK,gBAAkB,GACvB,KAAK,WAAa,EAClB,KAAK,OAAS,EACd,KAAK,WAAa,GAClB,KAAK,aAAe,GACpB,KAAK,WAAa,EAClB,KAAK,OAAS,EACd,KAAK,QAAU,EACf,KAAK,mBAAqB,EAC1B,KAAK,aAAe,GACpB,KAAK,KAAO,EACZ,KAAK,aAAe,EACpB,KAAK,OAAS,EAGhB,EAAW,UAAU,KAAO,SAAU,EAAQ,EAAK,CACjD,KAAK,OAAO,IAEZ,GAAI,GAAO,KACP,EAAM,KAAK,KACX,EAAQ,EACR,EAAU,EAEd,KAAK,OAAS,SAAU,EAAQ,CAC9B,AAAI,EAAK,eAAiB,GACxB,GAAa,EAAK,cAClB,EAAK,aAAe,GAElB,KAAU,GAAK,IAAU,GAAK,IAAU,IAC1C,GAAQ,EACR,EAAI,OAAS,EACb,EAAI,QAAU,EACd,EAAI,QAAU,EACd,EAAI,WAAa,EACjB,EAAI,mBAAqB,EAGzB,EAAI,QACA,IAAY,GACd,GAAa,GACb,EAAU,GAEP,GACH,GAAK,WAAa,EAClB,EAAK,QAAQ,MACb,EAAK,uBAGT,EAAQ,GAGV,GAAI,GAAU,UAAY,CACxB,GAAI,IAAU,EAAG,CAEf,GAAI,GAAS,EACT,EAAa,GACb,EAAc,OAClB,GAAM,eAAiB,GAiBrB,EAAS,IACT,EAAa,KACb,EAAc,EAAI,gBAlBlB,IAAI,CACF,EAAS,EAAI,OACb,EAAa,EAAI,WACjB,EAAc,EAAI,kBAAkB,sBAC7B,GAAP,CAIA,EAAS,EACT,EAAa,GACb,EAAc,OAUlB,AAAI,IAAW,GACb,GAAQ,EACR,EAAK,WAAa,EAClB,EAAK,OAAS,EACd,EAAK,WAAa,EAClB,EAAK,aAAe,EACpB,EAAK,wBAIP,EAAa,UAAY,CAE3B,GADA,IACI,IAAU,GAAK,IAAU,EAAG,CAC9B,EAAQ,EACR,GAAI,GAAe,GACnB,GAAI,CACF,EAAe,EAAI,mBACZ,EAAP,EAGF,EAAK,WAAa,EAClB,EAAK,aAAe,EACpB,EAAK,eAGL,EAAW,SAAU,EAAM,EAAO,CASpC,GARI,IAAS,MAAQ,EAAM,gBAAkB,OAC3C,GAAQ,CACN,eAAgB,IAKpB,IACI,IAAU,GAAK,IAAU,GAAK,IAAU,EAAG,CAO7C,GANA,EAAQ,EACJ,IAAY,GACd,GAAa,GACb,EAAU,GAEZ,EAAK,WAAa,EACd,IAAS,OACX,EAAK,OAAO,WACH,IAAS,QAClB,EAAK,QAAQ,WACJ,IAAS,QAClB,EAAK,QAAQ,OAEb,MAAM,IAAI,WAEZ,EAAK,uBAGL,EAAqB,SAAU,EAAO,CACxC,AAAI,GAAO,MACT,CAAI,EAAI,aAAe,EACjB,EAAE,WAAY,KAAQ,CAAE,YAAa,KAAQ,CAAE,YAAa,MAC9D,EAAS,EAAI,eAAiB,GAAK,QAAU,OAAQ,GAElD,AAAI,EAAI,aAAe,EACtB,cAAgB,IAEpB,IAEO,EAAI,aAAe,GAC5B,MAIF,EAAY,UAAY,CAC1B,EAAU,EAAW,UAAY,CAC/B,KACC,KACC,EAAI,aAAe,GACrB,KAKJ,AAAI,UAAY,IACd,GAAI,OAAS,SAAU,EAAO,CAC5B,EAAS,OAAQ,KAGjB,WAAa,IACf,GAAI,QAAU,SAAU,EAAO,CAC7B,EAAS,QAAS,KAQlB,WAAa,IACf,GAAI,QAAU,SAAU,EAAO,CAC7B,EAAS,QAAS,KAIlB,cAAgB,IAClB,GAAI,WAAa,GASf,sBAAwB,IAC1B,GAAI,mBAAqB,SAAU,EAAO,CACxC,EAAmB,KAInB,gBAAiB,IAAO,CAAE,cAAe,GAAe,aAC1D,IAAQ,GAAI,QAAQ,OAAS,GAAK,IAAM,KAAO,gBAEjD,EAAI,KAAK,EAAQ,EAAK,IAElB,cAAgB,IAGlB,GAAU,EAAW,UAAY,CAC/B,KACC,KAGP,EAAW,UAAU,MAAQ,UAAY,CACvC,KAAK,OAAO,KAEd,EAAW,UAAU,kBAAoB,SAAU,EAAM,CACvD,MAAO,MAAK,cAEd,EAAW,UAAU,iBAAmB,SAAU,EAAM,EAAO,CAC7D,GAAI,GAAM,KAAK,KACf,AAAI,oBAAsB,IACxB,EAAI,iBAAiB,EAAM,IAG/B,EAAW,UAAU,sBAAwB,UAAY,CAEvD,MAAO,MAAK,KAAK,uBAAyB,MAAY,KAAK,KAAK,yBAA2B,IAE7F,EAAW,UAAU,KAAO,UAAY,CAGtC,GAAK,EAAE,cAAe,GAAe,YAAe,CAAE,iBAAkB,GAAe,YAAc,CAAE,YAAa,GAAe,aAC/H,GAAY,MACZ,EAAS,YAAc,MACvB,EAAS,aAAe,WAAY,CACtC,GAAI,GAAO,KACX,EAAK,aAAe,EAAW,UAAY,CACzC,EAAK,aAAe,EACpB,EAAK,QACJ,GACH,OAGF,GAAI,GAAM,KAAK,KAEf,AAAI,mBAAqB,IACvB,GAAI,gBAAkB,KAAK,iBAE7B,GAAI,CAEF,EAAI,KAAK,cACF,EAAP,CAEA,KAAM,KAIV,WAAqB,EAAM,CACzB,MAAO,GAAK,QAAQ,SAAU,SAAU,EAAG,CACzC,MAAO,QAAO,aAAa,EAAE,WAAW,GAAK,MAIjD,YAAyB,EAAK,CAI5B,OAFI,GAAM,OAAO,OAAO,MACpB,EAAQ,EAAI,MAAM;AAAA,GACb,EAAI,EAAG,EAAI,EAAM,OAAQ,GAAK,EAAG,CACxC,GAAI,GAAO,EAAM,GACb,EAAQ,EAAK,MAAM,MACnB,EAAO,EAAM,QACb,EAAQ,EAAM,KAAK,MACvB,EAAI,EAAY,IAAS,EAE3B,KAAK,KAAO,EAEd,GAAgB,UAAU,IAAM,SAAU,EAAM,CAC9C,MAAO,MAAK,KAAK,EAAY,KAG3B,GAAkB,MAAQ,EAAe,kBAAoB,MAC/D,GAAe,iBAAmB,GAGpC,aAAwB,EAGxB,GAAa,UAAU,KAAO,SAAU,EAAK,EAAiB,EAAoB,EAAkB,EAAK,EAAiB,EAAS,CACjI,EAAI,KAAK,MAAO,GAChB,GAAI,GAAS,EACb,EAAI,WAAa,UAAY,CAC3B,GAAI,GAAe,EAAI,aACnB,EAAQ,EAAa,MAAM,GAC/B,GAAU,EAAM,OAChB,EAAmB,IAErB,EAAI,QAAU,SAAU,EAAO,CAC7B,EAAM,iBACN,EAAiB,GAAI,OAAM,kBAE7B,EAAI,OAAS,UAAY,CACvB,EAAiB,OAEnB,EAAI,QAAU,UAAY,CACxB,EAAiB,OAEnB,EAAI,mBAAqB,UAAY,CACnC,GAAI,EAAI,aAAe,EAAe,iBAAkB,CACtD,GAAI,GAAS,EAAI,OACb,EAAa,EAAI,WACjB,EAAc,EAAI,kBAAkB,gBACpC,EAAU,EAAI,wBAClB,EAAgB,EAAQ,EAAY,EAAa,GAAI,IAAgB,MAGzE,EAAI,gBAAkB,EACtB,OAAS,KAAQ,GACf,AAAI,OAAO,UAAU,eAAe,KAAK,EAAS,IAChD,EAAI,iBAAiB,EAAM,EAAQ,IAGvC,SAAI,OACG,GAGT,YAAwB,EAAS,CAC/B,KAAK,SAAW,EAElB,GAAe,UAAU,IAAM,SAAU,EAAM,CAC7C,MAAO,MAAK,SAAS,IAAI,IAG3B,aAA0B,EAG1B,GAAe,UAAU,KAAO,SAAU,EAAK,EAAiB,EAAoB,EAAkB,EAAK,EAAiB,EAAS,CACnI,GAAI,GAAS,KACT,EAAa,GAAI,GACjB,EAAS,EAAW,OACpB,EAAc,GAAI,GACtB,SAAM,EAAK,CACT,QAAS,EACT,YAAa,EAAkB,UAAY,cAC3C,OAAQ,EACR,MAAO,aACN,KAAK,SAAU,EAAU,CAC1B,SAAS,EAAS,KAAK,YACvB,EAAgB,EAAS,OAAQ,EAAS,WAAY,EAAS,QAAQ,IAAI,gBAAiB,GAAI,IAAe,EAAS,UAEjH,GAAI,IAAQ,SAAU,EAAS,EAAQ,CAC5C,GAAI,IAAgB,UAAY,CAC9B,EAAO,OAAO,KAAK,SAAU,EAAQ,CACnC,GAAI,EAAO,KAET,EAAQ,YACH,CACL,GAAI,GAAQ,EAAY,OAAO,EAAO,MAAO,CAAC,OAAQ,KACtD,EAAmB,GACnB,QAED,MAAS,SAAU,EAAO,CAC3B,EAAO,MAGX,SAED,MAAS,SAAU,EAAO,CAC3B,GAAI,EAAM,OAAS,aAGjB,MAAO,KAER,KAAK,SAAU,EAAO,CACvB,EAAiB,KAEZ,CACL,MAAO,UAAY,CACjB,AAAI,GAAU,MACZ,EAAO,SAET,EAAW,WAKjB,YAAuB,CACrB,KAAK,WAAa,OAAO,OAAO,MAGlC,YAAoB,EAAG,CACrB,EAAW,UAAY,CACrB,KAAM,IACL,GAGL,EAAY,UAAU,cAAgB,SAAU,EAAO,CACrD,EAAM,OAAS,KACf,GAAI,GAAgB,KAAK,WAAW,EAAM,MAC1C,GAAI,GAAiB,KAEnB,OADI,GAAS,EAAc,OAClB,EAAI,EAAG,EAAI,EAAQ,GAAK,EAAG,CAClC,GAAI,GAAW,EAAc,GAC7B,GAAI,CACF,AAAI,MAAO,GAAS,aAAgB,WAClC,EAAS,YAAY,GAErB,EAAS,KAAK,KAAM,SAEf,EAAP,CACA,GAAW,MAKnB,EAAY,UAAU,iBAAmB,SAAU,EAAM,EAAU,CACjE,EAAO,OAAO,GACd,GAAI,GAAY,KAAK,WACjB,EAAgB,EAAU,GAC9B,AAAI,GAAiB,MACnB,GAAgB,GAChB,EAAU,GAAQ,GAGpB,OADI,GAAQ,GACH,EAAI,EAAG,EAAI,EAAc,OAAQ,GAAK,EAC7C,AAAI,EAAc,KAAO,GACvB,GAAQ,IAGZ,AAAK,GACH,EAAc,KAAK,IAGvB,EAAY,UAAU,oBAAsB,SAAU,EAAM,EAAU,CACpE,EAAO,OAAO,GACd,GAAI,GAAY,KAAK,WACjB,EAAgB,EAAU,GAC9B,GAAI,GAAiB,KAAW,CAE9B,OADI,GAAW,GACN,EAAI,EAAG,EAAI,EAAc,OAAQ,GAAK,EAC7C,AAAI,EAAc,KAAO,GACvB,EAAS,KAAK,EAAc,IAGhC,AAAI,EAAS,SAAW,EACtB,MAAO,GAAU,GAEjB,EAAU,GAAQ,IAKxB,WAAe,EAAM,CACnB,KAAK,KAAO,EACZ,KAAK,OAAS,OAGhB,WAAsB,EAAM,EAAS,CACnC,EAAM,KAAK,KAAM,GACjB,KAAK,KAAO,EAAQ,KACpB,KAAK,YAAc,EAAQ,YAG7B,EAAa,UAAY,OAAO,OAAO,EAAM,WAE7C,WAAyB,EAAM,EAAS,CACtC,EAAM,KAAK,KAAM,GACjB,KAAK,OAAS,EAAQ,OACtB,KAAK,WAAa,EAAQ,WAC1B,KAAK,QAAU,EAAQ,QAGzB,EAAgB,UAAY,OAAO,OAAO,EAAM,WAEhD,WAAoB,EAAM,EAAS,CACjC,EAAM,KAAK,KAAM,GACjB,KAAK,MAAQ,EAAQ,MAGvB,EAAW,UAAY,OAAO,OAAO,EAAM,WAE3C,GAAI,GAAU,GACV,EAAa,EACb,EAAO,EACP,EAAS,EAET,EAAW,GACX,EAAc,EACd,GAAQ,EACR,GAAc,EACd,GAAQ,EAER,GAAoB,+BAEpB,GAAmB,IACnB,GAAmB,KAEnB,GAAgB,SAAU,EAAO,EAAK,CACxC,GAAI,GAAI,GAAS,KAAO,EAAM,SAAS,EAAO,IAC9C,MAAI,KAAM,GACR,GAAI,GAEC,GAAc,IAEnB,GAAgB,SAAU,EAAG,CAC/B,MAAO,MAAK,IAAI,KAAK,IAAI,EAAG,IAAmB,KAG7C,GAAO,SAAU,EAAM,EAAG,EAAO,CACnC,GAAI,CACF,AAAI,MAAO,IAAM,YACf,EAAE,KAAK,EAAM,SAER,EAAP,CACA,GAAW,KAIf,WAA6B,EAAK,EAAS,CACzC,EAAY,KAAK,MACjB,EAAU,GAAW,GAErB,KAAK,OAAS,OACd,KAAK,UAAY,OACjB,KAAK,QAAU,OAEf,KAAK,IAAM,OACX,KAAK,WAAa,OAClB,KAAK,gBAAkB,OACvB,KAAK,QAAU,OAEf,KAAK,OAAS,OAEd,GAAM,KAAM,EAAK,GAGnB,aAA+B,CAC7B,MAAQ,IAAkB,MAAc,mBAAqB,GAAe,WAAe,GAAkB,KACvG,GAAI,GACJ,GAAI,GAGZ,GAAI,IAAmB,GAAS,MAAa,GAAY,MAAa,QAAU,GAAS,UAEzF,YAAe,EAAI,EAAK,EAAS,CAC/B,EAAM,OAAO,GACb,GAAI,GAAkB,QAAQ,EAAQ,iBAClC,EAAgC,EAAQ,+BAAiC,cAEzE,EAAe,GAAc,KAC7B,EAAmB,GAAc,EAAQ,iBAAkB,MAE3D,EAAc,GACd,EAAQ,EACR,EAAc,GACd,EAAa,EACb,EAAU,EAAQ,SAAW,GAC7B,EAAkB,EAAQ,UAC1B,EAAM,IAAoB,GAAmB,KAAY,OAAY,GAAI,GAAW,GAAmB,KAAY,GAAI,GAAoB,MAC3I,GAAY,GAAmB,MAAQ,MAAO,IAAoB,SAAW,GAAI,GAAqB,GAAO,KAAY,GAAI,IAAmB,GAAI,IACpJ,EAAkB,OAClB,EAAU,EACV,EAAe,EACf,GAAa,GACb,GAAoB,GACpB,EAAkB,GAElB,GAAa,GACb,EAAQ,EACR,GAAa,EACb,GAAa,EAEb,GAAU,SAAU,EAAQ,EAAY,EAAa,EAAS,CAChE,GAAI,IAAiB,EACnB,GAAI,IAAW,KAAO,GAAe,MAAa,GAAkB,KAAK,GAAc,CACrF,EAAe,EACf,EAAc,KAAK,MACnB,EAAQ,EACR,EAAG,WAAa,EAChB,GAAI,GAAQ,GAAI,GAAgB,OAAQ,CACtC,OAAQ,EACR,WAAY,EACZ,QAAS,IAEX,EAAG,cAAc,GACjB,GAAK,EAAI,EAAG,OAAQ,OACf,CACL,GAAI,GAAU,GACd,AAAI,IAAW,IACT,IACF,GAAa,EAAW,QAAQ,OAAQ,MAE1C,EAAU,uCAAyC,EAAS,IAAM,EAAa,8CAE/E,EAAU,6EAAgF,IAAe,KAAY,IAAM,EAAY,QAAQ,OAAQ,MAAQ,6BAEjK,KACA,GAAI,GAAQ,GAAI,GAAgB,QAAS,CACvC,OAAQ,EACR,WAAY,EACZ,QAAS,IAEX,EAAG,cAAc,GACjB,GAAK,EAAI,EAAG,QAAS,GACrB,QAAQ,MAAM,KAKhB,GAAa,SAAU,EAAW,CACpC,GAAI,IAAiB,EAAM,CAEzB,OADI,GAAI,GACC,EAAI,EAAG,EAAI,EAAU,OAAQ,GAAK,EAAG,CAC5C,GAAI,GAAI,EAAU,WAAW,GAC7B,AAAI,KAAM;AAAA,EAAK,WAAW,IAAM,IAAM,KAAK,WAAW,KACpD,GAAI,GAGR,GAAI,GAAS,KAAM,GAAK,GAAa,IAAM,EAAU,MAAM,EAAG,EAAI,GAClE,GAAc,KAAM,GAAK,GAAa,IAAM,EAAU,MAAM,EAAI,GAC5D,IAAc,IAChB,GAAc,KAAK,MACnB,GAAc,EAAU,QAE1B,OAAS,GAAW,EAAG,EAAW,EAAM,OAAQ,GAAY,EAAG,CAC7D,GAAI,GAAI,EAAM,WAAW,GACzB,GAAI,IAAU,GAAY,IAAM;AAAA,EAAK,WAAW,GAC9C,EAAQ,UAEJ,IAAU,GACZ,GAAQ,GAEN,IAAM,KAAK,WAAW,IAAM,IAAM;AAAA,EAAK,WAAW,GAAI,CACxD,GAAI,IAAU,EAAa,CACzB,AAAI,IAAU,IACZ,IAAa,EAAW,GAE1B,GAAI,IAAQ,EAAM,MAAM,GAAY,GAAa,GAC7C,GAAQ,EAAM,MAAM,GAAc,IAAa,GAAY,EAAM,WAAW,MAAgB,IAAI,WAAW,GAAK,EAAI,GAAI,GAC5H,AAAI,KAAU,OACZ,KAAc;AAAA,EACd,IAAc,IACT,AAAI,KAAU,KACnB,GAAoB,GACf,AAAI,KAAU,QACnB,EAAkB,GACb,AAAI,KAAU,QACnB,GAAe,GAAc,GAAO,GACpC,EAAQ,GACC,KAAU,oBACnB,GAAmB,GAAc,GAAO,GACpC,IAAY,GACd,GAAa,GACb,EAAU,EAAW,UAAY,CAC/B,MACC,KAIT,GAAI,IAAU,EAAa,CACzB,GAAI,KAAe,GAAI,CACrB,EAAc,GACV,IAAoB,IACtB,GAAkB,WAEpB,GAAI,IAAQ,GAAI,GAAa,EAAiB,CAC5C,KAAM,GAAW,MAAM,GACvB,YAAa,KAUf,GARA,EAAG,cAAc,IACjB,AAAI,IAAoB,OACtB,GAAK,EAAI,EAAG,OAAQ,IACf,AAAI,IAAoB,UAC7B,GAAK,EAAI,EAAG,UAAW,IACd,IAAoB,SAC7B,GAAK,EAAI,EAAG,QAAS,IAEnB,IAAiB,EACnB,OAGJ,GAAa,GACb,EAAkB,GAEpB,EAAQ,IAAM,KAAK,WAAW,GAAK,EAAW,MAE9C,AAAI,KAAU,GACZ,IAAa,EACb,EAAQ,IAEV,AAAI,IAAU,GACR,IAAM,IAAI,WAAW,IACvB,IAAa,EAAW,EACxB,EAAQ,IAED,IAAU,IACnB,GAAQ,OAQhB,GAAW,SAAU,EAAO,CAC9B,GAAI,IAAiB,GAAQ,IAAiB,EAAY,CACxD,EAAe,EACX,IAAY,GACd,GAAa,GACb,EAAU,GAEZ,EAAU,EAAW,UAAY,CAC/B,MACC,GACH,EAAQ,GAAc,KAAK,IAAI,EAAe,GAAI,EAAQ,IAE1D,EAAG,WAAa,EAChB,GAAI,GAAQ,GAAI,GAAW,QAAS,CAAC,MAAO,IAC5C,EAAG,cAAc,GACjB,GAAK,EAAI,EAAG,QAAS,GACjB,GAAS,MACX,QAAQ,MAAM,KAKhB,GAAQ,UAAY,CACtB,EAAe,EACX,GAAmB,MACrB,GAAgB,QAChB,EAAkB,QAEhB,IAAY,GACd,GAAa,GACb,EAAU,GAEZ,EAAG,WAAa,GAGd,GAAY,UAAY,CAG1B,GAFA,EAAU,EAEN,IAAiB,EAAS,CAC5B,GAAI,CAAC,GAAe,GAAmB,KACrC,GAAS,GAAI,OAAM,sBAAwB,EAAmB,kBAA0B,KAAiB,EAAa,wBAA0B,EAAa,oBAAsB,mBAC/K,GAAmB,MACrB,GAAgB,QAChB,EAAkB,YAEf,CACL,GAAI,GAAgB,KAAK,IAAK,IAAe,KAAK,OAAS,EAAmB,KAAK,MAAO,GAC1F,EAAc,GACd,EAAU,EAAW,UAAY,CAC/B,MACC,GAEL,OAGF,EAAc,GACd,EAAa,EACb,EAAU,EAAW,UAAY,CAC/B,MACC,GAEH,EAAe,EACf,GAAa,GACb,EAAkB,GAClB,GAAoB,EACpB,GAAa,GACb,GAAa,EACb,GAAa,EACb,EAAQ,EAIR,GAAI,GAAa,EACjB,AAAI,EAAI,MAAM,EAAG,KAAO,SAAW,EAAI,MAAM,EAAG,KAAO,SACjD,IAAgB,IAClB,IAAe,GAAI,QAAQ,OAAS,GAAK,IAAM,KAAO,EAA+B,IAAM,mBAAmB,IAGlH,GAAI,GAAkB,EAAG,gBACrB,EAAiB,GACrB,EAAe,OAAY,oBAC3B,GAAI,GAAU,EAAG,QACjB,GAAI,GAAW,KACb,OAAS,KAAQ,GACf,AAAI,OAAO,UAAU,eAAe,KAAK,EAAS,IAChD,GAAe,GAAQ,EAAQ,IAIrC,GAAI,CACF,EAAkB,GAAU,KAAK,EAAK,GAAS,GAAY,GAAU,EAAY,EAAiB,SAC3F,GAAP,CACA,WACM,KAIV,EAAG,IAAM,EACT,EAAG,WAAa,EAChB,EAAG,gBAAkB,EACrB,EAAG,QAAU,EACb,EAAG,OAAS,GAEZ,KAGF,EAAoB,UAAY,OAAO,OAAO,EAAY,WAC1D,EAAoB,UAAU,WAAa,EAC3C,EAAoB,UAAU,KAAO,EACrC,EAAoB,UAAU,OAAS,EACvC,EAAoB,UAAU,MAAQ,UAAY,CAChD,KAAK,UAGP,EAAoB,WAAa,EACjC,EAAoB,KAAO,EAC3B,EAAoB,OAAS,EAC7B,EAAoB,UAAU,gBAAkB,OAEhD,GAAI,IAAI,EACR,AAAI,GAAkB,MAAc,IAAqB,MAAa,CAAE,oBAAqB,GAAkB,aAO7G,IAAI,GAGL,SAAU,EAAS,CAClB,GAAI,MAAO,KAAW,UAAY,MAAO,IAAO,SAAY,SAAU,CACpE,GAAI,GAAI,EAAQ,IAChB,AAAI,IAAM,QAAW,IAAO,QAAU,OAEnC,AAAI,OAAO,SAAW,YAAc,OAAO,IAC9C,OAAO,CAAC,WAAY,GAGpB,EAAQ,IAET,SAAU,EAAS,CACpB,EAAQ,oBAAsB,EAC9B,EAAQ,kBAAoB,EAC5B,EAAQ,YAAc,OAExB,MAAO,aAAe,YAAe,MAAO,SAAW,YAAc,OAAS,MAAO,OAAS,YAAc,KAAO,GAAQ,cCjhC7H,iDCOA,YAA+B,EAAA,CAC3B,KAAK,QAAU,EAGnB,GAAsB,UAAY,GAAI,OACtC,GAAsB,UAAU,KAAO,wBA6BvC,GAAA,IAAkC,AAAA,MAAX,SAAW,aAC9B,OAAO,MACP,OAAO,KAAK,KAAK,SA7BrB,SAAkB,EAAA,CACd,GAAI,GAAM,OAAO,GAAO,QAAQ,MAAO,IACvC,GAAI,EAAI,OAAS,GAAK,EAClB,KAAM,IAAI,IACN,qEAGR,OAEgB,GAAI,EAAZ,EAAK,EAAe,EAAM,EAAG,EAAS,GAEzC,EAAS,EAAI,OAAO,KAAA,CAEpB,GACC,GAAK,EAAK,EAAS,GAAL,EAAU,EAAS,EAG/B,IAAO,GACV,GAAU,OAAO,aAAa,IAAO,GAAA,IAAa,EAAM,IACzD,EAGA,EA/BI,oEA+BW,QAAQ,GAE3B,MAAO,ICxBI,YAAS,EAAA,CACpB,GAAI,GAAS,EAAI,QAAQ,KAAM,KAAK,QAAQ,KAAM,KAClD,OAAQ,EAAO,OAAS,OACf,GACD,UACC,GACD,GAAU,KACV,UACC,GACD,GAAU,IACV,cAEA,KAAM,4BAGd,GAAA,CACI,MA5BR,UAA0B,EAAA,CACtB,MAAO,oBACH,GAAK,GAAK,QAAQ,OAAQ,SAAS,EAAG,EAAA,CAClC,GAAI,GAAO,EAAE,WAAW,GAAG,SAAS,IAAI,cAIxC,MAHI,GAAK,OAAS,GACd,GAAO,IAAM,GAEV,IAAM,MAqBO,SACnB,EAAP,CACE,MAAO,IAAK,IC5Bb,YAA2B,EAAA,CAC9B,KAAK,QAAU,EAMJ,YAAS,EAAO,EAAA,CAC3B,GAAqB,AAAA,MAAV,IAAU,SACjB,KAAM,IAAI,IAAkB,2BAIhC,GAAI,GAAA,AADJ,GAAU,GAAW,IACH,SAAd,GAAgC,EAAI,EACxC,GAAA,CACI,MAAO,MAAK,MAAM,GAAkB,EAAM,MAAM,KAAK,WAChD,EAAP,CACE,KAAM,IAAI,IAAkB,4BAA8B,EAAE,UAbpE,GAAkB,UAAY,GAAI,OAClC,GAAkB,UAAU,KAAO,oBAAA,GAAA,IAAA,eCuBN,EAAA,CAG5B,MAAO,CAKN,IAPD,EAAM,GAAO,GAAI,KAehB,GAAA,SAAY,EAAiB,EAAA,CAC5B,GAAM,GAAW,EAAI,IAAI,GACX,GAAY,EAAS,KAAK,IAEvC,EAAI,IAAI,EAAM,CAAC,KAUjB,IAAA,SAAa,EAAiB,EAAA,CAC7B,GAAM,GAAW,EAAI,IAAI,GACrB,GACH,EAAS,OAAO,EAAS,QAAQ,KAAa,EAAG,IAcnD,KAAA,SAAc,EAAiB,EAAA,CAAA,AAC5B,GAAI,IAAI,IAAS,IAAyB,QAAQ,IAAI,SAAC,EAAA,CAAc,EAAQ,KAC7E,GAAI,IAAI,MAAQ,IAAiC,QAAQ,IAAI,SAAC,EAAA,CAAc,EAAQ,EAAM,OJ/E/F,OAAoC,SKY7B,GAAK,GAAL,UAAK,EAAL,CACL,QAAQ,QACR,YAAY,YACZ,eAAe,eACf,cAAc,cACd,UAAU,UACV,QAAQ,UANE,WCZL,GAAM,IAA0B,CACrC,MAAO,GACP,QAAS,sDACT,SAAU,qDACV,cAAe,GACf,qBAAsB,GACtB,sBAAuB,IAIZ,GAAW,CAAC,KAAoB,IAAgB,QAAQ,MAAM,YAAY,IAAW,GAAG,GAExF,GAAyB,GAAK,INE3C,GAAM,IAAc,QACd,GAA+B,IAC/B,GAAQ,WAAW,MACnB,GAAc,uBAGd,GAAW,CAAC,CAAC,WAAW,MAExB,GAAe,AAAC,GAA2B,CAC/C,GAAI,CAAE,SAAU,EAEhB,GAAI,CACF,OAAQ,EAAW,KAAK,mBACjB,UACA,SACH,EAAQ,OAAO,GACf,UACG,UACH,EAAQ,EAAM,WAAW,gBAAkB,OAC3C,UACG,OACH,EAAQ,KAAK,MAAM,GACnB,aAEG,EAAP,CACA,GAAS,GAGX,MAAO,IAGH,GAAa,CAAC,EAAgB,EAAgB,IAA6B,CAC/E,GAAI,GACA,EACA,EACA,EACA,EAA0B,GACxB,GAAuB,IAAM,CACjC,EAA0B,IAEtB,EAAwB,IAAM,CAClC,EAA0B,IAExB,EAA8B,GAC5B,EAAW,KACX,EAAiB,IAAK,MAAmB,GACzC,EAAW,CAAC,KAAoB,IAAgB,CACpD,AAAI,EAAe,OAEjB,QAAQ,MAAM,YAAY,IAAW,GAAG,IAGtC,GAAgB,AAAC,GAA6B,CAClD,GAAI,EAAyB,CAC3B,GAAM,GAAM,KAAK,MAEjB,AAAI,EAAM,EAAY,aAAe,IACnC,GAAY,QACZ,EAAY,aAAe,KAKjC,WAAW,eAAiB,IAAM,CAChC,AAAI,EAAQ,QAAU,WAAW,cAC/B,MACA,WAAW,aAAa,mBAAqB,KAAK,UAAU,GAC5D,MAIJ,GAAM,IAAe,MAAO,EAAkB,IASrC,AAF6B,MAAM,AANzB,MAAM,IAAM,GAAG,EAAc,sBAAuB,CACnE,OAAQ,OACR,QAAS,CAAE,eAAgB,oBAC3B,KAAM,KAAK,UAAU,CAAE,OAAQ,EAAU,cAGQ,QAEvC,UAGR,GAAyB,IAAM,CACnC,GAAI,EAAQ,OAAQ,CAClB,EAAS,qBAAsB,CAAE,UAAS,gBAC1C,GAAM,GAAU,CACd,YAAa,EAAQ,IAAI,GAAU,EACjC,UAAW,KAAK,MAChB,MAAO,EAAM,MACb,YAAa,YACb,WAAY,CACV,CACE,IAAK,oBACL,MAAO,EAAM,mBAEf,CACE,IAAK,cACL,MAAO,EAAM,mBAEf,CACE,IAAK,sBACL,MAAO,EAAM,qBAEf,CACE,IAAK,SACL,MAAO,EAAO,YAEhB,CACE,IAAK,WACL,MAAO,cAET,CACE,IAAK,WACL,MAAO,UAET,CACE,IAAK,cACL,MAAO,SAMf,GAAM,GAAG,EAAQ,oBAAoB,IAAe,CAClD,OAAQ,OACR,QAAS,CAAE,eAAgB,mBAAoB,cAAe,UAAU,KACxE,KAAM,KAAK,UAAU,KAEpB,KAAK,IAAM,CACV,EAAU,KAEX,MAAM,GAAS,CACd,GAAS,KAEV,QAAQ,IAAM,CACb,EAAqB,OAAO,WAAW,GAAwB,UAGnE,GAAqB,OAAO,WAAW,GAAwB,KAI/D,EAA0C,GAExC,EAAe,UAAY,CAC/B,MAAO,IACH,GAAI,OACF,GACA,CACE,IAAI,EAAU,EAAU,CACtB,GAAM,GAAS,EAAS,GAExB,GAAI,EAAS,eAAe,GAAW,CACrC,GAAM,GAAe,EAAS,GAGxB,EAAQ,EAAQ,KACpB,GAAU,EAAO,oBAAsB,GAAY,IAAiB,EAAO,cAG7E,AAAI,EACF,GAAM,oBAAsB,EAAY,IAAqB,YAAc,GAC3E,GAAc,IAEd,EAAQ,KAAK,CACX,kBAAmB,EACnB,eACA,oBAAqB,EAAY,IAAqB,YAAc,GACpE,MAAO,EAA0B,EAAI,EACrC,aAAc,KAAK,QAGvB,EACE,uBACA,EACA,4BACA,EACA,uBACA,EAAY,IAAqB,YAIrC,MAAO,MAIb,IAGF,EAA+B,IAEnC,GAAa,EAAQ,GAClB,KAAK,AAAC,GAAkB,CACvB,EAAW,EACX,GAAM,GAAmC,GAAW,GAIpD,GAFA,EAAS,gBAAiB,GAEtB,WAAW,cAAgB,WAAW,aAAa,mBACrD,GAAI,CAEF,MAAO,YAAW,aAAa,mBAC/B,EAAS,kDACF,EAAP,EAGJ,EAAqB,OAAO,WAAW,GAAwB,IAE/D,EAAc,EAAQ,YAGtB,KACG,KAAK,IAAM,CACV,EAAS,qBAAsB,KAEhC,KAAK,IAAM,CACV,OAED,KAAK,IAAM,CACV,EAAS,qBAAsB,CAAE,YACjC,EAAS,KAAK,EAAM,MAAO,GAEtB,IACH,OAAO,KAAK,GAAS,QAAQ,GAAO,CAClC,EAAQ,KAAK,CACX,kBAAmB,EACnB,aAAc,EAAQ,GACtB,oBAAqB,EAAY,IAAM,YAAc,GACrD,MAAO,EAA0B,EAAI,EACrC,aAAc,KAAK,YAK1B,MAAM,GAAO,CACZ,EAAS,KAAK,EAAM,MAAO,OAGhC,MAAM,GAAS,CACd,GAAS,yBAA0B,GACnC,EAAS,KAAK,EAAM,MAAO,KAG/B,GAAM,IAAa,SAAY,CAC7B,GAAI,CAWF,AAFa,MAAM,AARP,MAAM,IAChB,GAAG,EAAe,sBAAsB,YAAsB,EAAO,yBACrE,CACE,QAAS,CACP,cAAe,UAAU,QAIR,QAElB,QAAQ,AAAC,GAA4B,CACxC,GAAM,GAAS,GAAa,GAC5B,EAAQ,EAAY,MAAQ,EAC5B,EAAY,EAAY,MAAQ,IAAK,EAAa,MAAO,WAEpD,EAAP,CACA,UAAS,mCAAoC,GAC7C,EAAS,KAAK,EAAM,MAAO,GACpB,IAIL,GAAY,KAAO,IAAuB,CAC9C,GAAI,CACF,GAAM,GAAS,KAAM,IACnB,GAAG,EAAe,sBAAsB,YAAsB,EAAO,0BAA0B,IAC/F,CACE,QAAS,CACP,cAAe,UAAU,OAK/B,GAAI,EAAO,GAAI,CACb,GAAM,GAAuB,KAAM,GAAO,OACpC,EAAS,GAAa,GAkD5B,GAhDA,KACA,EAAQ,GAAc,EACtB,EAAY,GAAc,IAAK,EAAU,MAAO,GAChD,IAEA,EAAS,KACP,EAAM,QACN,GACI,GAAI,OAAM,EAAU,CAClB,IAAI,EAAW,EAAU,CACvB,GAAI,EAAU,eAAe,IAAa,IAAa,QAAS,CAE9D,GAAM,GAAoB,EAAU,KAC9B,EAAe,EAAS,MACxB,EAAQ,EAAQ,KACpB,IAAU,GAAO,oBAAsB,GAAqB,GAAO,eAAiB,GAGtF,AAAI,EACF,IAAc,GACd,EAAM,oBAAsB,EAAY,IAAoB,YAAc,IAE1E,EAAQ,KAAK,CACX,oBACA,aAAc,OAAO,GACrB,oBAAqB,EAAY,GAAmB,YAAc,GAClE,MAAO,EAA0B,EAAI,EACrC,aAAc,KAAK,QAGvB,EACE,sBACA,EACA,6CACA,GAIJ,MAAO,KAAa,QAAU,GAAa,GAAY,EAAS,MAGpE,CACE,QAAS,EAAS,QAClB,KAAM,EAAS,KACf,MAAO,GAAa,KAIxB,CAAC,GAAU,CACb,GAAM,GAAoB,EAAS,KAC7B,EAAQ,EAAQ,KACpB,GAAU,EAAO,oBAAsB,GAAqB,EAAO,eAAiB,EAAS,OAG/F,AAAI,EACF,IAAc,GACd,EAAM,oBAAsB,EAAY,IAA8B,YAAc,IAEpF,EAAQ,KAAK,CACX,kBAAmB,EACnB,aAAc,OAAO,EAAS,OAC9B,oBAAqB,EAAY,GAAmB,YAAc,GAClE,MAAO,EAA0B,EAAI,EACrC,aAAc,KAAK,aAKzB,GAAS,KAAK,EAAM,MAAO,SAEtB,EAAP,CACA,GAAS,kCAAmC,GAC5C,EAAS,KAAK,EAAM,MAAO,KAIzB,GAAc,IAAM,CAExB,GAAI,CAAC,EAAe,cAAe,CACjC,EAAS,2EACT,OAEF,EAAc,GAAI,IAAY,GAAG,EAAe,iBAAkB,CAChE,QAAS,CACP,cAAe,UAAU,IACzB,UAAW,KAIf,EAAY,OAAS,AAAC,GAAe,CACnC,EAAS,mBAAoB,GAC7B,EAAS,KAAK,EAAM,YAGtB,EAAY,QAAU,AAAC,GAAe,CACpC,EAAS,uBACT,EAAS,KAAK,EAAM,eAGtB,EAAY,QAAU,AAAC,GAAe,CACpC,GAAS,mBAAoB,GAC7B,EAAS,KAAK,QAAS,IAGzB,EAAY,iBAAiB,IAAK,AAAC,GAAa,CAC9C,GAAM,GAAqB,KAAK,MAAM,EAAI,MAI1C,OAFA,EAAS,+BAAgC,GAEjC,EAAM,WACP,SACH,WAAW,IAAM,GAAU,EAAM,YAAa,KAC9C,UACG,QACH,GAAU,EAAM,YAChB,UACG,SACH,MAAO,GAAQ,EAAM,YACrB,EAAS,KAAK,EAAM,QAAS,CAAE,KAAM,EAAM,WAAY,MAAO,OAAW,QAAS,KAClF,EAAS,qBAAsB,CAAE,QAAS,EAAO,YAEjD,UAKF,GAAK,CAAC,EAAc,IAAkC,EAAS,GAAG,EAAO,GAEzE,EAAM,CAAC,EAAe,IAAmC,CAC7D,AAAI,EACF,EAAS,IAAI,EAAO,GAEpB,KAIE,GAAY,CAAC,EAAc,IAAsB,CACrD,GAAM,GAAQ,EAAQ,GAEtB,GAAI,CAAC,IAAY,IAAU,OAAW,CACpC,GAAM,GAAe,EACf,EAAoB,EAEpB,EAAQ,EAAQ,KACpB,GAAU,EAAO,oBAAsB,GAAqB,EAAO,eAAiB,GAGtF,AAAI,EACF,IAAc,GACd,EAAM,oBAAsB,EAAY,IAA8B,YAAc,IAEpF,EAAQ,KAAK,CACX,kBAAmB,EACnB,eACA,MAAO,EAA0B,EAAI,EACrC,oBAAqB,EAAY,GAAmB,YAAc,GAClE,aAAc,KAAK,QAKzB,MAAO,KAAU,OAAY,EAAQ,GAGjC,EAAQ,IAAM,CAClB,EAAS,wBACT,EAAU,IACV,EAAc,GACd,aAAa,GACb,EAAS,IAAI,QACb,EAAY,SAGd,MAAO,CAAE,MAAI,MAAK,aAAW",
  "names": []
}
