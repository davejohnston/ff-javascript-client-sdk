{
  "version": 3,
  "sources": ["../src/eventsource.js", "../src/index.ts", "../node_modules/jwt-decode/lib/atob.js", "../node_modules/jwt-decode/lib/base64_url_decode.js", "../node_modules/jwt-decode/lib/index.js", "../node_modules/mitt/src/index.ts", "../src/types.ts", "../src/utils.ts"],
  "sourcesContent": ["/** @license\n * eventsource.js\n * Available under MIT License (MIT)\n * https://github.com/Yaffle/EventSource/\n */\n\n/*jslint indent: 2, vars: true, plusplus: true */\n/*global setTimeout, clearTimeout */\n\n(function (global) {\n  \"use strict\";\n\n  var setTimeout = global.setTimeout;\n  var clearTimeout = global.clearTimeout;\n  var XMLHttpRequest = global.XMLHttpRequest;\n  var XDomainRequest = global.XDomainRequest;\n  var ActiveXObject = global.ActiveXObject;\n  var NativeEventSource = global.EventSource;\n\n  var document = global.document;\n  var Promise = global.Promise;\n  var fetch = global.fetch;\n  var Response = global.Response;\n  var TextDecoder = global.TextDecoder;\n  var TextEncoder = global.TextEncoder;\n  var AbortController = global.AbortController;\n\n  if (typeof window !== \"undefined\" && typeof document !== \"undefined\" && !(\"readyState\" in document) && document.body == null) { // Firefox 2\n    document.readyState = \"loading\";\n    window.addEventListener(\"load\", function (event) {\n      document.readyState = \"complete\";\n    }, false);\n  }\n\n  if (XMLHttpRequest == null && ActiveXObject != null) { // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest_in_IE6\n    XMLHttpRequest = function () {\n      return new ActiveXObject(\"Microsoft.XMLHTTP\");\n    };\n  }\n\n  if (Object.create == undefined) {\n    Object.create = function (C) {\n      function F(){}\n      F.prototype = C;\n      return new F();\n    };\n  }\n\n  if (!Date.now) {\n    Date.now = function now() {\n      return new Date().getTime();\n    };\n  }\n\n  // see #118 (Promise#finally with polyfilled Promise)\n  // see #123 (data URLs crash Edge)\n  // see #125 (CSP violations)\n  // see pull/#138\n  // => No way to polyfill Promise#finally\n\n  if (AbortController == undefined) {\n    var originalFetch2 = fetch;\n    fetch = function (url, options) {\n      var signal = options.signal;\n      return originalFetch2(url, {headers: options.headers, credentials: options.credentials, cache: options.cache}).then(function (response) {\n        var reader = response.body.getReader();\n        signal._reader = reader;\n        if (signal._aborted) {\n          signal._reader.cancel();\n        }\n        return {\n          status: response.status,\n          statusText: response.statusText,\n          headers: response.headers,\n          body: {\n            getReader: function () {\n              return reader;\n            }\n          }\n        };\n      });\n    };\n    AbortController = function () {\n      this.signal = {\n        _reader: null,\n        _aborted: false\n      };\n      this.abort = function () {\n        if (this.signal._reader != null) {\n          this.signal._reader.cancel();\n        }\n        this.signal._aborted = true;\n      };\n    };\n  }\n\n  function TextDecoderPolyfill() {\n    this.bitsNeeded = 0;\n    this.codePoint = 0;\n  }\n\n  TextDecoderPolyfill.prototype.decode = function (octets) {\n    function valid(codePoint, shift, octetsCount) {\n      if (octetsCount === 1) {\n        return codePoint >= 0x0080 >> shift && codePoint << shift <= 0x07FF;\n      }\n      if (octetsCount === 2) {\n        return codePoint >= 0x0800 >> shift && codePoint << shift <= 0xD7FF || codePoint >= 0xE000 >> shift && codePoint << shift <= 0xFFFF;\n      }\n      if (octetsCount === 3) {\n        return codePoint >= 0x010000 >> shift && codePoint << shift <= 0x10FFFF;\n      }\n      throw new Error();\n    }\n    function octetsCount(bitsNeeded, codePoint) {\n      if (bitsNeeded === 6 * 1) {\n        return codePoint >> 6 > 15 ? 3 : codePoint > 31 ? 2 : 1;\n      }\n      if (bitsNeeded === 6 * 2) {\n        return codePoint > 15 ? 3 : 2;\n      }\n      if (bitsNeeded === 6 * 3) {\n        return 3;\n      }\n      throw new Error();\n    }\n    var REPLACER = 0xFFFD;\n    var string = \"\";\n    var bitsNeeded = this.bitsNeeded;\n    var codePoint = this.codePoint;\n    for (var i = 0; i < octets.length; i += 1) {\n      var octet = octets[i];\n      if (bitsNeeded !== 0) {\n        if (octet < 128 || octet > 191 || !valid(codePoint << 6 | octet & 63, bitsNeeded - 6, octetsCount(bitsNeeded, codePoint))) {\n          bitsNeeded = 0;\n          codePoint = REPLACER;\n          string += String.fromCharCode(codePoint);\n        }\n      }\n      if (bitsNeeded === 0) {\n        if (octet >= 0 && octet <= 127) {\n          bitsNeeded = 0;\n          codePoint = octet;\n        } else if (octet >= 192 && octet <= 223) {\n          bitsNeeded = 6 * 1;\n          codePoint = octet & 31;\n        } else if (octet >= 224 && octet <= 239) {\n          bitsNeeded = 6 * 2;\n          codePoint = octet & 15;\n        } else if (octet >= 240 && octet <= 247) {\n          bitsNeeded = 6 * 3;\n          codePoint = octet & 7;\n        } else {\n          bitsNeeded = 0;\n          codePoint = REPLACER;\n        }\n        if (bitsNeeded !== 0 && !valid(codePoint, bitsNeeded, octetsCount(bitsNeeded, codePoint))) {\n          bitsNeeded = 0;\n          codePoint = REPLACER;\n        }\n      } else {\n        bitsNeeded -= 6;\n        codePoint = codePoint << 6 | octet & 63;\n      }\n      if (bitsNeeded === 0) {\n        if (codePoint <= 0xFFFF) {\n          string += String.fromCharCode(codePoint);\n        } else {\n          string += String.fromCharCode(0xD800 + (codePoint - 0xFFFF - 1 >> 10));\n          string += String.fromCharCode(0xDC00 + (codePoint - 0xFFFF - 1 & 0x3FF));\n        }\n      }\n    }\n    this.bitsNeeded = bitsNeeded;\n    this.codePoint = codePoint;\n    return string;\n  };\n\n  // Firefox < 38 throws an error with stream option\n  var supportsStreamOption = function () {\n    try {\n      return new TextDecoder().decode(new TextEncoder().encode(\"test\"), {stream: true}) === \"test\";\n    } catch (error) {\n      console.debug(\"TextDecoder does not support streaming option. Using polyfill instead: \" + error);\n    }\n    return false;\n  };\n\n  // IE, Edge\n  if (TextDecoder == undefined || TextEncoder == undefined || !supportsStreamOption()) {\n    TextDecoder = TextDecoderPolyfill;\n  }\n\n  var k = function () {\n  };\n\n  function XHRWrapper(xhr) {\n    this.withCredentials = false;\n    this.readyState = 0;\n    this.status = 0;\n    this.statusText = \"\";\n    this.responseText = \"\";\n    this.onprogress = k;\n    this.onload = k;\n    this.onerror = k;\n    this.onreadystatechange = k;\n    this._contentType = \"\";\n    this._xhr = xhr;\n    this._sendTimeout = 0;\n    this._abort = k;\n  }\n\n  XHRWrapper.prototype.open = function (method, url) {\n    this._abort(true);\n\n    var that = this;\n    var xhr = this._xhr;\n    var state = 1;\n    var timeout = 0;\n\n    this._abort = function (silent) {\n      if (that._sendTimeout !== 0) {\n        clearTimeout(that._sendTimeout);\n        that._sendTimeout = 0;\n      }\n      if (state === 1 || state === 2 || state === 3) {\n        state = 4;\n        xhr.onload = k;\n        xhr.onerror = k;\n        xhr.onabort = k;\n        xhr.onprogress = k;\n        xhr.onreadystatechange = k;\n        // IE 8 - 9: XDomainRequest#abort() does not fire any event\n        // Opera < 10: XMLHttpRequest#abort() does not fire any event\n        xhr.abort();\n        if (timeout !== 0) {\n          clearTimeout(timeout);\n          timeout = 0;\n        }\n        if (!silent) {\n          that.readyState = 4;\n          that.onabort(null);\n          that.onreadystatechange();\n        }\n      }\n      state = 0;\n    };\n\n    var onStart = function () {\n      if (state === 1) {\n        //state = 2;\n        var status = 0;\n        var statusText = \"\";\n        var contentType = undefined;\n        if (!(\"contentType\" in xhr)) {\n          try {\n            status = xhr.status;\n            statusText = xhr.statusText;\n            contentType = xhr.getResponseHeader(\"Content-Type\");\n          } catch (error) {\n            // IE < 10 throws exception for `xhr.status` when xhr.readyState === 2 || xhr.readyState === 3\n            // Opera < 11 throws exception for `xhr.status` when xhr.readyState === 2\n            // https://bugs.webkit.org/show_bug.cgi?id=29121\n            status = 0;\n            statusText = \"\";\n            contentType = undefined;\n            // Firefox < 14, Chrome ?, Safari ?\n            // https://bugs.webkit.org/show_bug.cgi?id=29658\n            // https://bugs.webkit.org/show_bug.cgi?id=77854\n          }\n        } else {\n          status = 200;\n          statusText = \"OK\";\n          contentType = xhr.contentType;\n        }\n        if (status !== 0) {\n          state = 2;\n          that.readyState = 2;\n          that.status = status;\n          that.statusText = statusText;\n          that._contentType = contentType;\n          that.onreadystatechange();\n        }\n      }\n    };\n    var onProgress = function () {\n      onStart();\n      if (state === 2 || state === 3) {\n        state = 3;\n        var responseText = \"\";\n        try {\n          responseText = xhr.responseText;\n        } catch (error) {\n          // IE 8 - 9 with XMLHttpRequest\n        }\n        that.readyState = 3;\n        that.responseText = responseText;\n        that.onprogress();\n      }\n    };\n    var onFinish = function (type, event) {\n      if (event == null || event.preventDefault == null) {\n        event = {\n          preventDefault: k\n        };\n      }\n      // Firefox 52 fires \"readystatechange\" (xhr.readyState === 4) without final \"readystatechange\" (xhr.readyState === 3)\n      // IE 8 fires \"onload\" without \"onprogress\"\n      onProgress();\n      if (state === 1 || state === 2 || state === 3) {\n        state = 4;\n        if (timeout !== 0) {\n          clearTimeout(timeout);\n          timeout = 0;\n        }\n        that.readyState = 4;\n        if (type === \"load\") {\n          that.onload(event);\n        } else if (type === \"error\") {\n          that.onerror(event);\n        } else if (type === \"abort\") {\n          that.onabort(event);\n        } else {\n          throw new TypeError();\n        }\n        that.onreadystatechange();\n      }\n    };\n    var onReadyStateChange = function (event) {\n      if (xhr != undefined) { // Opera 12\n        if (xhr.readyState === 4) {\n          if (!(\"onload\" in xhr) || !(\"onerror\" in xhr) || !(\"onabort\" in xhr)) {\n            onFinish(xhr.responseText === \"\" ? \"error\" : \"load\", event);\n          }\n        } else if (xhr.readyState === 3) {\n          if (!(\"onprogress\" in xhr)) { // testing XMLHttpRequest#responseText too many times is too slow in IE 11\n            // and in Firefox 3.6\n            onProgress();\n          }\n        } else if (xhr.readyState === 2) {\n          onStart();\n        }\n      }\n    };\n    var onTimeout = function () {\n      timeout = setTimeout(function () {\n        onTimeout();\n      }, 500);\n      if (xhr.readyState === 3) {\n        onProgress();\n      }\n    };\n\n    // XDomainRequest#abort removes onprogress, onerror, onload\n    if (\"onload\" in xhr) {\n      xhr.onload = function (event) {\n        onFinish(\"load\", event);\n      };\n    }\n    if (\"onerror\" in xhr) {\n      xhr.onerror = function (event) {\n        onFinish(\"error\", event);\n      };\n    }\n    // improper fix to match Firefox behaviour, but it is better than just ignore abort\n    // see https://bugzilla.mozilla.org/show_bug.cgi?id=768596\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=880200\n    // https://code.google.com/p/chromium/issues/detail?id=153570\n    // IE 8 fires \"onload\" without \"onprogress\n    if (\"onabort\" in xhr) {\n      xhr.onabort = function (event) {\n        onFinish(\"abort\", event);\n      };\n    }\n\n    if (\"onprogress\" in xhr) {\n      xhr.onprogress = onProgress;\n    }\n\n    // IE 8 - 9 (XMLHTTPRequest)\n    // Opera < 12\n    // Firefox < 3.5\n    // Firefox 3.5 - 3.6 - ? < 9.0\n    // onprogress is not fired sometimes or delayed\n    // see also #64 (significant lag in IE 11)\n    if (\"onreadystatechange\" in xhr) {\n      xhr.onreadystatechange = function (event) {\n        onReadyStateChange(event);\n      };\n    }\n\n    if (\"contentType\" in xhr || !(\"ontimeout\" in XMLHttpRequest.prototype)) {\n      url += (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + \"padding=true\";\n    }\n    xhr.open(method, url, true);\n\n    if (\"readyState\" in xhr) {\n      // workaround for Opera 12 issue with \"progress\" events\n      // #91 (XMLHttpRequest onprogress not fired for streaming response in Edge 14-15-?)\n      timeout = setTimeout(function () {\n        onTimeout();\n      }, 0);\n    }\n  };\n  XHRWrapper.prototype.abort = function () {\n    this._abort(false);\n  };\n  XHRWrapper.prototype.getResponseHeader = function (name) {\n    return this._contentType;\n  };\n  XHRWrapper.prototype.setRequestHeader = function (name, value) {\n    var xhr = this._xhr;\n    if (\"setRequestHeader\" in xhr) {\n      xhr.setRequestHeader(name, value);\n    }\n  };\n  XHRWrapper.prototype.getAllResponseHeaders = function () {\n    // XMLHttpRequest#getAllResponseHeaders returns null for CORS requests in Firefox 3.6.28\n    return this._xhr.getAllResponseHeaders != undefined ? this._xhr.getAllResponseHeaders() || \"\" : \"\";\n  };\n  XHRWrapper.prototype.send = function () {\n    // loading indicator in Safari < ? (6), Chrome < 14, Firefox\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=736723\n    if ((!(\"ontimeout\" in XMLHttpRequest.prototype) || (!(\"sendAsBinary\" in XMLHttpRequest.prototype) && !(\"mozAnon\" in XMLHttpRequest.prototype))) &&\n        document != undefined &&\n        document.readyState != undefined &&\n        document.readyState !== \"complete\") {\n      var that = this;\n      that._sendTimeout = setTimeout(function () {\n        that._sendTimeout = 0;\n        that.send();\n      }, 4);\n      return;\n    }\n\n    var xhr = this._xhr;\n    // withCredentials should be set after \"open\" for Safari and Chrome (< 19 ?)\n    if (\"withCredentials\" in xhr) {\n      xhr.withCredentials = this.withCredentials;\n    }\n    try {\n      // xhr.send(); throws \"Not enough arguments\" in Firefox 3.0\n      xhr.send(undefined);\n    } catch (error1) {\n      // Safari 5.1.7, Opera 12\n      throw error1;\n    }\n  };\n\n  function toLowerCase(name) {\n    return name.replace(/[A-Z]/g, function (c) {\n      return String.fromCharCode(c.charCodeAt(0) + 0x20);\n    });\n  }\n\n  function HeadersPolyfill(all) {\n    // Get headers: implemented according to mozilla's example code: https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\n    var map = Object.create(null);\n    var array = all.split(\"\\r\\n\");\n    for (var i = 0; i < array.length; i += 1) {\n      var line = array[i];\n      var parts = line.split(\": \");\n      var name = parts.shift();\n      var value = parts.join(\": \");\n      map[toLowerCase(name)] = value;\n    }\n    this._map = map;\n  }\n  HeadersPolyfill.prototype.get = function (name) {\n    return this._map[toLowerCase(name)];\n  };\n\n  if (XMLHttpRequest != null && XMLHttpRequest.HEADERS_RECEIVED == null) { // IE < 9, Firefox 3.6\n    XMLHttpRequest.HEADERS_RECEIVED = 2;\n  }\n\n  function XHRTransport() {\n  }\n\n  XHRTransport.prototype.open = function (xhr, onStartCallback, onProgressCallback, onFinishCallback, url, withCredentials, headers) {\n    xhr.open(\"GET\", url);\n    var offset = 0;\n    xhr.onprogress = function () {\n      var responseText = xhr.responseText;\n      var chunk = responseText.slice(offset);\n      offset += chunk.length;\n      onProgressCallback(chunk);\n    };\n    xhr.onerror = function (event) {\n      event.preventDefault();\n      onFinishCallback(new Error(\"NetworkError\"));\n    };\n    xhr.onload = function () {\n      onFinishCallback(null);\n    };\n    xhr.onabort = function () {\n      onFinishCallback(null);\n    };\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState === XMLHttpRequest.HEADERS_RECEIVED) {\n        var status = xhr.status;\n        var statusText = xhr.statusText;\n        var contentType = xhr.getResponseHeader(\"Content-Type\");\n        var headers = xhr.getAllResponseHeaders();\n        onStartCallback(status, statusText, contentType, new HeadersPolyfill(headers));\n      }\n    };\n    xhr.withCredentials = withCredentials;\n    for (var name in headers) {\n      if (Object.prototype.hasOwnProperty.call(headers, name)) {\n        xhr.setRequestHeader(name, headers[name]);\n      }\n    }\n    xhr.send();\n    return xhr;\n  };\n\n  function HeadersWrapper(headers) {\n    this._headers = headers;\n  }\n  HeadersWrapper.prototype.get = function (name) {\n    return this._headers.get(name);\n  };\n\n  function FetchTransport() {\n  }\n\n  FetchTransport.prototype.open = function (xhr, onStartCallback, onProgressCallback, onFinishCallback, url, withCredentials, headers) {\n    var reader = null;\n    var controller = new AbortController();\n    var signal = controller.signal;\n    var textDecoder = new TextDecoder();\n    fetch(url, {\n      headers: headers,\n      credentials: withCredentials ? \"include\" : \"same-origin\",\n      signal: signal,\n      cache: \"no-store\"\n    }).then(function (response) {\n      reader = response.body.getReader();\n      onStartCallback(response.status, response.statusText, response.headers.get(\"Content-Type\"), new HeadersWrapper(response.headers));\n      // see https://github.com/promises-aplus/promises-spec/issues/179\n      return new Promise(function (resolve, reject) {\n        var readNextChunk = function () {\n          reader.read().then(function (result) {\n            if (result.done) {\n              //Note: bytes in textDecoder are ignored\n              resolve(undefined);\n            } else {\n              var chunk = textDecoder.decode(result.value, {stream: true});\n              onProgressCallback(chunk);\n              readNextChunk();\n            }\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        };\n        readNextChunk();\n      });\n    })[\"catch\"](function (error) {\n      if (error.name === \"AbortError\") {\n        return undefined;\n      } else {\n        return error;\n      }\n    }).then(function (error) {\n      onFinishCallback(error);\n    });\n    return {\n      abort: function () {\n        if (reader != null) {\n          reader.cancel(); // https://bugzilla.mozilla.org/show_bug.cgi?id=1583815\n        }\n        controller.abort();\n      }\n    };\n  };\n\n  function EventTarget() {\n    this._listeners = Object.create(null);\n  }\n\n  function throwError(e) {\n    setTimeout(function () {\n      throw e;\n    }, 0);\n  }\n\n  EventTarget.prototype.dispatchEvent = function (event) {\n    event.target = this;\n    var typeListeners = this._listeners[event.type];\n    if (typeListeners != undefined) {\n      var length = typeListeners.length;\n      for (var i = 0; i < length; i += 1) {\n        var listener = typeListeners[i];\n        try {\n          if (typeof listener.handleEvent === \"function\") {\n            listener.handleEvent(event);\n          } else {\n            listener.call(this, event);\n          }\n        } catch (e) {\n          throwError(e);\n        }\n      }\n    }\n  };\n  EventTarget.prototype.addEventListener = function (type, listener) {\n    type = String(type);\n    var listeners = this._listeners;\n    var typeListeners = listeners[type];\n    if (typeListeners == undefined) {\n      typeListeners = [];\n      listeners[type] = typeListeners;\n    }\n    var found = false;\n    for (var i = 0; i < typeListeners.length; i += 1) {\n      if (typeListeners[i] === listener) {\n        found = true;\n      }\n    }\n    if (!found) {\n      typeListeners.push(listener);\n    }\n  };\n  EventTarget.prototype.removeEventListener = function (type, listener) {\n    type = String(type);\n    var listeners = this._listeners;\n    var typeListeners = listeners[type];\n    if (typeListeners != undefined) {\n      var filtered = [];\n      for (var i = 0; i < typeListeners.length; i += 1) {\n        if (typeListeners[i] !== listener) {\n          filtered.push(typeListeners[i]);\n        }\n      }\n      if (filtered.length === 0) {\n        delete listeners[type];\n      } else {\n        listeners[type] = filtered;\n      }\n    }\n  };\n\n  function Event(type) {\n    this.type = type;\n    this.target = undefined;\n  }\n\n  function MessageEvent(type, options) {\n    Event.call(this, type);\n    this.data = options.data;\n    this.lastEventId = options.lastEventId;\n  }\n\n  MessageEvent.prototype = Object.create(Event.prototype);\n\n  function ConnectionEvent(type, options) {\n    Event.call(this, type);\n    this.status = options.status;\n    this.statusText = options.statusText;\n    this.headers = options.headers;\n  }\n\n  ConnectionEvent.prototype = Object.create(Event.prototype);\n\n  function ErrorEvent(type, options) {\n    Event.call(this, type);\n    this.error = options.error;\n  }\n\n  ErrorEvent.prototype = Object.create(Event.prototype);\n\n  var WAITING = -1;\n  var CONNECTING = 0;\n  var OPEN = 1;\n  var CLOSED = 2;\n\n  var AFTER_CR = -1;\n  var FIELD_START = 0;\n  var FIELD = 1;\n  var VALUE_START = 2;\n  var VALUE = 3;\n\n  var contentTypeRegExp = /^text\\/event\\-stream(;.*)?$/i;\n\n  var MINIMUM_DURATION = 1000;\n  var MAXIMUM_DURATION = 18000000;\n\n  var parseDuration = function (value, def) {\n    var n = value == null ? def : parseInt(value, 10);\n    if (n !== n) {\n      n = def;\n    }\n    return clampDuration(n);\n  };\n  var clampDuration = function (n) {\n    return Math.min(Math.max(n, MINIMUM_DURATION), MAXIMUM_DURATION);\n  };\n\n  var fire = function (that, f, event) {\n    try {\n      if (typeof f === \"function\") {\n        f.call(that, event);\n      }\n    } catch (e) {\n      throwError(e);\n    }\n  };\n\n  function EventSourcePolyfill(url, options) {\n    EventTarget.call(this);\n    options = options || {};\n\n    this.onopen = undefined;\n    this.onmessage = undefined;\n    this.onerror = undefined;\n\n    this.url = undefined;\n    this.readyState = undefined;\n    this.withCredentials = undefined;\n    this.headers = undefined;\n\n    this._close = undefined;\n\n    start(this, url, options);\n  }\n\n  function getBestXHRTransport() {\n    return (XMLHttpRequest != undefined && (\"withCredentials\" in XMLHttpRequest.prototype)) || XDomainRequest == undefined\n        ? new XMLHttpRequest()\n        : new XDomainRequest();\n  }\n\n  var isFetchSupported = fetch != undefined && Response != undefined && \"body\" in Response.prototype;\n\n  function start(es, url, options) {\n    url = String(url);\n    var withCredentials = Boolean(options.withCredentials);\n    var lastEventIdQueryParameterName = options.lastEventIdQueryParameterName || \"lastEventId\";\n\n    var initialRetry = clampDuration(1000);\n    var heartbeatTimeout = parseDuration(options.heartbeatTimeout, 45000);\n\n    var lastEventId = \"\";\n    var retry = initialRetry;\n    var wasActivity = false;\n    var textLength = 0;\n    var headers = options.headers || {};\n    var TransportOption = options.Transport;\n    var xhr = isFetchSupported && TransportOption == undefined ? undefined : new XHRWrapper(TransportOption != undefined ? new TransportOption() : getBestXHRTransport());\n    var transport = TransportOption != null && typeof TransportOption !== \"string\" ? new TransportOption() : (xhr == undefined ? new FetchTransport() : new XHRTransport());\n    var abortController = undefined;\n    var timeout = 0;\n    var currentState = WAITING;\n    var dataBuffer = \"\";\n    var lastEventIdBuffer = \"\";\n    var eventTypeBuffer = \"\";\n\n    var textBuffer = \"\";\n    var state = FIELD_START;\n    var fieldStart = 0;\n    var valueStart = 0;\n\n    var onStart = function (status, statusText, contentType, headers) {\n      if (currentState === CONNECTING) {\n        if (status === 200 && contentType != undefined && contentTypeRegExp.test(contentType)) {\n          currentState = OPEN;\n          wasActivity = Date.now();\n          retry = initialRetry;\n          es.readyState = OPEN;\n          var event = new ConnectionEvent(\"open\", {\n            status: status,\n            statusText: statusText,\n            headers: headers\n          });\n          es.dispatchEvent(event);\n          fire(es, es.onopen, event);\n        } else {\n          var message = \"\";\n          if (status !== 200) {\n            if (statusText) {\n              statusText = statusText.replace(/\\s+/g, \" \");\n            }\n            message = \"EventSource's response has a status \" + status + \" \" + statusText + \" that is not 200. Aborting the connection.\";\n          } else {\n            message = \"EventSource's response has a Content-Type specifying an unsupported type: \" + (contentType == undefined ? \"-\" : contentType.replace(/\\s+/g, \" \")) + \". Aborting the connection.\";\n          }\n          close();\n          var event = new ConnectionEvent(\"error\", {\n            status: status,\n            statusText: statusText,\n            headers: headers\n          });\n          es.dispatchEvent(event);\n          fire(es, es.onerror, event);\n          console.error(message);\n        }\n      }\n    };\n\n    var onProgress = function (textChunk) {\n      if (currentState === OPEN) {\n        var n = -1;\n        for (var i = 0; i < textChunk.length; i += 1) {\n          var c = textChunk.charCodeAt(i);\n          if (c === \"\\n\".charCodeAt(0) || c === \"\\r\".charCodeAt(0)) {\n            n = i;\n          }\n        }\n        var chunk = (n !== -1 ? textBuffer : \"\") + textChunk.slice(0, n + 1);\n        textBuffer = (n === -1 ? textBuffer : \"\") + textChunk.slice(n + 1);\n        if (textChunk !== \"\") {\n          wasActivity = Date.now();\n          textLength += textChunk.length;\n        }\n        for (var position = 0; position < chunk.length; position += 1) {\n          var c = chunk.charCodeAt(position);\n          if (state === AFTER_CR && c === \"\\n\".charCodeAt(0)) {\n            state = FIELD_START;\n          } else {\n            if (state === AFTER_CR) {\n              state = FIELD_START;\n            }\n            if (c === \"\\r\".charCodeAt(0) || c === \"\\n\".charCodeAt(0)) {\n              if (state !== FIELD_START) {\n                if (state === FIELD) {\n                  valueStart = position + 1;\n                }\n                var field = chunk.slice(fieldStart, valueStart - 1);\n                var value = chunk.slice(valueStart + (valueStart < position && chunk.charCodeAt(valueStart) === \" \".charCodeAt(0) ? 1 : 0), position);\n                if (field === \"data\") {\n                  dataBuffer += \"\\n\";\n                  dataBuffer += value;\n                } else if (field === \"id\") {\n                  lastEventIdBuffer = value;\n                } else if (field === \"event\") {\n                  eventTypeBuffer = value;\n                } else if (field === \"retry\") {\n                  initialRetry = parseDuration(value, initialRetry);\n                  retry = initialRetry;\n                } else if (field === \"heartbeatTimeout\") {\n                  heartbeatTimeout = parseDuration(value, heartbeatTimeout);\n                  if (timeout !== 0) {\n                    clearTimeout(timeout);\n                    timeout = setTimeout(function () {\n                      onTimeout();\n                    }, heartbeatTimeout);\n                  }\n                }\n              }\n              if (state === FIELD_START) {\n                if (dataBuffer !== \"\") {\n                  lastEventId = lastEventIdBuffer;\n                  if (eventTypeBuffer === \"\") {\n                    eventTypeBuffer = \"message\";\n                  }\n                  var event = new MessageEvent(eventTypeBuffer, {\n                    data: dataBuffer.slice(1),\n                    lastEventId: lastEventIdBuffer\n                  });\n                  es.dispatchEvent(event);\n                  if (eventTypeBuffer === \"open\") {\n                    fire(es, es.onopen, event);\n                  } else if (eventTypeBuffer === \"message\") {\n                    fire(es, es.onmessage, event);\n                  } else if (eventTypeBuffer === \"error\") {\n                    fire(es, es.onerror, event);\n                  }\n                  if (currentState === CLOSED) {\n                    return;\n                  }\n                }\n                dataBuffer = \"\";\n                eventTypeBuffer = \"\";\n              }\n              state = c === \"\\r\".charCodeAt(0) ? AFTER_CR : FIELD_START;\n            } else {\n              if (state === FIELD_START) {\n                fieldStart = position;\n                state = FIELD;\n              }\n              if (state === FIELD) {\n                if (c === \":\".charCodeAt(0)) {\n                  valueStart = position + 1;\n                  state = VALUE_START;\n                }\n              } else if (state === VALUE_START) {\n                state = VALUE;\n              }\n            }\n          }\n        }\n      }\n    };\n\n    var onFinish = function (error) {\n      if (currentState === OPEN || currentState === CONNECTING) {\n        currentState = WAITING;\n        if (timeout !== 0) {\n          clearTimeout(timeout);\n          timeout = 0;\n        }\n        timeout = setTimeout(function () {\n          onTimeout();\n        }, retry);\n        retry = clampDuration(Math.min(initialRetry * 16, retry * 2));\n\n        es.readyState = CONNECTING;\n      } else if (currentState === CLOSED && error != undefined) {\n        // Only fire error event when stream is closed\n        console.error(error);\n        var event = new ErrorEvent(\"error\", {error: error});\n        es.dispatchEvent(event);\n        fire(es, es.onerror, event);\n      }\n    };\n\n    var close = function () {\n      currentState = CLOSED;\n      if (abortController != undefined) {\n        abortController.abort();\n        abortController = undefined;\n      }\n      if (timeout !== 0) {\n        clearTimeout(timeout);\n        timeout = 0;\n      }\n      es.readyState = CLOSED;\n    };\n\n    var onTimeout = function () {\n      timeout = 0;\n\n      if (currentState !== WAITING) {\n        if (!wasActivity && abortController != undefined) {\n          onFinish(new Error(\"No activity within \" + heartbeatTimeout + \" milliseconds.\" + \" \" + (currentState === CONNECTING ? \"No response received.\" : textLength + \" chars received.\") + \" \" + \"Reconnecting.\"));\n          if (abortController != undefined) {\n            abortController.abort();\n            abortController = undefined;\n          }\n        } else {\n          var nextHeartbeat = Math.max((wasActivity || Date.now()) + heartbeatTimeout - Date.now(), 1);\n          wasActivity = false;\n          timeout = setTimeout(function () {\n            onTimeout();\n          }, nextHeartbeat);\n        }\n        return;\n      }\n\n      wasActivity = false;\n      textLength = 0;\n      timeout = setTimeout(function () {\n        onTimeout();\n      }, heartbeatTimeout);\n\n      currentState = CONNECTING;\n      dataBuffer = \"\";\n      eventTypeBuffer = \"\";\n      lastEventIdBuffer = lastEventId;\n      textBuffer = \"\";\n      fieldStart = 0;\n      valueStart = 0;\n      state = FIELD_START;\n\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=428916\n      // Request header field Last-Event-ID is not allowed by Access-Control-Allow-Headers.\n      var requestURL = url;\n      if (url.slice(0, 5) !== \"data:\" && url.slice(0, 5) !== \"blob:\") {\n        if (lastEventId !== \"\") {\n          // Remove the lastEventId parameter if it's already part of the request URL.\n          var i = url.indexOf(\"?\");\n          requestURL = i === -1 ? url : url.slice(0, i + 1) + url.slice(i + 1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g, function (p, paramName) {\n            return paramName === lastEventIdQueryParameterName ? '' : p;\n          });\n          // Append the current lastEventId to the request URL.\n          requestURL += (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + lastEventIdQueryParameterName +\"=\" + encodeURIComponent(lastEventId);\n        }\n      }\n      var withCredentials = es.withCredentials;\n      var requestHeaders = {};\n      requestHeaders[\"Accept\"] = \"text/event-stream\";\n      var headers = es.headers;\n      if (headers != undefined) {\n        for (var name in headers) {\n          if (Object.prototype.hasOwnProperty.call(headers, name)) {\n            requestHeaders[name] = headers[name];\n          }\n        }\n      }\n      try {\n        abortController = transport.open(xhr, onStart, onProgress, onFinish, requestURL, withCredentials, requestHeaders);\n      } catch (error) {\n        close();\n        throw error;\n      }\n    };\n\n    es.url = url;\n    es.readyState = CONNECTING;\n    es.withCredentials = withCredentials;\n    es.headers = headers;\n    es._close = close;\n\n    onTimeout();\n  }\n\n  EventSourcePolyfill.prototype = Object.create(EventTarget.prototype);\n  EventSourcePolyfill.prototype.CONNECTING = CONNECTING;\n  EventSourcePolyfill.prototype.OPEN = OPEN;\n  EventSourcePolyfill.prototype.CLOSED = CLOSED;\n  EventSourcePolyfill.prototype.close = function () {\n    this._close();\n  };\n\n  EventSourcePolyfill.CONNECTING = CONNECTING;\n  EventSourcePolyfill.OPEN = OPEN;\n  EventSourcePolyfill.CLOSED = CLOSED;\n  EventSourcePolyfill.prototype.withCredentials = undefined;\n\n  var R = NativeEventSource\n  if (XMLHttpRequest != undefined && (NativeEventSource == undefined || !(\"withCredentials\" in NativeEventSource.prototype))) {\n    // Why replace a native EventSource ?\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=444328\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=831392\n    // https://code.google.com/p/chromium/issues/detail?id=260144\n    // https://code.google.com/p/chromium/issues/detail?id=225654\n    // ...\n    R = EventSourcePolyfill;\n  }\n\n  (function (factory) {\n    if (typeof module === \"object\" && typeof module.exports === \"object\") {\n      var v = factory(exports);\n      if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === \"function\" && define.amd) {\n      define([\"exports\"], factory);\n    }\n    else {\n      factory(global);\n    }\n  })(function (exports) {\n    exports.EventSourcePolyfill = EventSourcePolyfill;\n    exports.NativeEventSource = NativeEventSource;\n    exports.EventSource = R;\n  });\n}(typeof globalThis === 'undefined' ? (typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : this) : globalThis));\n", "import jwt_decode from 'jwt-decode'\nimport mitt from 'mitt'\nimport { EventSourcePolyfill } from './eventsource'\nimport type {\n  Options,\n  Target,\n  StreamEvent,\n  EventCallback,\n  Result,\n  Evaluation,\n  VariationValue,\n  MetricsInfo\n} from './types'\nimport { Event } from './types'\nimport { logError, defaultOptions, METRICS_FLUSH_INTERVAL } from './utils'\n\nconst SDK_VERSION = '1.4.1'\nconst METRICS_VALID_COUNT_INTERVAL = 500\nconst fetch = globalThis.fetch\nconst EventSource = EventSourcePolyfill\n\n// Flag to detect is Proxy is supported (not under IE 11)\nconst hasProxy = !!globalThis.Proxy\n\nconst convertValue = (evaluation: Evaluation) => {\n  let { value } = evaluation\n\n  try {\n    switch (evaluation.kind.toLowerCase()) {\n      case 'int':\n      case 'number':\n        value = Number(value)\n        break\n      case 'boolean':\n        value = value.toString().toLowerCase() === 'true'\n        break\n      case 'json':\n        value = JSON.parse(value as string)\n        break\n    }\n  } catch (error) {\n    logError(error)\n  }\n\n  return value\n}\n\nconst initialize = (apiKey: string, target: Target, options: Options): Result => {\n  let environment: string\n  let clusterIdentifier: string\n  let eventSource: any\n  let jwtToken: string\n  let metricsSchedulerId: number\n  let metricsCollectorEnabled = true\n  const stopMetricsCollector = () => {\n    metricsCollectorEnabled = false\n  }\n  const startMetricsCollector = () => {\n    metricsCollectorEnabled = true\n  }\n  let metrics: Array<MetricsInfo> = []\n  const eventBus = mitt()\n  const configurations = { ...defaultOptions, ...options }\n  const logDebug = (message: string, ...args: any[]) => {\n    if (configurations.debug) {\n      // tslint:disable-next-line:no-console\n      console.debug(`[FF-SDK] ${message}`, ...args)\n    }\n  }\n  const updateMetrics = (metricsInfo: MetricsInfo) => {\n    if (metricsCollectorEnabled) {\n      const now = Date.now()\n\n      if (now - metricsInfo.lastAccessed > METRICS_VALID_COUNT_INTERVAL) {\n        metricsInfo.count++\n        metricsInfo.lastAccessed = now\n      }\n    }\n  }\n\n  globalThis.onbeforeunload = () => {\n    if (metrics.length && globalThis.localStorage) {\n      stopMetricsCollector()\n      globalThis.localStorage.HARNESS_FF_METRICS = JSON.stringify(metrics)\n      startMetricsCollector()\n    }\n  }\n\n  const authenticate = async (clientID: string, configuration: Options): Promise<string> => {\n    const response = await fetch(`${configuration.baseUrl}/client/auth`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ apiKey: clientID, target })\n    })\n\n    const data: { authToken: string } = await response.json()\n\n    return data.authToken\n  }\n\n  const scheduleSendingMetrics = () => {\n    if (metrics.length) {\n      logDebug('Sending metrics...', { metrics, evaluations })\n      const payload = {\n        metricsData: metrics.map(entry => ({\n          timestamp: Date.now(),\n          count: entry.count,\n          metricsType: 'FFMETRICS',\n          attributes: [\n            {\n              key: 'featureIdentifier',\n              value: entry.featureIdentifier\n            },\n            {\n              key: 'featureName',\n              value: entry.featureIdentifier\n            },\n            {\n              key: 'variationIdentifier',\n              value: entry.variationIdentifier\n            },\n            {\n              key: 'target',\n              value: target.identifier\n            },\n            {\n              key: 'SDK_NAME',\n              value: 'JavaScript'\n            },\n            {\n              key: 'SDK_TYPE',\n              value: 'client'\n            },\n            {\n              key: 'SDK_VERSION',\n              value: SDK_VERSION\n            }\n          ]\n        }))\n      }\n\n      fetch(`${configurations.eventUrl}/metrics/${environment}?cluster=${clusterIdentifier}`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${jwtToken}` },\n        body: JSON.stringify(payload)\n      })\n        .then(() => {\n          metrics = []\n        })\n        .catch(error => {\n          logDebug(error)\n        })\n        .finally(() => {\n          metricsSchedulerId = window.setTimeout(scheduleSendingMetrics, METRICS_FLUSH_INTERVAL)\n        })\n    } else {\n      metricsSchedulerId = window.setTimeout(scheduleSendingMetrics, METRICS_FLUSH_INTERVAL)\n    }\n  }\n\n  let evaluations: Record<string, Evaluation> = {}\n\n  const creatStorage = function () {\n    return hasProxy\n      ? new Proxy(\n          {},\n          {\n            get(_storage, property) {\n              const _value = _storage[property]\n\n              if (_storage.hasOwnProperty(property)) {\n                const featureValue = _storage[property]\n                // TODO/BUG: This logic to collect metrics will fail when two variations have the same value\n                // Need to find a better way\n                const entry = metrics.find(\n                  _entry => _entry.featureIdentifier === property && featureValue === _entry.featureValue\n                )\n\n                if (entry) {\n                  entry.variationIdentifier = evaluations[property as string]?.identifier || ''\n                  updateMetrics(entry)\n                } else {\n                  metrics.push({\n                    featureIdentifier: property as string,\n                    featureValue,\n                    variationIdentifier: evaluations[property as string]?.identifier || '',\n                    count: metricsCollectorEnabled ? 1 : 0,\n                    lastAccessed: Date.now()\n                  })\n                }\n                logDebug(\n                  'Metrics event: Flag:',\n                  property,\n                  'has been read with value:',\n                  featureValue,\n                  'variationIdentifier:',\n                  evaluations[property as string]?.identifier\n                )\n              }\n\n              return _value\n            }\n          }\n        )\n      : {}\n  }\n\n  let storage: Record<string, any> = creatStorage()\n\n  authenticate(apiKey, configurations)\n    .then((token: string) => {\n      jwtToken = token\n      const decoded: { environment: string, clusterIdentifier: string } = jwt_decode(token)\n\n      logDebug('Authenticated', decoded)\n\n      if (globalThis.localStorage && globalThis.localStorage.HARNESS_FF_METRICS) {\n        try {\n          // metrics = JSON.parse(globalThis.localStorage.HARNESS_FF_METRICS)\n          delete globalThis.localStorage.HARNESS_FF_METRICS\n          logDebug('Picking up metrics from previous session')\n        } catch (error) {}\n      }\n\n      metricsSchedulerId = window.setTimeout(scheduleSendingMetrics, METRICS_FLUSH_INTERVAL)\n\n      environment = decoded.environment\n      clusterIdentifier = decoded.clusterIdentifier\n\n      // When authentication is done, fetch all flags\n      fetchFlags()\n        .then(() => {\n          logDebug('Fetch all flags ok', storage)\n        })\n        .then(() => {\n          startStream() // start stream only after we get all evaluations\n        })\n        .then(() => {\n          logDebug('Event stream ready', { storage })\n          eventBus.emit(Event.READY, storage)\n\n          if (!hasProxy) {\n            Object.keys(storage).forEach(key => {\n              metrics.push({\n                featureIdentifier: key,\n                featureValue: storage[key],\n                variationIdentifier: evaluations[key]?.identifier || '',\n                count: metricsCollectorEnabled ? 1 : 0,\n                lastAccessed: Date.now()\n              })\n            })\n          }\n        })\n        .catch(err => {\n          eventBus.emit(Event.ERROR, err)\n        })\n    })\n    .catch(error => {\n      logError('Authentication error: ', error)\n      eventBus.emit(Event.ERROR, error)\n    })\n\n  const fetchFlags = async () => {\n    try {\n      const res = await fetch(\n        `${configurations.baseUrl}/client/env/${environment}/target/${target.identifier}/evaluations?cluster=${clusterIdentifier}`,\n        {\n          headers: {\n            Authorization: `Bearer ${jwtToken}`\n          }\n        }\n      )\n      const data = await res.json()\n\n      data.forEach((_evaluation: Evaluation) => {\n        const _value = convertValue(_evaluation)\n        storage[_evaluation.flag] = _value\n        evaluations[_evaluation.flag] = { ..._evaluation, value: _value }\n      })\n    } catch (error) {\n      logError('Features fetch operation error: ', error)\n      eventBus.emit(Event.ERROR, error)\n      return error\n    }\n  }\n\n  const fetchFlag = async (identifier: string) => {\n    try {\n      const result = await fetch(\n        `${configurations.baseUrl}/client/env/${environment}/target/${target.identifier}/evaluations/${identifier}?cluster=${clusterIdentifier}`,\n        {\n          headers: {\n            Authorization: `Bearer ${jwtToken}`\n          }\n        }\n      )\n\n      if (result.ok) {\n        const flagInfo: Evaluation = await result.json()\n        const _value = convertValue(flagInfo)\n\n        stopMetricsCollector()\n        storage[identifier] = _value\n        evaluations[identifier] = { ...flagInfo, value: _value }\n        startMetricsCollector()\n\n        eventBus.emit(\n          Event.CHANGED,\n          hasProxy\n            ? new Proxy(flagInfo, {\n                get(_flagInfo, property) {\n                  if (_flagInfo.hasOwnProperty(property) && property === 'value') {\n                    // only track metric when value is read\n                    const featureIdentifier = _flagInfo.flag\n                    const featureValue = flagInfo.value\n                    const entry = metrics.find(\n                      _entry => _entry.featureIdentifier === featureIdentifier && _entry.featureValue === featureValue\n                    )\n\n                    if (entry) {\n                      updateMetrics(entry)\n                      entry.variationIdentifier = evaluations[featureIdentifier]?.identifier || ''\n                    } else {\n                      metrics.push({\n                        featureIdentifier,\n                        featureValue: String(featureValue),\n                        variationIdentifier: evaluations[featureIdentifier].identifier || '',\n                        count: metricsCollectorEnabled ? 1 : 0,\n                        lastAccessed: Date.now()\n                      })\n                    }\n                    logDebug(\n                      'Metrics event: Flag',\n                      property,\n                      'has been read with value via stream update',\n                      featureValue\n                    )\n                  }\n\n                  return property === 'value' ? convertValue(flagInfo) : flagInfo[property]\n                }\n              })\n            : {\n                deleted: flagInfo.deleted,\n                flag: flagInfo.flag,\n                value: convertValue(flagInfo)\n              }\n        )\n\n        if (!hasProxy) {\n          const featureIdentifier = flagInfo.flag\n          const entry = metrics.find(\n            _entry => _entry.featureIdentifier === featureIdentifier && _entry.featureValue === flagInfo.value\n          )\n\n          if (entry) {\n            updateMetrics(entry)\n            entry.variationIdentifier = evaluations[featureIdentifier as string]?.identifier || ''\n          } else {\n            metrics.push({\n              featureIdentifier: featureIdentifier as string,\n              featureValue: String(flagInfo.value),\n              variationIdentifier: evaluations[featureIdentifier].identifier || '',\n              count: metricsCollectorEnabled ? 1 : 0,\n              lastAccessed: Date.now()\n            })\n          }\n        }\n      } else {\n        eventBus.emit(Event.ERROR, result)\n      }\n    } catch (error) {\n      logError('Feature fetch operation error: ', error)\n      eventBus.emit(Event.ERROR, error)\n    }\n  }\n\n  const startStream = () => {\n    // TODO: Implement polling when stream is disabled\n    if (!configurations.streamEnabled) {\n      logDebug('Stream is disabled by configuration. Note: Polling is not yet supported')\n      return\n    }\n    eventSource = new EventSource(`${configurations.baseUrl}/stream`, {\n      headers: {\n        Authorization: `Bearer ${jwtToken}`,\n        'API-Key': apiKey\n      }\n    })\n\n    eventSource.onopen = (event: any) => {\n      logDebug('Stream connected', event)\n      eventBus.emit(Event.CONNECTED)\n    }\n\n    eventSource.onclose = (event: any) => {\n      logDebug('Stream disconnected')\n      eventBus.emit(Event.DISCONNECTED)\n    }\n\n    eventSource.onerror = (event: any) => {\n      logError('Stream has issue', event)\n      eventBus.emit('error', event)\n    }\n\n    eventSource.addEventListener('*', (msg: any) => {\n      const event: StreamEvent = JSON.parse(msg.data)\n\n      logDebug('Received event from stream: ', event)\n\n      switch (event.event) {\n        case 'create':\n          setTimeout(() => fetchFlag(event.identifier), 1000) // Wait a bit before fetching evaluation due to https://harness.atlassian.net/browse/FFM-583\n          break\n        case 'patch':\n          fetchFlag(event.identifier)\n          break\n        case 'delete':\n          delete storage[event.identifier]\n          eventBus.emit(Event.CHANGED, { flag: event.identifier, value: undefined, deleted: true })\n          logDebug('Evaluation deleted', { message: event, storage })\n          // TODO: Delete flag from storage\n          break\n      }\n    })\n  }\n\n  const on = (event: Event, callback: EventCallback): void => eventBus.on(event, callback)\n\n  const off = (event?: Event, callback?: EventCallback): void => {\n    if (event) {\n      eventBus.off(event, callback)\n    } else {\n      close()\n    }\n  }\n\n  const variation = (flag: string, defaultValue: any) => {\n    const value = storage[flag]\n\n    if (!hasProxy && value !== undefined) {\n      const featureValue = value\n      const featureIdentifier = flag\n\n      const entry = metrics.find(\n        _entry => _entry.featureIdentifier === featureIdentifier && _entry.featureValue === featureValue\n      )\n\n      if (entry) {\n        updateMetrics(entry)\n        entry.variationIdentifier = evaluations[featureIdentifier as string]?.identifier || ''\n      } else {\n        metrics.push({\n          featureIdentifier: featureIdentifier as string,\n          featureValue,\n          count: metricsCollectorEnabled ? 1 : 0,\n          variationIdentifier: evaluations[featureIdentifier].identifier || '',\n          lastAccessed: Date.now()\n        })\n      }\n    }\n\n    return value !== undefined ? value : defaultValue\n  }\n\n  const close = () => {\n    logDebug('Closing event stream')\n    storage = creatStorage()\n    evaluations = {}\n    clearTimeout(metricsSchedulerId)\n    eventBus.all.clear()\n    eventSource.close()\n  }\n\n  return { on, off, variation, close }\n}\n\nexport { initialize, Options, Target, StreamEvent, Event, EventCallback, Result, Evaluation, VariationValue }\n", "/**\n * The code was extracted from:\n * https://github.com/davidchambers/Base64.js\n */\n\nvar chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\nfunction InvalidCharacterError(message) {\n    this.message = message;\n}\n\nInvalidCharacterError.prototype = new Error();\nInvalidCharacterError.prototype.name = \"InvalidCharacterError\";\n\nfunction polyfill(input) {\n    var str = String(input).replace(/=+$/, \"\");\n    if (str.length % 4 == 1) {\n        throw new InvalidCharacterError(\n            \"'atob' failed: The string to be decoded is not correctly encoded.\"\n        );\n    }\n    for (\n        // initialize result and counters\n        var bc = 0, bs, buffer, idx = 0, output = \"\";\n        // get next character\n        (buffer = str.charAt(idx++));\n        // character found in table? initialize bit storage and add its ascii value;\n        ~buffer &&\n        ((bs = bc % 4 ? bs * 64 + buffer : buffer),\n            // and if not first of each 4 characters,\n            // convert the first 8 bits to one ascii character\n            bc++ % 4) ?\n        (output += String.fromCharCode(255 & (bs >> ((-2 * bc) & 6)))) :\n        0\n    ) {\n        // try to find character in table (0-63, not found => -1)\n        buffer = chars.indexOf(buffer);\n    }\n    return output;\n}\n\nexport default (typeof window !== \"undefined\" &&\n    window.atob &&\n    window.atob.bind(window)) ||\npolyfill;", "import atob from \"./atob\";\n\nfunction b64DecodeUnicode(str) {\n    return decodeURIComponent(\n        atob(str).replace(/(.)/g, function(m, p) {\n            var code = p.charCodeAt(0).toString(16).toUpperCase();\n            if (code.length < 2) {\n                code = \"0\" + code;\n            }\n            return \"%\" + code;\n        })\n    );\n}\n\nexport default function(str) {\n    var output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n        case 0:\n            break;\n        case 2:\n            output += \"==\";\n            break;\n        case 3:\n            output += \"=\";\n            break;\n        default:\n            throw \"Illegal base64url string!\";\n    }\n\n    try {\n        return b64DecodeUnicode(output);\n    } catch (err) {\n        return atob(output);\n    }\n}", "\"use strict\";\n\nimport base64_url_decode from \"./base64_url_decode\";\n\nexport function InvalidTokenError(message) {\n    this.message = message;\n}\n\nInvalidTokenError.prototype = new Error();\nInvalidTokenError.prototype.name = \"InvalidTokenError\";\n\nexport default function(token, options) {\n    if (typeof token !== \"string\") {\n        throw new InvalidTokenError(\"Invalid token specified\");\n    }\n\n    options = options || {};\n    var pos = options.header === true ? 0 : 1;\n    try {\n        return JSON.parse(base64_url_decode(token.split(\".\")[pos]));\n    } catch (e) {\n        throw new InvalidTokenError(\"Invalid token specified: \" + e.message);\n    }\n}", "export type EventType = string | symbol;\n\n// An event handler can take an optional event argument\n// and should not return a value\nexport type Handler<T = any> = (event?: T) => void;\nexport type WildcardHandler = (type: EventType, event?: any) => void;\n\n// An array of all currently registered event handlers for a type\nexport type EventHandlerList = Array<Handler>;\nexport type WildCardEventHandlerList = Array<WildcardHandler>;\n\n// A map of event types and their corresponding event handlers.\nexport type EventHandlerMap = Map<EventType, EventHandlerList | WildCardEventHandlerList>;\n\nexport interface Emitter {\n\tall: EventHandlerMap;\n\n\ton<T = any>(type: EventType, handler: Handler<T>): void;\n\ton(type: '*', handler: WildcardHandler): void;\n\n\toff<T = any>(type: EventType, handler: Handler<T>): void;\n\toff(type: '*', handler: WildcardHandler): void;\n\n\temit<T = any>(type: EventType, event?: T): void;\n\temit(type: '*', event?: any): void;\n}\n\n/**\n * Mitt: Tiny (~200b) functional event emitter / pubsub.\n * @name mitt\n * @returns {Mitt}\n */\nexport default function mitt(all?: EventHandlerMap): Emitter {\n\tall = all || new Map();\n\n\treturn {\n\n\t\t/**\n\t\t * A Map of event names to registered handler functions.\n\t\t */\n\t\tall,\n\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t * @param {string|symbol} type Type of event to listen for, or `\"*\"` for all events\n\t\t * @param {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton<T = any>(type: EventType, handler: Handler<T>) {\n\t\t\tconst handlers = all.get(type);\n\t\t\tconst added = handlers && handlers.push(handler);\n\t\t\tif (!added) {\n\t\t\t\tall.set(type, [handler]);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t * @param {string|symbol} type Type of event to unregister `handler` from, or `\"*\"`\n\t\t * @param {Function} handler Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff<T = any>(type: EventType, handler: Handler<T>) {\n\t\t\tconst handlers = all.get(type);\n\t\t\tif (handlers) {\n\t\t\t\thandlers.splice(handlers.indexOf(handler) >>> 0, 1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `\"*\"` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * Note: Manually firing \"*\" handlers is not supported.\n\t\t *\n\t\t * @param {string|symbol} type The event type to invoke\n\t\t * @param {Any} [evt] Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberOf mitt\n\t\t */\n\t\temit<T = any>(type: EventType, evt: T) {\n\t\t\t((all.get(type) || []) as EventHandlerList).slice().map((handler) => { handler(evt); });\n\t\t\t((all.get('*') || []) as WildCardEventHandlerList).slice().map((handler) => { handler(type, evt); });\n\t\t}\n\t};\n}\n", "export interface Target {\n  identifier: string\n  name?: string\n  anonymous?: boolean\n  attributes?: object\n}\n\nexport interface StreamEvent {\n  event: string\n  domain: string\n  identifier: string\n  version: number\n}\n\nexport enum Event {\n  READY = 'ready',\n  CONNECTED = 'connected',\n  DISCONNECTED = 'disconnected',\n  RECONNECTED = 'reconnected',\n  CHANGED = 'changed',\n  ERROR = 'error'\n}\n\nexport type VariationValue = boolean | string | number | object | undefined\n\nexport interface Evaluation {\n  flag: string          // Feature flag identifier\n  identifier: string    // variation identifier\n  value: VariationValue // variation value\n  kind: string          // boolean | json | string | int\n  deleted?: boolean     // mark that feature flag is deleted\n}\n\nexport type EventCallback = (event?: Evaluation[] | Error) => void\n\nexport interface Result {\n  on: (event: Event, callback: EventCallback) => void\n  off: (event: Event, callback: EventCallback) => void\n  variation: (identifier: string, defaultValue: any) => VariationValue\n  close: () => void\n}\n\nexport interface Options {\n  baseUrl?: string\n  eventUrl?: string\n  streamEnabled?: boolean\n  allAttributesPrivate?: boolean\n  privateAttributeNames?: string[]\n  debug?: boolean\n}\n\nexport interface MetricsInfo {\n  featureIdentifier: string;\n  featureValue: any\n  variationIdentifier: string;\n  count: number\n  lastAccessed: number\n}\n", "import { Options } from './types'\n\nexport const defaultOptions: Options = {\n  debug: false,\n  baseUrl: 'https://config.ff.harness.io/api/1.0',\n  eventUrl: 'https://events.ff.harness.io/api/1.0',\n  streamEnabled: true,\n  allAttributesPrivate: false,\n  privateAttributeNames: []\n}\n\n// tslint:disable-next-line:no-console\nexport const logError = (message: string, ...args: any[]) => console.error(`[FF-SDK] ${message}`, ...args)\n\nexport const METRICS_FLUSH_INTERVAL = 30 * 1000 // Flush metrics every 30 seconds"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA,IAAC,UAAU,QAAQ;AACjB;AAEA,UAAI,cAAa,OAAO;AACxB,UAAI,gBAAe,OAAO;AAC1B,UAAI,iBAAiB,OAAO;AAC5B,UAAI,iBAAiB,OAAO;AAC5B,UAAI,gBAAgB,OAAO;AAC3B,UAAI,oBAAoB,OAAO;AAE/B,UAAI,WAAW,OAAO;AACtB,UAAI,WAAU,OAAO;AACrB,UAAI,SAAQ,OAAO;AACnB,UAAI,WAAW,OAAO;AACtB,UAAI,cAAc,OAAO;AACzB,UAAI,cAAc,OAAO;AACzB,UAAI,kBAAkB,OAAO;AAE7B,UAAI,OAAO,WAAW,eAAe,OAAO,aAAa,eAAe,CAAE,iBAAgB,aAAa,SAAS,QAAQ,MAAM;AAC5H,iBAAS,aAAa;AACtB,eAAO,iBAAiB,QAAQ,SAAU,OAAO;AAC/C,mBAAS,aAAa;AAAA,WACrB;AAAA;AAGL,UAAI,kBAAkB,QAAQ,iBAAiB,MAAM;AACnD,yBAAiB,WAAY;AAC3B,iBAAO,IAAI,cAAc;AAAA;AAAA;AAI7B,UAAI,OAAO,UAAU,QAAW;AAC9B,eAAO,SAAS,SAAU,GAAG;AAC3B,uBAAY;AAAA;AACZ,YAAE,YAAY;AACd,iBAAO,IAAI;AAAA;AAAA;AAIf,UAAI,CAAC,KAAK,KAAK;AACb,aAAK,MAAM,eAAe;AACxB,iBAAO,IAAI,OAAO;AAAA;AAAA;AAUtB,UAAI,mBAAmB,QAAW;AAChC,YAAI,iBAAiB;AACrB,iBAAQ,SAAU,KAAK,SAAS;AAC9B,cAAI,SAAS,QAAQ;AACrB,iBAAO,eAAe,KAAK,CAAC,SAAS,QAAQ,SAAS,aAAa,QAAQ,aAAa,OAAO,QAAQ,QAAQ,KAAK,SAAU,UAAU;AACtI,gBAAI,SAAS,SAAS,KAAK;AAC3B,mBAAO,UAAU;AACjB,gBAAI,OAAO,UAAU;AACnB,qBAAO,QAAQ;AAAA;AAEjB,mBAAO;AAAA,cACL,QAAQ,SAAS;AAAA,cACjB,YAAY,SAAS;AAAA,cACrB,SAAS,SAAS;AAAA,cAClB,MAAM;AAAA,gBACJ,WAAW,WAAY;AACrB,yBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAMjB,0BAAkB,WAAY;AAC5B,eAAK,SAAS;AAAA,YACZ,SAAS;AAAA,YACT,UAAU;AAAA;AAEZ,eAAK,QAAQ,WAAY;AACvB,gBAAI,KAAK,OAAO,WAAW,MAAM;AAC/B,mBAAK,OAAO,QAAQ;AAAA;AAEtB,iBAAK,OAAO,WAAW;AAAA;AAAA;AAAA;AAK7B,qCAA+B;AAC7B,aAAK,aAAa;AAClB,aAAK,YAAY;AAAA;AAGnB,0BAAoB,UAAU,SAAS,SAAU,QAAQ;AACvD,uBAAe,YAAW,OAAO,cAAa;AAC5C,cAAI,iBAAgB,GAAG;AACrB,mBAAO,cAAa,OAAU,SAAS,cAAa,SAAS;AAAA;AAE/D,cAAI,iBAAgB,GAAG;AACrB,mBAAO,cAAa,QAAU,SAAS,cAAa,SAAS,SAAU,cAAa,SAAU,SAAS,cAAa,SAAS;AAAA;AAE/H,cAAI,iBAAgB,GAAG;AACrB,mBAAO,cAAa,SAAY,SAAS,cAAa,SAAS;AAAA;AAEjE,gBAAM,IAAI;AAAA;AAEZ,6BAAqB,aAAY,YAAW;AAC1C,cAAI,gBAAe,IAAI,GAAG;AACxB,mBAAO,cAAa,IAAI,KAAK,IAAI,aAAY,KAAK,IAAI;AAAA;AAExD,cAAI,gBAAe,IAAI,GAAG;AACxB,mBAAO,aAAY,KAAK,IAAI;AAAA;AAE9B,cAAI,gBAAe,IAAI,GAAG;AACxB,mBAAO;AAAA;AAET,gBAAM,IAAI;AAAA;AAEZ,YAAI,WAAW;AACf,YAAI,SAAS;AACb,YAAI,aAAa,KAAK;AACtB,YAAI,YAAY,KAAK;AACrB,iBAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK,GAAG;AACzC,cAAI,QAAQ,OAAO;AACnB,cAAI,eAAe,GAAG;AACpB,gBAAI,QAAQ,OAAO,QAAQ,OAAO,CAAC,MAAM,aAAa,IAAI,QAAQ,IAAI,aAAa,GAAG,YAAY,YAAY,aAAa;AACzH,2BAAa;AACb,0BAAY;AACZ,wBAAU,OAAO,aAAa;AAAA;AAAA;AAGlC,cAAI,eAAe,GAAG;AACpB,gBAAI,SAAS,KAAK,SAAS,KAAK;AAC9B,2BAAa;AACb,0BAAY;AAAA,uBACH,SAAS,OAAO,SAAS,KAAK;AACvC,2BAAa,IAAI;AACjB,0BAAY,QAAQ;AAAA,uBACX,SAAS,OAAO,SAAS,KAAK;AACvC,2BAAa,IAAI;AACjB,0BAAY,QAAQ;AAAA,uBACX,SAAS,OAAO,SAAS,KAAK;AACvC,2BAAa,IAAI;AACjB,0BAAY,QAAQ;AAAA,mBACf;AACL,2BAAa;AACb,0BAAY;AAAA;AAEd,gBAAI,eAAe,KAAK,CAAC,MAAM,WAAW,YAAY,YAAY,YAAY,aAAa;AACzF,2BAAa;AACb,0BAAY;AAAA;AAAA,iBAET;AACL,0BAAc;AACd,wBAAY,aAAa,IAAI,QAAQ;AAAA;AAEvC,cAAI,eAAe,GAAG;AACpB,gBAAI,aAAa,OAAQ;AACvB,wBAAU,OAAO,aAAa;AAAA,mBACzB;AACL,wBAAU,OAAO,aAAa,QAAU,aAAY,QAAS,KAAK;AAClE,wBAAU,OAAO,aAAa,QAAU,aAAY,QAAS,IAAI;AAAA;AAAA;AAAA;AAIvE,aAAK,aAAa;AAClB,aAAK,YAAY;AACjB,eAAO;AAAA;AAIT,UAAI,uBAAuB,WAAY;AACrC,YAAI;AACF,iBAAO,IAAI,cAAc,OAAO,IAAI,cAAc,OAAO,SAAS,CAAC,QAAQ,WAAW;AAAA,iBAC/E,OAAP;AACA,kBAAQ,MAAM,4EAA4E;AAAA;AAE5F,eAAO;AAAA;AAIT,UAAI,eAAe,UAAa,eAAe,UAAa,CAAC,wBAAwB;AACnF,sBAAc;AAAA;AAGhB,UAAI,IAAI,WAAY;AAAA;AAGpB,0BAAoB,KAAK;AACvB,aAAK,kBAAkB;AACvB,aAAK,aAAa;AAClB,aAAK,SAAS;AACd,aAAK,aAAa;AAClB,aAAK,eAAe;AACpB,aAAK,aAAa;AAClB,aAAK,SAAS;AACd,aAAK,UAAU;AACf,aAAK,qBAAqB;AAC1B,aAAK,eAAe;AACpB,aAAK,OAAO;AACZ,aAAK,eAAe;AACpB,aAAK,SAAS;AAAA;AAGhB,iBAAW,UAAU,OAAO,SAAU,QAAQ,KAAK;AACjD,aAAK,OAAO;AAEZ,YAAI,OAAO;AACX,YAAI,MAAM,KAAK;AACf,YAAI,QAAQ;AACZ,YAAI,UAAU;AAEd,aAAK,SAAS,SAAU,QAAQ;AAC9B,cAAI,KAAK,iBAAiB,GAAG;AAC3B,0BAAa,KAAK;AAClB,iBAAK,eAAe;AAAA;AAEtB,cAAI,UAAU,KAAK,UAAU,KAAK,UAAU,GAAG;AAC7C,oBAAQ;AACR,gBAAI,SAAS;AACb,gBAAI,UAAU;AACd,gBAAI,UAAU;AACd,gBAAI,aAAa;AACjB,gBAAI,qBAAqB;AAGzB,gBAAI;AACJ,gBAAI,YAAY,GAAG;AACjB,4BAAa;AACb,wBAAU;AAAA;AAEZ,gBAAI,CAAC,QAAQ;AACX,mBAAK,aAAa;AAClB,mBAAK,QAAQ;AACb,mBAAK;AAAA;AAAA;AAGT,kBAAQ;AAAA;AAGV,YAAI,UAAU,WAAY;AACxB,cAAI,UAAU,GAAG;AAEf,gBAAI,SAAS;AACb,gBAAI,aAAa;AACjB,gBAAI,cAAc;AAClB,gBAAI,CAAE,kBAAiB,MAAM;AAC3B,kBAAI;AACF,yBAAS,IAAI;AACb,6BAAa,IAAI;AACjB,8BAAc,IAAI,kBAAkB;AAAA,uBAC7B,OAAP;AAIA,yBAAS;AACT,6BAAa;AACb,8BAAc;AAAA;AAAA,mBAKX;AACL,uBAAS;AACT,2BAAa;AACb,4BAAc,IAAI;AAAA;AAEpB,gBAAI,WAAW,GAAG;AAChB,sBAAQ;AACR,mBAAK,aAAa;AAClB,mBAAK,SAAS;AACd,mBAAK,aAAa;AAClB,mBAAK,eAAe;AACpB,mBAAK;AAAA;AAAA;AAAA;AAIX,YAAI,aAAa,WAAY;AAC3B;AACA,cAAI,UAAU,KAAK,UAAU,GAAG;AAC9B,oBAAQ;AACR,gBAAI,eAAe;AACnB,gBAAI;AACF,6BAAe,IAAI;AAAA,qBACZ,OAAP;AAAA;AAGF,iBAAK,aAAa;AAClB,iBAAK,eAAe;AACpB,iBAAK;AAAA;AAAA;AAGT,YAAI,WAAW,SAAU,MAAM,OAAO;AACpC,cAAI,SAAS,QAAQ,MAAM,kBAAkB,MAAM;AACjD,oBAAQ;AAAA,cACN,gBAAgB;AAAA;AAAA;AAKpB;AACA,cAAI,UAAU,KAAK,UAAU,KAAK,UAAU,GAAG;AAC7C,oBAAQ;AACR,gBAAI,YAAY,GAAG;AACjB,4BAAa;AACb,wBAAU;AAAA;AAEZ,iBAAK,aAAa;AAClB,gBAAI,SAAS,QAAQ;AACnB,mBAAK,OAAO;AAAA,uBACH,SAAS,SAAS;AAC3B,mBAAK,QAAQ;AAAA,uBACJ,SAAS,SAAS;AAC3B,mBAAK,QAAQ;AAAA,mBACR;AACL,oBAAM,IAAI;AAAA;AAEZ,iBAAK;AAAA;AAAA;AAGT,YAAI,qBAAqB,SAAU,OAAO;AACxC,cAAI,OAAO,QAAW;AACpB,gBAAI,IAAI,eAAe,GAAG;AACxB,kBAAI,CAAE,aAAY,QAAQ,CAAE,cAAa,QAAQ,CAAE,cAAa,MAAM;AACpE,yBAAS,IAAI,iBAAiB,KAAK,UAAU,QAAQ;AAAA;AAAA,uBAE9C,IAAI,eAAe,GAAG;AAC/B,kBAAI,CAAE,iBAAgB,MAAM;AAE1B;AAAA;AAAA,uBAEO,IAAI,eAAe,GAAG;AAC/B;AAAA;AAAA;AAAA;AAIN,YAAI,YAAY,WAAY;AAC1B,oBAAU,YAAW,WAAY;AAC/B;AAAA,aACC;AACH,cAAI,IAAI,eAAe,GAAG;AACxB;AAAA;AAAA;AAKJ,YAAI,YAAY,KAAK;AACnB,cAAI,SAAS,SAAU,OAAO;AAC5B,qBAAS,QAAQ;AAAA;AAAA;AAGrB,YAAI,aAAa,KAAK;AACpB,cAAI,UAAU,SAAU,OAAO;AAC7B,qBAAS,SAAS;AAAA;AAAA;AAQtB,YAAI,aAAa,KAAK;AACpB,cAAI,UAAU,SAAU,OAAO;AAC7B,qBAAS,SAAS;AAAA;AAAA;AAItB,YAAI,gBAAgB,KAAK;AACvB,cAAI,aAAa;AAAA;AASnB,YAAI,wBAAwB,KAAK;AAC/B,cAAI,qBAAqB,SAAU,OAAO;AACxC,+BAAmB;AAAA;AAAA;AAIvB,YAAI,iBAAiB,OAAO,CAAE,gBAAe,eAAe,YAAY;AACtE,iBAAQ,KAAI,QAAQ,SAAS,KAAK,MAAM,OAAO;AAAA;AAEjD,YAAI,KAAK,QAAQ,KAAK;AAEtB,YAAI,gBAAgB,KAAK;AAGvB,oBAAU,YAAW,WAAY;AAC/B;AAAA,aACC;AAAA;AAAA;AAGP,iBAAW,UAAU,QAAQ,WAAY;AACvC,aAAK,OAAO;AAAA;AAEd,iBAAW,UAAU,oBAAoB,SAAU,MAAM;AACvD,eAAO,KAAK;AAAA;AAEd,iBAAW,UAAU,mBAAmB,SAAU,MAAM,OAAO;AAC7D,YAAI,MAAM,KAAK;AACf,YAAI,sBAAsB,KAAK;AAC7B,cAAI,iBAAiB,MAAM;AAAA;AAAA;AAG/B,iBAAW,UAAU,wBAAwB,WAAY;AAEvD,eAAO,KAAK,KAAK,yBAAyB,SAAY,KAAK,KAAK,2BAA2B,KAAK;AAAA;AAElG,iBAAW,UAAU,OAAO,WAAY;AAGtC,YAAK,EAAE,gBAAe,eAAe,cAAe,CAAE,mBAAkB,eAAe,cAAc,CAAE,cAAa,eAAe,eAC/H,YAAY,UACZ,SAAS,cAAc,UACvB,SAAS,eAAe,YAAY;AACtC,cAAI,OAAO;AACX,eAAK,eAAe,YAAW,WAAY;AACzC,iBAAK,eAAe;AACpB,iBAAK;AAAA,aACJ;AACH;AAAA;AAGF,YAAI,MAAM,KAAK;AAEf,YAAI,qBAAqB,KAAK;AAC5B,cAAI,kBAAkB,KAAK;AAAA;AAE7B,YAAI;AAEF,cAAI,KAAK;AAAA,iBACF,QAAP;AAEA,gBAAM;AAAA;AAAA;AAIV,2BAAqB,MAAM;AACzB,eAAO,KAAK,QAAQ,UAAU,SAAU,GAAG;AACzC,iBAAO,OAAO,aAAa,EAAE,WAAW,KAAK;AAAA;AAAA;AAIjD,+BAAyB,KAAK;AAE5B,YAAI,MAAM,OAAO,OAAO;AACxB,YAAI,QAAQ,IAAI,MAAM;AACtB,iBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK,GAAG;AACxC,cAAI,OAAO,MAAM;AACjB,cAAI,QAAQ,KAAK,MAAM;AACvB,cAAI,OAAO,MAAM;AACjB,cAAI,QAAQ,MAAM,KAAK;AACvB,cAAI,YAAY,SAAS;AAAA;AAE3B,aAAK,OAAO;AAAA;AAEd,sBAAgB,UAAU,MAAM,SAAU,MAAM;AAC9C,eAAO,KAAK,KAAK,YAAY;AAAA;AAG/B,UAAI,kBAAkB,QAAQ,eAAe,oBAAoB,MAAM;AACrE,uBAAe,mBAAmB;AAAA;AAGpC,8BAAwB;AAAA;AAGxB,mBAAa,UAAU,OAAO,SAAU,KAAK,iBAAiB,oBAAoB,kBAAkB,KAAK,iBAAiB,SAAS;AACjI,YAAI,KAAK,OAAO;AAChB,YAAI,SAAS;AACb,YAAI,aAAa,WAAY;AAC3B,cAAI,eAAe,IAAI;AACvB,cAAI,QAAQ,aAAa,MAAM;AAC/B,oBAAU,MAAM;AAChB,6BAAmB;AAAA;AAErB,YAAI,UAAU,SAAU,OAAO;AAC7B,gBAAM;AACN,2BAAiB,IAAI,MAAM;AAAA;AAE7B,YAAI,SAAS,WAAY;AACvB,2BAAiB;AAAA;AAEnB,YAAI,UAAU,WAAY;AACxB,2BAAiB;AAAA;AAEnB,YAAI,qBAAqB,WAAY;AACnC,cAAI,IAAI,eAAe,eAAe,kBAAkB;AACtD,gBAAI,SAAS,IAAI;AACjB,gBAAI,aAAa,IAAI;AACrB,gBAAI,cAAc,IAAI,kBAAkB;AACxC,gBAAI,WAAU,IAAI;AAClB,4BAAgB,QAAQ,YAAY,aAAa,IAAI,gBAAgB;AAAA;AAAA;AAGzE,YAAI,kBAAkB;AACtB,iBAAS,QAAQ,SAAS;AACxB,cAAI,OAAO,UAAU,eAAe,KAAK,SAAS,OAAO;AACvD,gBAAI,iBAAiB,MAAM,QAAQ;AAAA;AAAA;AAGvC,YAAI;AACJ,eAAO;AAAA;AAGT,8BAAwB,SAAS;AAC/B,aAAK,WAAW;AAAA;AAElB,qBAAe,UAAU,MAAM,SAAU,MAAM;AAC7C,eAAO,KAAK,SAAS,IAAI;AAAA;AAG3B,gCAA0B;AAAA;AAG1B,qBAAe,UAAU,OAAO,SAAU,KAAK,iBAAiB,oBAAoB,kBAAkB,KAAK,iBAAiB,SAAS;AACnI,YAAI,SAAS;AACb,YAAI,aAAa,IAAI;AACrB,YAAI,SAAS,WAAW;AACxB,YAAI,cAAc,IAAI;AACtB,eAAM,KAAK;AAAA,UACT;AAAA,UACA,aAAa,kBAAkB,YAAY;AAAA,UAC3C;AAAA,UACA,OAAO;AAAA,WACN,KAAK,SAAU,UAAU;AAC1B,mBAAS,SAAS,KAAK;AACvB,0BAAgB,SAAS,QAAQ,SAAS,YAAY,SAAS,QAAQ,IAAI,iBAAiB,IAAI,eAAe,SAAS;AAExH,iBAAO,IAAI,SAAQ,SAAU,SAAS,QAAQ;AAC5C,gBAAI,gBAAgB,WAAY;AAC9B,qBAAO,OAAO,KAAK,SAAU,QAAQ;AACnC,oBAAI,OAAO,MAAM;AAEf,0BAAQ;AAAA,uBACH;AACL,sBAAI,QAAQ,YAAY,OAAO,OAAO,OAAO,CAAC,QAAQ;AACtD,qCAAmB;AACnB;AAAA;AAAA,iBAED,SAAS,SAAU,OAAO;AAC3B,uBAAO;AAAA;AAAA;AAGX;AAAA;AAAA,WAED,SAAS,SAAU,OAAO;AAC3B,cAAI,MAAM,SAAS,cAAc;AAC/B,mBAAO;AAAA,iBACF;AACL,mBAAO;AAAA;AAAA,WAER,KAAK,SAAU,OAAO;AACvB,2BAAiB;AAAA;AAEnB,eAAO;AAAA,UACL,OAAO,WAAY;AACjB,gBAAI,UAAU,MAAM;AAClB,qBAAO;AAAA;AAET,uBAAW;AAAA;AAAA;AAAA;AAKjB,6BAAuB;AACrB,aAAK,aAAa,OAAO,OAAO;AAAA;AAGlC,0BAAoB,IAAG;AACrB,oBAAW,WAAY;AACrB,gBAAM;AAAA,WACL;AAAA;AAGL,kBAAY,UAAU,gBAAgB,SAAU,OAAO;AACrD,cAAM,SAAS;AACf,YAAI,gBAAgB,KAAK,WAAW,MAAM;AAC1C,YAAI,iBAAiB,QAAW;AAC9B,cAAI,SAAS,cAAc;AAC3B,mBAAS,IAAI,GAAG,IAAI,QAAQ,KAAK,GAAG;AAClC,gBAAI,WAAW,cAAc;AAC7B,gBAAI;AACF,kBAAI,OAAO,SAAS,gBAAgB,YAAY;AAC9C,yBAAS,YAAY;AAAA,qBAChB;AACL,yBAAS,KAAK,MAAM;AAAA;AAAA,qBAEf,IAAP;AACA,yBAAW;AAAA;AAAA;AAAA;AAAA;AAKnB,kBAAY,UAAU,mBAAmB,SAAU,MAAM,UAAU;AACjE,eAAO,OAAO;AACd,YAAI,YAAY,KAAK;AACrB,YAAI,gBAAgB,UAAU;AAC9B,YAAI,iBAAiB,QAAW;AAC9B,0BAAgB;AAChB,oBAAU,QAAQ;AAAA;AAEpB,YAAI,QAAQ;AACZ,iBAAS,IAAI,GAAG,IAAI,cAAc,QAAQ,KAAK,GAAG;AAChD,cAAI,cAAc,OAAO,UAAU;AACjC,oBAAQ;AAAA;AAAA;AAGZ,YAAI,CAAC,OAAO;AACV,wBAAc,KAAK;AAAA;AAAA;AAGvB,kBAAY,UAAU,sBAAsB,SAAU,MAAM,UAAU;AACpE,eAAO,OAAO;AACd,YAAI,YAAY,KAAK;AACrB,YAAI,gBAAgB,UAAU;AAC9B,YAAI,iBAAiB,QAAW;AAC9B,cAAI,WAAW;AACf,mBAAS,IAAI,GAAG,IAAI,cAAc,QAAQ,KAAK,GAAG;AAChD,gBAAI,cAAc,OAAO,UAAU;AACjC,uBAAS,KAAK,cAAc;AAAA;AAAA;AAGhC,cAAI,SAAS,WAAW,GAAG;AACzB,mBAAO,UAAU;AAAA,iBACZ;AACL,sBAAU,QAAQ;AAAA;AAAA;AAAA;AAKxB,sBAAe,MAAM;AACnB,aAAK,OAAO;AACZ,aAAK,SAAS;AAAA;AAGhB,4BAAsB,MAAM,SAAS;AACnC,eAAM,KAAK,MAAM;AACjB,aAAK,OAAO,QAAQ;AACpB,aAAK,cAAc,QAAQ;AAAA;AAG7B,mBAAa,YAAY,OAAO,OAAO,OAAM;AAE7C,+BAAyB,MAAM,SAAS;AACtC,eAAM,KAAK,MAAM;AACjB,aAAK,SAAS,QAAQ;AACtB,aAAK,aAAa,QAAQ;AAC1B,aAAK,UAAU,QAAQ;AAAA;AAGzB,sBAAgB,YAAY,OAAO,OAAO,OAAM;AAEhD,0BAAoB,MAAM,SAAS;AACjC,eAAM,KAAK,MAAM;AACjB,aAAK,QAAQ,QAAQ;AAAA;AAGvB,iBAAW,YAAY,OAAO,OAAO,OAAM;AAE3C,UAAI,UAAU;AACd,UAAI,aAAa;AACjB,UAAI,OAAO;AACX,UAAI,SAAS;AAEb,UAAI,WAAW;AACf,UAAI,cAAc;AAClB,UAAI,QAAQ;AACZ,UAAI,cAAc;AAClB,UAAI,QAAQ;AAEZ,UAAI,oBAAoB;AAExB,UAAI,mBAAmB;AACvB,UAAI,mBAAmB;AAEvB,UAAI,gBAAgB,SAAU,OAAO,KAAK;AACxC,YAAI,KAAI,SAAS,OAAO,MAAM,SAAS,OAAO;AAC9C,YAAI,OAAM,IAAG;AACX,eAAI;AAAA;AAEN,eAAO,cAAc;AAAA;AAEvB,UAAI,gBAAgB,SAAU,IAAG;AAC/B,eAAO,KAAK,IAAI,KAAK,IAAI,IAAG,mBAAmB;AAAA;AAGjD,UAAI,OAAO,SAAU,MAAM,GAAG,OAAO;AACnC,YAAI;AACF,cAAI,OAAO,MAAM,YAAY;AAC3B,cAAE,KAAK,MAAM;AAAA;AAAA,iBAER,IAAP;AACA,qBAAW;AAAA;AAAA;AAIf,oCAA6B,KAAK,SAAS;AACzC,oBAAY,KAAK;AACjB,kBAAU,WAAW;AAErB,aAAK,SAAS;AACd,aAAK,YAAY;AACjB,aAAK,UAAU;AAEf,aAAK,MAAM;AACX,aAAK,aAAa;AAClB,aAAK,kBAAkB;AACvB,aAAK,UAAU;AAEf,aAAK,SAAS;AAEd,cAAM,MAAM,KAAK;AAAA;AAGnB,qCAA+B;AAC7B,eAAQ,kBAAkB,UAAc,qBAAqB,eAAe,aAAe,kBAAkB,SACvG,IAAI,mBACJ,IAAI;AAAA;AAGZ,UAAI,mBAAmB,UAAS,UAAa,YAAY,UAAa,UAAU,SAAS;AAEzF,qBAAe,IAAI,KAAK,SAAS;AAC/B,cAAM,OAAO;AACb,YAAI,kBAAkB,QAAQ,QAAQ;AACtC,YAAI,gCAAgC,QAAQ,iCAAiC;AAE7E,YAAI,eAAe,cAAc;AACjC,YAAI,mBAAmB,cAAc,QAAQ,kBAAkB;AAE/D,YAAI,cAAc;AAClB,YAAI,QAAQ;AACZ,YAAI,cAAc;AAClB,YAAI,aAAa;AACjB,YAAI,UAAU,QAAQ,WAAW;AACjC,YAAI,kBAAkB,QAAQ;AAC9B,YAAI,MAAM,oBAAoB,mBAAmB,SAAY,SAAY,IAAI,WAAW,mBAAmB,SAAY,IAAI,oBAAoB;AAC/I,YAAI,YAAY,mBAAmB,QAAQ,OAAO,oBAAoB,WAAW,IAAI,oBAAqB,OAAO,SAAY,IAAI,mBAAmB,IAAI;AACxJ,YAAI,kBAAkB;AACtB,YAAI,UAAU;AACd,YAAI,eAAe;AACnB,YAAI,aAAa;AACjB,YAAI,oBAAoB;AACxB,YAAI,kBAAkB;AAEtB,YAAI,aAAa;AACjB,YAAI,QAAQ;AACZ,YAAI,aAAa;AACjB,YAAI,aAAa;AAEjB,YAAI,UAAU,SAAU,QAAQ,YAAY,aAAa,UAAS;AAChE,cAAI,iBAAiB,YAAY;AAC/B,gBAAI,WAAW,OAAO,eAAe,UAAa,kBAAkB,KAAK,cAAc;AACrF,6BAAe;AACf,4BAAc,KAAK;AACnB,sBAAQ;AACR,iBAAG,aAAa;AAChB,kBAAI,QAAQ,IAAI,gBAAgB,QAAQ;AAAA,gBACtC;AAAA,gBACA;AAAA,gBACA,SAAS;AAAA;AAEX,iBAAG,cAAc;AACjB,mBAAK,IAAI,GAAG,QAAQ;AAAA,mBACf;AACL,kBAAI,UAAU;AACd,kBAAI,WAAW,KAAK;AAClB,oBAAI,YAAY;AACd,+BAAa,WAAW,QAAQ,QAAQ;AAAA;AAE1C,0BAAU,yCAAyC,SAAS,MAAM,aAAa;AAAA,qBAC1E;AACL,0BAAU,+EAAgF,gBAAe,SAAY,MAAM,YAAY,QAAQ,QAAQ,QAAQ;AAAA;AAEjK;AACA,kBAAI,QAAQ,IAAI,gBAAgB,SAAS;AAAA,gBACvC;AAAA,gBACA;AAAA,gBACA,SAAS;AAAA;AAEX,iBAAG,cAAc;AACjB,mBAAK,IAAI,GAAG,SAAS;AACrB,sBAAQ,MAAM;AAAA;AAAA;AAAA;AAKpB,YAAI,aAAa,SAAU,WAAW;AACpC,cAAI,iBAAiB,MAAM;AACzB,gBAAI,KAAI;AACR,qBAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,KAAK,GAAG;AAC5C,kBAAI,IAAI,UAAU,WAAW;AAC7B,kBAAI,MAAM,KAAK,WAAW,MAAM,MAAM,KAAK,WAAW,IAAI;AACxD,qBAAI;AAAA;AAAA;AAGR,gBAAI,QAAS,QAAM,KAAK,aAAa,MAAM,UAAU,MAAM,GAAG,KAAI;AAClE,yBAAc,QAAM,KAAK,aAAa,MAAM,UAAU,MAAM,KAAI;AAChE,gBAAI,cAAc,IAAI;AACpB,4BAAc,KAAK;AACnB,4BAAc,UAAU;AAAA;AAE1B,qBAAS,WAAW,GAAG,WAAW,MAAM,QAAQ,YAAY,GAAG;AAC7D,kBAAI,IAAI,MAAM,WAAW;AACzB,kBAAI,UAAU,YAAY,MAAM,KAAK,WAAW,IAAI;AAClD,wBAAQ;AAAA,qBACH;AACL,oBAAI,UAAU,UAAU;AACtB,0BAAQ;AAAA;AAEV,oBAAI,MAAM,KAAK,WAAW,MAAM,MAAM,KAAK,WAAW,IAAI;AACxD,sBAAI,UAAU,aAAa;AACzB,wBAAI,UAAU,OAAO;AACnB,mCAAa,WAAW;AAAA;AAE1B,wBAAI,QAAQ,MAAM,MAAM,YAAY,aAAa;AACjD,wBAAI,QAAQ,MAAM,MAAM,aAAc,cAAa,YAAY,MAAM,WAAW,gBAAgB,IAAI,WAAW,KAAK,IAAI,IAAI;AAC5H,wBAAI,UAAU,QAAQ;AACpB,oCAAc;AACd,oCAAc;AAAA,+BACL,UAAU,MAAM;AACzB,0CAAoB;AAAA,+BACX,UAAU,SAAS;AAC5B,wCAAkB;AAAA,+BACT,UAAU,SAAS;AAC5B,qCAAe,cAAc,OAAO;AACpC,8BAAQ;AAAA,+BACC,UAAU,oBAAoB;AACvC,yCAAmB,cAAc,OAAO;AACxC,0BAAI,YAAY,GAAG;AACjB,sCAAa;AACb,kCAAU,YAAW,WAAY;AAC/B;AAAA,2BACC;AAAA;AAAA;AAAA;AAIT,sBAAI,UAAU,aAAa;AACzB,wBAAI,eAAe,IAAI;AACrB,oCAAc;AACd,0BAAI,oBAAoB,IAAI;AAC1B,0CAAkB;AAAA;AAEpB,0BAAI,QAAQ,IAAI,aAAa,iBAAiB;AAAA,wBAC5C,MAAM,WAAW,MAAM;AAAA,wBACvB,aAAa;AAAA;AAEf,yBAAG,cAAc;AACjB,0BAAI,oBAAoB,QAAQ;AAC9B,6BAAK,IAAI,GAAG,QAAQ;AAAA,iCACX,oBAAoB,WAAW;AACxC,6BAAK,IAAI,GAAG,WAAW;AAAA,iCACd,oBAAoB,SAAS;AACtC,6BAAK,IAAI,GAAG,SAAS;AAAA;AAEvB,0BAAI,iBAAiB,QAAQ;AAC3B;AAAA;AAAA;AAGJ,iCAAa;AACb,sCAAkB;AAAA;AAEpB,0BAAQ,MAAM,KAAK,WAAW,KAAK,WAAW;AAAA,uBACzC;AACL,sBAAI,UAAU,aAAa;AACzB,iCAAa;AACb,4BAAQ;AAAA;AAEV,sBAAI,UAAU,OAAO;AACnB,wBAAI,MAAM,IAAI,WAAW,IAAI;AAC3B,mCAAa,WAAW;AACxB,8BAAQ;AAAA;AAAA,6BAED,UAAU,aAAa;AAChC,4BAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQpB,YAAI,WAAW,SAAU,OAAO;AAC9B,cAAI,iBAAiB,QAAQ,iBAAiB,YAAY;AACxD,2BAAe;AACf,gBAAI,YAAY,GAAG;AACjB,4BAAa;AACb,wBAAU;AAAA;AAEZ,sBAAU,YAAW,WAAY;AAC/B;AAAA,eACC;AACH,oBAAQ,cAAc,KAAK,IAAI,eAAe,IAAI,QAAQ;AAE1D,eAAG,aAAa;AAAA,qBACP,iBAAiB,UAAU,SAAS,QAAW;AAExD,oBAAQ,MAAM;AACd,gBAAI,QAAQ,IAAI,WAAW,SAAS,CAAC;AACrC,eAAG,cAAc;AACjB,iBAAK,IAAI,GAAG,SAAS;AAAA;AAAA;AAIzB,YAAI,QAAQ,WAAY;AACtB,yBAAe;AACf,cAAI,mBAAmB,QAAW;AAChC,4BAAgB;AAChB,8BAAkB;AAAA;AAEpB,cAAI,YAAY,GAAG;AACjB,0BAAa;AACb,sBAAU;AAAA;AAEZ,aAAG,aAAa;AAAA;AAGlB,YAAI,YAAY,WAAY;AAC1B,oBAAU;AAEV,cAAI,iBAAiB,SAAS;AAC5B,gBAAI,CAAC,eAAe,mBAAmB,QAAW;AAChD,uBAAS,IAAI,MAAM,wBAAwB,mBAAmB,oBAA0B,kBAAiB,aAAa,0BAA0B,aAAa,sBAAsB;AACnL,kBAAI,mBAAmB,QAAW;AAChC,gCAAgB;AAChB,kCAAkB;AAAA;AAAA,mBAEf;AACL,kBAAI,gBAAgB,KAAK,IAAK,gBAAe,KAAK,SAAS,mBAAmB,KAAK,OAAO;AAC1F,4BAAc;AACd,wBAAU,YAAW,WAAY;AAC/B;AAAA,iBACC;AAAA;AAEL;AAAA;AAGF,wBAAc;AACd,uBAAa;AACb,oBAAU,YAAW,WAAY;AAC/B;AAAA,aACC;AAEH,yBAAe;AACf,uBAAa;AACb,4BAAkB;AAClB,8BAAoB;AACpB,uBAAa;AACb,uBAAa;AACb,uBAAa;AACb,kBAAQ;AAIR,cAAI,aAAa;AACjB,cAAI,IAAI,MAAM,GAAG,OAAO,WAAW,IAAI,MAAM,GAAG,OAAO,SAAS;AAC9D,gBAAI,gBAAgB,IAAI;AAEtB,kBAAI,IAAI,IAAI,QAAQ;AACpB,2BAAa,MAAM,KAAK,MAAM,IAAI,MAAM,GAAG,IAAI,KAAK,IAAI,MAAM,IAAI,GAAG,QAAQ,+BAA+B,SAAU,GAAG,WAAW;AAClI,uBAAO,cAAc,gCAAgC,KAAK;AAAA;AAG5D,4BAAe,KAAI,QAAQ,SAAS,KAAK,MAAM,OAAO,gCAA+B,MAAM,mBAAmB;AAAA;AAAA;AAGlH,cAAI,mBAAkB,GAAG;AACzB,cAAI,iBAAiB;AACrB,yBAAe,YAAY;AAC3B,cAAI,WAAU,GAAG;AACjB,cAAI,YAAW,QAAW;AACxB,qBAAS,QAAQ,UAAS;AACxB,kBAAI,OAAO,UAAU,eAAe,KAAK,UAAS,OAAO;AACvD,+BAAe,QAAQ,SAAQ;AAAA;AAAA;AAAA;AAIrC,cAAI;AACF,8BAAkB,UAAU,KAAK,KAAK,SAAS,YAAY,UAAU,YAAY,kBAAiB;AAAA,mBAC3F,OAAP;AACA;AACA,kBAAM;AAAA;AAAA;AAIV,WAAG,MAAM;AACT,WAAG,aAAa;AAChB,WAAG,kBAAkB;AACrB,WAAG,UAAU;AACb,WAAG,SAAS;AAEZ;AAAA;AAGF,2BAAoB,YAAY,OAAO,OAAO,YAAY;AAC1D,2BAAoB,UAAU,aAAa;AAC3C,2BAAoB,UAAU,OAAO;AACrC,2BAAoB,UAAU,SAAS;AACvC,2BAAoB,UAAU,QAAQ,WAAY;AAChD,aAAK;AAAA;AAGP,2BAAoB,aAAa;AACjC,2BAAoB,OAAO;AAC3B,2BAAoB,SAAS;AAC7B,2BAAoB,UAAU,kBAAkB;AAEhD,UAAI,IAAI;AACR,UAAI,kBAAkB,UAAc,sBAAqB,UAAa,CAAE,sBAAqB,kBAAkB,aAAa;AAO1H,YAAI;AAAA;AAGN,MAAC,UAAU,SAAS;AAClB,YAAI,OAAO,WAAW,YAAY,OAAO,OAAO,YAAY,UAAU;AACpE,cAAI,IAAI,QAAQ;AAChB,cAAI,MAAM;AAAW,mBAAO,UAAU;AAAA,mBAE/B,OAAO,WAAW,cAAc,OAAO,KAAK;AACnD,iBAAO,CAAC,YAAY;AAAA,eAEjB;AACH,kBAAQ;AAAA;AAAA,SAET,SAAU,UAAS;AACpB,iBAAQ,sBAAsB;AAC9B,iBAAQ,oBAAoB;AAC5B,iBAAQ,cAAc;AAAA;AAAA,OAExB,OAAO,eAAe,cAAe,OAAO,WAAW,cAAc,SAAS,OAAO,SAAS,cAAc,OAAO,UAAQ;AAAA;;;ACvhC7H;AAAA;AAAA;AAAA;AAAA;;;ACOA,aAA+B,IAAA;AAC3B,SAAK,UAAU;;AAGnB,IAAsB,YAAY,IAAI,SACtC,EAAsB,UAAU,OAAO;AA6BvC,MAAA,IAAkC,AAAA,OAAX,UAAW,eAC9B,OAAO,QACP,OAAO,KAAK,KAAK,WA7BrB,SAAkB,IAAA;AACd,QAAI,KAAM,OAAO,IAAO,QAAQ,OAAO;AACvC,QAAI,GAAI,SAAS,KAAK;AAClB,YAAM,IAAI,EACN;AAGR,aAEgB,IAAI,IAAZ,IAAK,GAAe,IAAM,GAAG,IAAS,IAEzC,KAAS,GAAI,OAAO,MAAA,CAEpB,MACC,MAAK,IAAK,IAAS,KAAL,KAAU,KAAS,IAG/B,MAAO,KACV,KAAU,OAAO,aAAa,MAAO,MAAA,MAAa,IAAM,MACzD;AAGA,WA/BI,oEA+BW,QAAQ;AAE3B,WAAO;;ACxBI,aAAS,IAAA;AACpB,QAAI,KAAS,GAAI,QAAQ,MAAM,KAAK,QAAQ,MAAM;AAClD,YAAQ,GAAO,SAAS;WACf;AACD;WACC;AACD,cAAU;AACV;WACC;AACD,cAAU;AACV;;AAEA,cAAM;;AAGd,QAAA;AACI,aA5BR,SAA0B,IAAA;AACtB,eAAO,mBACH,EAAK,IAAK,QAAQ,QAAQ,SAAS,IAAG,IAAA;AAClC,cAAI,KAAO,GAAE,WAAW,GAAG,SAAS,IAAI;AAIxC,iBAHI,GAAK,SAAS,KACd,MAAO,MAAM,KAEV,MAAM;;QAqBO;aACnB,IAAP;AACE,aAAO,EAAK;;;AC5Bb,aAA2B,IAAA;AAC9B,SAAK,UAAU;;AAMJ,aAAS,IAAO,IAAA;AAC3B,QAAqB,AAAA,OAAV,MAAU;AACjB,YAAM,IAAI,EAAkB;AAIhC,QAAI,KAAA,AADJ,MAAU,MAAW,IACH,WAAd,OAAgC,IAAI;AACxC,QAAA;AACI,aAAO,KAAK,MAAM,EAAkB,GAAM,MAAM,KAAK;aAChD,IAAP;AACE,YAAM,IAAI,EAAkB,8BAA8B,GAAE;;;AAbpE,IAAkB,YAAY,IAAI,SAClC,EAAkB,UAAU,OAAO;AAAA,MAAA,yBAAA;;;2BCuBN,IAAA;AAG5B,WAAO,CAKN,KAPD,KAAM,MAAO,IAAI,OAehB,IAAA,SAAY,IAAiB,IAAA;AAC5B,UAAM,IAAW,GAAI,IAAI;AACX,WAAY,EAAS,KAAK,OAEvC,GAAI,IAAI,IAAM,CAAC;OAUjB,KAAA,SAAa,IAAiB,IAAA;AAC7B,UAAM,IAAW,GAAI,IAAI;AACrB,WACH,EAAS,OAAO,EAAS,QAAQ,QAAa,GAAG;OAcnD,MAAA,SAAc,IAAiB,IAAA;AAAA,MAC5B,IAAI,IAAI,OAAS,IAAyB,QAAQ,IAAI,SAAC,IAAA;AAAc,WAAQ;UAC7E,IAAI,IAAI,QAAQ,IAAiC,QAAQ,IAAI,SAAC,IAAA;AAAc,WAAQ,IAAM;;;;;;AJ/E/F,2BAAoC;;;AKY7B,MAAK;AAAL,YAAK,QAAL;AACL,sBAAQ;AACR,0BAAY;AACZ,6BAAe;AACf,4BAAc;AACd,wBAAU;AACV,sBAAQ;AAAA,KANE;;;ACZL,MAAM,iBAA0B;AAAA,IACrC,OAAO;AAAA,IACP,SAAS;AAAA,IACT,UAAU;AAAA,IACV,eAAe;AAAA,IACf,sBAAsB;AAAA,IACtB,uBAAuB;AAAA;AAIlB,MAAM,WAAW,CAAC,YAAoB,SAAgB,QAAQ,MAAM,YAAY,WAAW,GAAG;AAE9F,MAAM,yBAAyB,KAAK;;;ANE3C,MAAM,cAAc;AACpB,MAAM,+BAA+B;AACrC,MAAM,QAAQ,WAAW;AACzB,MAAM,cAAc;AAGpB,MAAM,WAAW,CAAC,CAAC,WAAW;AAE9B,MAAM,eAAe,CAAC,eAA2B;AAC/C,QAAI,CAAE,SAAU;AAEhB,QAAI;AACF,cAAQ,WAAW,KAAK;AAAA,aACjB;AAAA,aACA;AACH,kBAAQ,OAAO;AACf;AAAA,aACG;AACH,kBAAQ,MAAM,WAAW,kBAAkB;AAC3C;AAAA,aACG;AACH,kBAAQ,KAAK,MAAM;AACnB;AAAA;AAAA,aAEG,OAAP;AACA,eAAS;AAAA;AAGX,WAAO;AAAA;AAGT,MAAM,aAAa,CAAC,QAAgB,QAAgB,YAA6B;AAC/E,QAAI;AACJ,QAAI;AACJ,QAAI;AACJ,QAAI;AACJ,QAAI;AACJ,QAAI,0BAA0B;AAC9B,UAAM,uBAAuB,MAAM;AACjC,gCAA0B;AAAA;AAE5B,UAAM,wBAAwB,MAAM;AAClC,gCAA0B;AAAA;AAE5B,QAAI,UAA8B;AAClC,UAAM,WAAW;AACjB,UAAM,iBAAiB,sBAAK,iBAAmB;AAC/C,UAAM,WAAW,CAAC,YAAoB,SAAgB;AACpD,UAAI,eAAe,OAAO;AAExB,gBAAQ,MAAM,YAAY,WAAW,GAAG;AAAA;AAAA;AAG5C,UAAM,gBAAgB,CAAC,gBAA6B;AAClD,UAAI,yBAAyB;AAC3B,cAAM,MAAM,KAAK;AAEjB,YAAI,MAAM,YAAY,eAAe,8BAA8B;AACjE,sBAAY;AACZ,sBAAY,eAAe;AAAA;AAAA;AAAA;AAKjC,eAAW,iBAAiB,MAAM;AAChC,UAAI,QAAQ,UAAU,WAAW,cAAc;AAC7C;AACA,mBAAW,aAAa,qBAAqB,KAAK,UAAU;AAC5D;AAAA;AAAA;AAIJ,UAAM,eAAe,CAAO,UAAkB,kBAA4C;AACxF,YAAM,WAAW,MAAM,MAAM,GAAG,cAAc,uBAAuB;AAAA,QACnE,QAAQ;AAAA,QACR,SAAS,CAAE,gBAAgB;AAAA,QAC3B,MAAM,KAAK,UAAU,CAAE,QAAQ,UAAU;AAAA;AAG3C,YAAM,OAA8B,MAAM,SAAS;AAEnD,aAAO,KAAK;AAAA;AAGd,UAAM,yBAAyB,MAAM;AACnC,UAAI,QAAQ,QAAQ;AAClB,iBAAS,sBAAsB,CAAE,SAAS;AAC1C,cAAM,UAAU;AAAA,UACd,aAAa,QAAQ,IAAI,WAAU;AAAA,YACjC,WAAW,KAAK;AAAA,YAChB,OAAO,MAAM;AAAA,YACb,aAAa;AAAA,YACb,YAAY;AAAA,cACV;AAAA,gBACE,KAAK;AAAA,gBACL,OAAO,MAAM;AAAA;AAAA,cAEf;AAAA,gBACE,KAAK;AAAA,gBACL,OAAO,MAAM;AAAA;AAAA,cAEf;AAAA,gBACE,KAAK;AAAA,gBACL,OAAO,MAAM;AAAA;AAAA,cAEf;AAAA,gBACE,KAAK;AAAA,gBACL,OAAO,OAAO;AAAA;AAAA,cAEhB;AAAA,gBACE,KAAK;AAAA,gBACL,OAAO;AAAA;AAAA,cAET;AAAA,gBACE,KAAK;AAAA,gBACL,OAAO;AAAA;AAAA,cAET;AAAA,gBACE,KAAK;AAAA,gBACL,OAAO;AAAA;AAAA;AAAA;AAAA;AAMf,cAAM,GAAG,eAAe,oBAAoB,uBAAuB,qBAAqB;AAAA,UACtF,QAAQ;AAAA,UACR,SAAS,CAAE,gBAAgB,oBAAoB,eAAe,UAAU;AAAA,UACxE,MAAM,KAAK,UAAU;AAAA,WAEpB,KAAK,MAAM;AACV,oBAAU;AAAA,WAEX,MAAM,WAAS;AACd,mBAAS;AAAA,WAEV,QAAQ,MAAM;AACb,+BAAqB,OAAO,WAAW,wBAAwB;AAAA;AAAA,aAE9D;AACL,6BAAqB,OAAO,WAAW,wBAAwB;AAAA;AAAA;AAInE,QAAI,cAA0C;AAE9C,UAAM,eAAe,WAAY;AAC/B,aAAO,WACH,IAAI,MACF,IACA;AAAA,QACE,IAAI,UAAU,UAAU;AAvKpC;AAwKc,gBAAM,SAAS,SAAS;AAExB,cAAI,SAAS,eAAe,WAAW;AACrC,kBAAM,eAAe,SAAS;AAG9B,kBAAM,QAAQ,QAAQ,KACpB,YAAU,OAAO,sBAAsB,YAAY,iBAAiB,OAAO;AAG7E,gBAAI,OAAO;AACT,oBAAM,sBAAsB,mBAAY,cAAZ,mBAAiC,eAAc;AAC3E,4BAAc;AAAA,mBACT;AACL,sBAAQ,KAAK;AAAA,gBACX,mBAAmB;AAAA,gBACnB;AAAA,gBACA,qBAAqB,mBAAY,cAAZ,mBAAiC,eAAc;AAAA,gBACpE,OAAO,0BAA0B,IAAI;AAAA,gBACrC,cAAc,KAAK;AAAA;AAAA;AAGvB,qBACE,wBACA,UACA,6BACA,cACA,wBACA,kBAAY,cAAZ,mBAAiC;AAAA;AAIrC,iBAAO;AAAA;AAAA,WAIb;AAAA;AAGN,QAAI,UAA+B;AAEnC,iBAAa,QAAQ,gBAClB,KAAK,CAAC,UAAkB;AACvB,iBAAW;AACX,YAAM,UAA8D,uBAAW;AAE/E,eAAS,iBAAiB;AAE1B,UAAI,WAAW,gBAAgB,WAAW,aAAa,oBAAoB;AACzE,YAAI;AAEF,iBAAO,WAAW,aAAa;AAC/B,mBAAS;AAAA,iBACF,OAAP;AAAA;AAAA;AAGJ,2BAAqB,OAAO,WAAW,wBAAwB;AAE/D,oBAAc,QAAQ;AACtB,0BAAoB,QAAQ;AAG5B,mBACG,KAAK,MAAM;AACV,iBAAS,sBAAsB;AAAA,SAEhC,KAAK,MAAM;AACV;AAAA,SAED,KAAK,MAAM;AACV,iBAAS,sBAAsB,CAAE;AACjC,iBAAS,KAAK,MAAM,OAAO;AAE3B,YAAI,CAAC,UAAU;AACb,iBAAO,KAAK,SAAS,QAAQ,SAAO;AAlPhD;AAmPc,oBAAQ,KAAK;AAAA,cACX,mBAAmB;AAAA,cACnB,cAAc,QAAQ;AAAA,cACtB,qBAAqB,mBAAY,SAAZ,mBAAkB,eAAc;AAAA,cACrD,OAAO,0BAA0B,IAAI;AAAA,cACrC,cAAc,KAAK;AAAA;AAAA;AAAA;AAAA,SAK1B,MAAM,SAAO;AACZ,iBAAS,KAAK,MAAM,OAAO;AAAA;AAAA,OAGhC,MAAM,WAAS;AACd,eAAS,0BAA0B;AACnC,eAAS,KAAK,MAAM,OAAO;AAAA;AAG/B,UAAM,aAAa,MAAY;AAC7B,UAAI;AACF,cAAM,MAAM,MAAM,MAChB,GAAG,eAAe,sBAAsB,sBAAsB,OAAO,kCAAkC,qBACvG;AAAA,UACE,SAAS;AAAA,YACP,eAAe,UAAU;AAAA;AAAA;AAI/B,cAAM,OAAO,MAAM,IAAI;AAEvB,aAAK,QAAQ,CAAC,gBAA4B;AACxC,gBAAM,SAAS,aAAa;AAC5B,kBAAQ,YAAY,QAAQ;AAC5B,sBAAY,YAAY,QAAQ,sBAAK,cAAL,CAAkB,OAAO;AAAA;AAAA,eAEpD,OAAP;AACA,iBAAS,oCAAoC;AAC7C,iBAAS,KAAK,MAAM,OAAO;AAC3B,eAAO;AAAA;AAAA;AAIX,UAAM,YAAY,CAAO,eAAuB;AA9RlD;AA+RI,UAAI;AACF,cAAM,SAAS,MAAM,MACnB,GAAG,eAAe,sBAAsB,sBAAsB,OAAO,0BAA0B,sBAAsB,qBACrH;AAAA,UACE,SAAS;AAAA,YACP,eAAe,UAAU;AAAA;AAAA;AAK/B,YAAI,OAAO,IAAI;AACb,gBAAM,WAAuB,MAAM,OAAO;AAC1C,gBAAM,SAAS,aAAa;AAE5B;AACA,kBAAQ,cAAc;AACtB,sBAAY,cAAc,sBAAK,WAAL,CAAe,OAAO;AAChD;AAEA,mBAAS,KACP,MAAM,SACN,WACI,IAAI,MAAM,UAAU;AAAA,YAClB,IAAI,WAAW,UAAU;AAtTzC;AAuTkB,kBAAI,UAAU,eAAe,aAAa,aAAa,SAAS;AAE9D,sBAAM,oBAAoB,UAAU;AACpC,sBAAM,eAAe,SAAS;AAC9B,sBAAM,QAAQ,QAAQ,KACpB,YAAU,OAAO,sBAAsB,qBAAqB,OAAO,iBAAiB;AAGtF,oBAAI,OAAO;AACT,gCAAc;AACd,wBAAM,sBAAsB,oBAAY,uBAAZ,oBAAgC,eAAc;AAAA,uBACrE;AACL,0BAAQ,KAAK;AAAA,oBACX;AAAA,oBACA,cAAc,OAAO;AAAA,oBACrB,qBAAqB,YAAY,mBAAmB,cAAc;AAAA,oBAClE,OAAO,0BAA0B,IAAI;AAAA,oBACrC,cAAc,KAAK;AAAA;AAAA;AAGvB,yBACE,uBACA,UACA,8CACA;AAAA;AAIJ,qBAAO,aAAa,UAAU,aAAa,YAAY,SAAS;AAAA;AAAA,eAGpE;AAAA,YACE,SAAS,SAAS;AAAA,YAClB,MAAM,SAAS;AAAA,YACf,OAAO,aAAa;AAAA;AAI5B,cAAI,CAAC,UAAU;AACb,kBAAM,oBAAoB,SAAS;AACnC,kBAAM,QAAQ,QAAQ,KACpB,YAAU,OAAO,sBAAsB,qBAAqB,OAAO,iBAAiB,SAAS;AAG/F,gBAAI,OAAO;AACT,4BAAc;AACd,oBAAM,sBAAsB,mBAAY,uBAAZ,mBAA0C,eAAc;AAAA,mBAC/E;AACL,sBAAQ,KAAK;AAAA,gBACX;AAAA,gBACA,cAAc,OAAO,SAAS;AAAA,gBAC9B,qBAAqB,YAAY,mBAAmB,cAAc;AAAA,gBAClE,OAAO,0BAA0B,IAAI;AAAA,gBACrC,cAAc,KAAK;AAAA;AAAA;AAAA;AAAA,eAIpB;AACL,mBAAS,KAAK,MAAM,OAAO;AAAA;AAAA,eAEtB,OAAP;AACA,iBAAS,mCAAmC;AAC5C,iBAAS,KAAK,MAAM,OAAO;AAAA;AAAA;AAI/B,UAAM,cAAc,MAAM;AAExB,UAAI,CAAC,eAAe,eAAe;AACjC,iBAAS;AACT;AAAA;AAEF,oBAAc,IAAI,YAAY,GAAG,eAAe,kBAAkB;AAAA,QAChE,SAAS;AAAA,UACP,eAAe,UAAU;AAAA,UACzB,WAAW;AAAA;AAAA;AAIf,kBAAY,SAAS,CAAC,UAAe;AACnC,iBAAS,oBAAoB;AAC7B,iBAAS,KAAK,MAAM;AAAA;AAGtB,kBAAY,UAAU,CAAC,UAAe;AACpC,iBAAS;AACT,iBAAS,KAAK,MAAM;AAAA;AAGtB,kBAAY,UAAU,CAAC,UAAe;AACpC,iBAAS,oBAAoB;AAC7B,iBAAS,KAAK,SAAS;AAAA;AAGzB,kBAAY,iBAAiB,KAAK,CAAC,QAAa;AAC9C,cAAM,QAAqB,KAAK,MAAM,IAAI;AAE1C,iBAAS,gCAAgC;AAEzC,gBAAQ,MAAM;AAAA,eACP;AACH,uBAAW,MAAM,UAAU,MAAM,aAAa;AAC9C;AAAA,eACG;AACH,sBAAU,MAAM;AAChB;AAAA,eACG;AACH,mBAAO,QAAQ,MAAM;AACrB,qBAAS,KAAK,MAAM,SAAS,CAAE,MAAM,MAAM,YAAY,OAAO,QAAW,SAAS;AAClF,qBAAS,sBAAsB,CAAE,SAAS,OAAO;AAEjD;AAAA;AAAA;AAAA;AAKR,UAAM,KAAK,CAAC,OAAc,aAAkC,SAAS,GAAG,OAAO;AAE/E,UAAM,MAAM,CAAC,OAAe,aAAmC;AAC7D,UAAI,OAAO;AACT,iBAAS,IAAI,OAAO;AAAA,aACf;AACL;AAAA;AAAA;AAIJ,UAAM,YAAY,CAAC,MAAc,iBAAsB;AArbzD;AAsbI,YAAM,QAAQ,QAAQ;AAEtB,UAAI,CAAC,YAAY,UAAU,QAAW;AACpC,cAAM,eAAe;AACrB,cAAM,oBAAoB;AAE1B,cAAM,QAAQ,QAAQ,KACpB,YAAU,OAAO,sBAAsB,qBAAqB,OAAO,iBAAiB;AAGtF,YAAI,OAAO;AACT,wBAAc;AACd,gBAAM,sBAAsB,mBAAY,uBAAZ,mBAA0C,eAAc;AAAA,eAC/E;AACL,kBAAQ,KAAK;AAAA,YACX;AAAA,YACA;AAAA,YACA,OAAO,0BAA0B,IAAI;AAAA,YACrC,qBAAqB,YAAY,mBAAmB,cAAc;AAAA,YAClE,cAAc,KAAK;AAAA;AAAA;AAAA;AAKzB,aAAO,UAAU,SAAY,QAAQ;AAAA;AAGvC,UAAM,QAAQ,MAAM;AAClB,eAAS;AACT,gBAAU;AACV,oBAAc;AACd,mBAAa;AACb,eAAS,IAAI;AACb,kBAAY;AAAA;AAGd,WAAO,CAAE,IAAI,KAAK,WAAW;AAAA;",
  "names": []
}
